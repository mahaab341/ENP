(self.modernJsonp=self.modernJsonp||[]).push([["95853"],{618916:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={fragment:{argumentDefinitions:l=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:r=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheckQuery_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:l,kind:"Operation",name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:r,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},o],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c881f56582aebd78b7f3f625abfe959aa6d034bcd97439d6b4224d46c1c5f8cc",metadata:{},name:"AlreadyPinnedCheckQuery",operationKind:"query",text:null}};a.hash="0b5f077c08e31de36594b6918e128d12";let n=a;var l,r,s,o,d=a.default||a;if("query"===d.params.operationKind)if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(d);else{let e=[d.params.name,d.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[e]=d}},938742:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="6bb1a587f71f85424aa51845831862d4";let n=a},297180:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheck_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};a.hash="3caf9424c2af74d2b11a6ea682b57d1b";let n=a},588032:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],type:"Pin",abstractKey:null};a.hash="18c3db3fbed169f50cffd214f66ddd8e";let n=a},430138:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};a.hash="f12c153dafdb70970e02775ea0db67c2";let n=a},416054:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPicker_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};a.hash="76215b7b40cb02e76b77e58c8765d0d1";let n=a},146550:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardsPane_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPicker_pin"}],type:"Pin",abstractKey:null};a.hash="56f620fbd63abf8f7cb32f9a378198f8";let n=a},731127:function(e,t,i){var a,n;i.r(t),i.d(t,{default:()=>r});let l=(n=[a={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CallToAction_advisoryAction",selections:[{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:n,storageKey:null}],type:"AdvisoryAction",abstractKey:null});l.hash="6ddea2ecd3dff2e1001c1e4d037cc858";let r=l},437533:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DefaultNotice_advisoryNotice",selections:[{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"textTags",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"HyperlinkFormatText_textTag"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:"actionId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CallToAction_advisoryAction"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"AdvisoryNotice",abstractKey:null};a.hash="5879c4710b107f258f42156bf3e47e37";let n=a},811026:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"HyperlinkFormatText_textTag",selections:[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tagType",storageKey:null}],type:"TextTag",abstractKey:null};a.hash="4970946a36017d9ad0c751fd70cc512c";let n=a},827222:function(e,t,i){var a,n,l;i.r(t),i.d(t,{default:()=>s});let r=(n=[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],l=[a],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LegoNotice_advisoryNotice",selections:[{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:[a,{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"textTags",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"HyperlinkFormatText_textTag"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryFooter",kind:"LinkedField",name:"footer",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:l,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:l,storageKey:null}],storageKey:null}],type:"AdvisoryNotice",abstractKey:null});r.hash="53d7eec34666980eda011429185b5b10";let s=r},557070:function(e,t,i){var a,n,l,r,s;i.r(t),i.d(t,{default:()=>d});let o=(a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},s=[{alias:null,args:null,kind:"ScalarField",name:"boardId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"localPinId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sectionId",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinBetterSave_pin",selections:[a,{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},n,a,l,{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"owner",plural:!1,selections:[a],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinRecommendationReason",kind:"LinkedField",name:"recommendationReason",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[n,a,l],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsLeadAd",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"PinSaveRequestRepinWithSectionSuggestions_pin"},{args:null,kind:"FragmentSpread",name:"PinToBoard_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedInfo",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"savedCutout",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"SaveTarget",kind:"LinkedField",name:"selectedItem",plural:!1,selections:s,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null});o.hash="00592a87c0eef346f4bdfb1d6ca06595";let d=o},808569:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinBetterSave_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinSaveRequestRepinWithSectionSuggestions_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"PinToBoard_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};a.hash="2fd12704316ce3077575f9a0d9e31e84";let n=a},451508:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheck_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null};a.hash="d928a4e793c8e81567357b1faa71d2e3";let n=a},810730:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};a.hash="1a4583782792fbfe92015cb2dbe50f70";let n=a},578772:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequestRepinWithSectionSuggestions_pin",selections:[{args:null,kind:"FragmentSpread",name:"PinSaveRequest_pin"}],type:"Pin",abstractKey:null};a.hash="03aa6b9cad1d5fb9b12a7c896ccdaffd";let n=a},998538:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequestRepinWithSectionSuggestions_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinSaveRequest_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};a.hash="6bd1eb83cfe5391288164b17cc5d85b7";let n=a},973220:function(e,t,i){var a;i.r(t),i.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_pin",selections:[{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null}]}],type:"Pin",abstractKey:null};n.hash="bfa270bf437ef1e9195cafe07b0b3631";let l=n},13697:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"ShuffleAsset",abstractKey:null};a.hash="58c24e25a76e7a1c4533f3b07f490517";let n=a},384592:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_pin",selections:[{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardsPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_pin"}],type:"Pin",abstractKey:null};a.hash="616d5be8fea6092b51f23b548a1a5dca";let n=a},301056:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinPane_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};a.hash="4435ca5e135b834ea8a6425f68eb2f7a";let n=a},193157:function(e,t,i){var a,n,l;i.r(t),i.d(t,{default:()=>s});let r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SensitiveNotice_sensitivity",selections:[{alias:null,args:null,kind:"ScalarField",name:"advisory",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"severity",storageKey:null},{alias:null,args:null,concreteType:"AdvisoryNotice",kind:"LinkedField",name:"notices",plural:!0,selections:[{alias:"noticeId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"content_image_url",args:null,kind:"ScalarField",name:"contentImageUrl",storageKey:null},{alias:"suggested_resource",args:null,kind:"ScalarField",name:"suggestedResource",storageKey:null},{alias:"image_type",args:null,kind:"ScalarField",name:"imageType",storageKey:null},l={alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:n=[a={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:"actionId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a,{alias:"contact_type",args:null,kind:"ScalarField",name:"contactType",storageKey:null}],storageKey:null},l,{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:n,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],type:"Sensitivity",abstractKey:null};r.hash="6e21ec048bb4ac7d621865a42cf02a6c";let s=r},763859:function(e,t,i){var a;i.r(t),i.d(t,{default:()=>l});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedFiltersContext_oneBarModules",selections:[a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"moduleType",storageKey:null},{alias:null,args:null,concreteType:"OneBarModuleAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,concreteType:"FilterOption",kind:"LinkedField",name:"filters",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isSelected",storageKey:null},a,{alias:null,args:null,concreteType:"OneBarModuleDisplay",kind:"LinkedField",name:"display",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayText",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"OneBarModuleAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"feedUrl",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"OneBarModule",abstractKey:null};n.hash="92b841173868ce353dd00b5fce287546";let l=n},608747:function(e,t,i){var a,n;i.r(t),i.d(t,{default:()=>r});let l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"boardId"}],kind:"Fragment",metadata:null,name:"collab_AcceptInvite_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3AcceptBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"collab_AcceptInvite_Mutation",selections:n},params:{id:"781c41132fefa007ebde7bcd8c49840ce1768ed6f6781fd72e3904bd35fb576f",metadata:{},name:"collab_AcceptInvite_Mutation",operationKind:"mutation",text:null}};l.hash="7005ce437a6a6ff33741ab44aa02cf61";let r=l},479699:function(e,t,i){var a,n;i.r(t),i.d(t,{default:()=>r});let l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_ApproveInvite_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3ApproveBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"collab_ApproveInvite_Mutation",selections:n},params:{id:"472a584df4a467181ed32ec33d235ef2f2e6d53fdb4c7a43d11156b6d51dcd50",metadata:{},name:"collab_ApproveInvite_Mutation",operationKind:"mutation",text:null}};l.hash="40ae8061007ba5f53a4570e43e4ca864";let r=l},296485:function(e,t,i){var a,n,l,r;i.r(t),i.d(t,{default:()=>o});let s={fragment:{argumentDefinitions:[a={defaultValue:null,kind:"LocalArgument",name:"ban"},n={defaultValue:null,kind:"LocalArgument",name:"boardId"},l={defaultValue:null,kind:"LocalArgument",name:"userId"}],kind:"Fragment",metadata:null,name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:r=[{alias:null,args:[{fields:[{kind:"Variable",name:"ban",variableName:"ban"},{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"user",variableName:"userId"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3DeclineOrDeleteBoardCollaboratorInviteMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,l,a],kind:"Operation",name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",selections:r},params:{id:"ff3059743c1d13d4f1c2ef07e10d2b29925c7b330db4103e55e9e65c380c0ce5",metadata:{},name:"collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation",operationKind:"mutation",text:null}};s.hash="c62e5df78917dd238b70f366f358d487";let o=s},579965:function(e,t,i){var a,n,l,r,s,o,d,c;i.r(t),i.d(t,{default:()=>h});let u={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"board"},{defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"}],kind:"Fragment",metadata:null,name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:n=[{fields:[{kind:"Variable",name:"board",variableName:"board"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[r={alias:null,args:null,kind:"ScalarField",name:"collaboratorCount",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null}],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"collab_RemoveBoardCollaborators_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3RemoveBoardCollaboratorsMutation",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"data",plural:!1,selections:[r,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"collaboratingUsers",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersConnection",kind:"LinkedField",name:"connection",plural:!1,selections:[{alias:null,args:null,concreteType:"UserCollaboratingUsersEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"node",plural:!1,selections:[s,o,c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"UserCollaboratingUsersConnectionContainer",abstractKey:null}],storageKey:null},c],storageKey:null}],type:"V3RemoveBoardCollaborators",abstractKey:null},d],storageKey:null}]},params:{id:"83dd1206102cffdd460f8c072df0ca515d27c8fcf3798423f1657afabdf467ac",metadata:{},name:"collab_RemoveBoardCollaborators_Mutation",operationKind:"mutation",text:null}};u.hash="2c3e1508650962adfff1171e950fa419";let h=u},336997:function(e,t,i){var a,n,l,r,s,o,d,c,u,h;i.r(t),i.d(t,{default:()=>_});let p=(a=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"message"}],n=[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},s=[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],o={alias:null,args:null,kind:"ScalarField",name:"status",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},u={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"},h=[r,c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:s,storageKey:null},o,d,c,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:s,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},u],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"collab_RequestToJoin_Mutation",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3CreateRequestToJoinBoardMutation",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"CollaboratorInvite",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedByUser",plural:!1,selections:h,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"invitedUser",plural:!1,selections:h,storageKey:null},o,d,c,{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:h,storageKey:null}],storageKey:null}],type:"CollaboratorInviteResponse",abstractKey:null},u],storageKey:null}]},params:{id:"ff45f353c3246c417487b54a02f0669dbc6c45761df9567395537bf1f7875a9f",metadata:{},name:"collab_RequestToJoin_Mutation",operationKind:"mutation",text:null}});p.hash="9aa22a7713214239538142ad2c957cc3";let _=p},868455:function(e,t,i){var a,n;i.r(t),i.d(t,{default:()=>r});let l={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"boardId"},{defaultValue:null,kind:"LocalArgument",name:"emails"},{defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_emails_Mutation",selections:n=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"emails",variableName:"emails"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorEmailMutationv2",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"collab_emails_Mutation",selections:n},params:{id:"b71dbcb22ec2462fa0cde080403e4f9001df6f822511fd94b0fb3eae0c6b3fd4",metadata:{},name:"collab_emails_Mutation",operationKind:"mutation",text:null}};l.hash="de392a939a95d05f7ee889fe77a9e52d";let r=l},800679:function(e,t,i){var a,n,l,r;i.r(t),i.d(t,{default:()=>o});let s={fragment:{argumentDefinitions:[a={defaultValue:null,kind:"LocalArgument",name:"boardId"},n={defaultValue:null,kind:"LocalArgument",name:"collaboratorIds"},l={defaultValue:null,kind:"LocalArgument",name:"message"}],kind:"Fragment",metadata:null,name:"collab_users_Mutation",selections:r=[{alias:null,args:[{fields:[{kind:"Variable",name:"board",variableName:"boardId"},{kind:"Variable",name:"collaboratorIds",variableName:"collaboratorIds"},{kind:"Variable",name:"message",variableName:"message"}],kind:"ObjectValue",name:"input"}],concreteType:null,kind:"LinkedField",name:"v3InviteBoardCollaboratorsMutation",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"ErrorInfo",kind:"LinkedField",name:"error",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"paramPath",storageKey:null}],storageKey:null}],type:"Error",abstractKey:"__isError"}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[n,a,l],kind:"Operation",name:"collab_users_Mutation",selections:r},params:{id:"42ceaa3423a096a27613e5738f83aaadcee449c55d4dd03624d2f08a6b6dca04",metadata:{},name:"collab_users_Mutation",operationKind:"mutation",text:null}};s.hash="850c5de9834cac0edfdd5652a78bffbf";let o=s},725369:function(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"hasSensitivityNotices_sensitivity",selections:[{alias:null,args:null,concreteType:"AdvisoryNotice",kind:"LinkedField",name:"notices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"advisory",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"severity",storageKey:null}],type:"Sensitivity",abstractKey:null};a.hash="547e5abdb645851996d6a1b1a4027c56";let n=a},377678:function(e,t,i){i.d(t,{N$:()=>F,wy:()=>R,VA:()=>B}),i(281098);var a,n=i(667294),l=i(167912),r=i(780879),s=i(119797),o=i(448744),d=i(761256);let c=(e,t,i)=>i&&(0,o.nZ)(i,t)?s.v.MODIFIED:(0,o.B1)(t,e)||i&&(0,o.Uv)(i,e)||(0,o.Uv)(t,e)?s.v.CLEARED:s.v.APPLIED;function u(e,t){(0,o.ph)(t);let i=e.find(e=>e?.id===t.id),a=i?.rules,n=i?.filter_options?.find(e=>"selectedOptionId"in t&&e.id===t.selectedOptionId)?.rules||a;if(!n)return[e,[]];let l=[],r=[];return e.forEach(e=>{void 0!==e.product_filter_type&&n.includes(e.product_filter_type)?l.push(e):r.push(e)}),[l,r]}function h(e,t){switch(t.type){case"RESET_FILTERS":let[i,a]=t.payload,n=i,l=(0,d.Z)(a)?(0,o.iP)(i):a;return Object.values(l).forEach(e=>{let[t]=u(n,e);n=t}),{models:i,availableFilterModels:n,appliedFilters:a,filters:l,isFetching:!1,pendingDeletedSelections:{},status:c(i,a,l)};case"CLEAR_FILTERS":let r=e.models,h=(0,o.P5)(e.models);return Object.values(h).forEach(e=>{let[t]=u(r,e);r=t}),{...e,filters:h,availableFilterModels:r,pendingDeletedSelections:{},status:c(e.models,e.appliedFilters,h)};case"UPDATE_FILTER":let{payload:p}=t,[_,g]=u(e.models,p),m={...e.filters,[p.id]:p},f={...e.pendingDeletedSelections};return _.forEach(e=>{if(!e.id)return;let t=f[e.id];t&&(m[e.id]=t,delete f[e.id])}),g.forEach(e=>{if(!e.id)return;let t=m[e.id];t&&(f[e.id]=t,delete m[e.id])}),(0,o.ph)(p,e.models.find(e=>e.id===p.id))&&delete m[p.id],{...e,availableFilterModels:_,filters:m,pendingDeletedSelections:f,status:c(e.models,e.appliedFilters,m)};case"SUBMIT_FILTER":return{...e,pendingDeletedSelections:{},status:s.v.SUBMITTED};case"SUBMIT_FAILED":return{...e,status:s.v.FAILED};case"SUBMIT_COMPLETE":let{filters:y}=e;return{...e,appliedFilters:y,pendingDeletedSelections:{},status:c(e.models,y)};case"LOADING":return{...e,isFetching:!0};case"LOADING_COMPLETED_OR_FAILED":return{...e,isFetching:!1};default:return e}}var p=i(769430),_=i(753090),g=i(838880),m=i(234681),f=i(272191),y=i(503246);let b=new Set([1,0,3,6,7,8,9]),v=(e,t,i)=>{let a=t?.find(({product_filter_type:e})=>e===i);if(!a)return;let n=e.findIndex(({product_filter_type:e})=>e===i);e[n]?e[n]=a:e.push(a)},x=(e,t,i)=>{let a=t?.find(({product_filter_type:e})=>e===i);if(!a)return e;let n=e.findIndex(({product_filter_type:e})=>e===i);return e[n]?e[n]=a:e.push(a),e};var S=i(755222),w=i(729434),P=i(886981),k=i(288910),I=i(77155),j=i(785893);let C=()=>{},{Provider:A,getMaybe:B}=(0,w.Z)("UnifiedFiltersContext"),T=({applyInitFilters:e,children:t,filterModels:i,filters:a,isFetching:l,refreshFiltersData:r})=>{let{query:d}=(0,k.n)(),c=(0,S.Z)(),{getCachedFilters:u,cacheUnifiedFilterModelsWithProductFilters:w}=function(){let[e,t]=(0,n.useState)([]),[i,a]=(0,n.useState)(null),l=(0,f.Z)(),r=(0,g.Z)(),s=(0,p.Z)(),o=(0,_.Z)(),d=(0,m.Z)(),c=(0,n.useCallback)(({unifiedFilterModels:n,baseCacheKey:c})=>{let u=n?.filter(({product_filter_type:e})=>void 0!==e&&b.has(e));if(!u||u?.length===0||!c)return;let h=c!==i,p=h?[]:e;(h||!l)&&v(p,u,1),(h||!r)&&v(p,u,0),(h||!s)&&v(p,u,3),(h||!o)&&v(p,u,6),(h||!d)&&[7,8,9].forEach(e=>{v(p,u,e)}),(0,y.ZP)(p,e)||(t(p),a(c))},[e,s,o,r,d,l,i]);return{getCachedFilters:(0,n.useCallback)(t=>{if(!t||t?.length===0)return[];let i=[...t];return l&&(i=x(i,e,1)),r&&(i=x(i,e,0)),s&&(i=x(i,e,3)),o&&(i=x(i,e,6)),d&&[7,8,9].forEach(t=>{i=x(i,e,t)}),i},[e,s,o,r,d,l]),cacheUnifiedFilterModelsWithProductFilters:c}}(),P=e?.(i)||a||{},[I,C]=(0,n.useReducer)(h,{models:i,availableFilterModels:i,appliedFilters:P,filters:P,pendingDeletedSelections:{},isFetching:l,status:(0,o.B1)(P,i)||(0,o.Uv)(P,i)?s.v.CLEARED:s.v.APPLIED}),[B,T]=(0,n.useState)(i);(0,n.useEffect)(()=>{l&&C({type:"LOADING"})},[l]),(0,n.useEffect)(()=>{if(l||I.isFetching&&0===i.length)return;if(!(0,o.a$)(B,i))return void C({type:"LOADING_COMPLETED_OR_FAILED"});let t=i;c||(t=u([...i]),w({unifiedFilterModels:[...i],baseCacheKey:d})),C({type:"RESET_FILTERS",payload:[t,e?.(t)||{}]}),T(i)},[e,i,B,l,I.isFetching,u,w,d,c]);let F=(0,n.useMemo)(()=>({filterState:I,dispatch:C,refreshFiltersData:r}),[I,r]);return(0,j.jsx)(A,{value:F,children:t})},F=({bookmark:e="",children:t,generateInitFilterCb:i})=>{let a=(0,S.Z)(),{data:n=null,refresh:l,isLoaded:s}=(0,P.Z)(!a&&e?{name:"ApiResource",options:{url:"/v3/filters/",data:{bookmark_string:e}}}:null),{cachedProductFilterOneBarModules:d}=(0,r.l)(),c=d.map(o.tx).filter(Boolean);return(0,j.jsx)(T,{applyInitFilters:i,filterModels:(a?c:n)||[],isFetching:a?0===c.length:!s||!e,refreshFiltersData:l,children:t})},E=(void 0!==a||(a=i(763859)).hash&&"92b841173868ce353dd00b5fce287546"!==a.hash&&console.error("The definition of 'UnifiedFiltersContext_oneBarModules' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),R=({children:e,oneBarModulesKey:t})=>{let{data:i,isFetching:a,isLoaded:r}=(0,I.Z)(),{oneBarModules:o}=i||{},d=(0,l.useFragment)(E,t),c=(0,n.useMemo)(()=>({dispatch:()=>{},filterState:{models:[],availableFilterModels:[],appliedFilters:{},filters:{},isFetching:a,pendingDeletedSelections:{},status:s.v.CLEARED},refreshFiltersData:C}),[a]),u=(d?[d]:o?.map(e=>e&&{action:e.action?{filters:e.action.filters?e.action.filters.map(e=>({isSelected:e.is_selected??null,id:e.id??null,display:e.display?{displayText:e.display.display_text??null}:null,action:e.action?{feedUrl:e.action.feed_url??null}:null})):null}:null,id:e.id??null,moduleType:e.module_type??null}))?.find(({moduleType:e})=>0===e),h=u?.action?.filters;if(!u||!h)return(0,j.jsx)(A,{value:c,children:e});let p=u.id||"",_={[p]:{id:p,selectedOptionId:h.find((e,t)=>e?.isSelected&&0!==t)?.id||"",type:"single",lastChangedLocation:1}};return(0,j.jsx)(T,{filterModels:[{filter_component_type:2,filter_options:h.map((e,t)=>({label:e?.display?.displayText||"",id:e?.id||"",string_value:e?.action?.feedUrl||"",is_selected:"boolean"==typeof e?.isSelected?e.isSelected:0===t})),id:p,title:"",product_filter_type:4}],filters:_,isFetching:!r,refreshFiltersData:C,children:e})}},119797:function(e,t,i){i.d(t,{$:()=>a,v:()=>n});let a=50,n={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},239988:function(e,t,i){i.d(t,{Z:()=>c});var a=i(780879),n=i(377678),l=i(448744),r=i(949044),s=i(755522),o=i(510928),d=i(288910);function c(){let{brands:e,colors:t,domains:i,onSale:c,priceMax:u,priceMin:h}=(0,d.n)(),p=(0,n.VA)(),{cachedProductFilterOneBarModules:_}=(0,a.l)(),g=Number((0,o.Z)().filter_location);if(1===g){let{filterState:e}=p||{};return e?(0,l.Ax)(e.appliedFilters,e.models):null}if(0===g){let a=(0,r.Z)(s.Z,!0)(_.map(e=>e.action?.filter).filter(Boolean));return(0,l.vJ)({brandsParam:e,colorsParam:t,domainsParam:i,onSaleParam:c,priceMaxParam:u,priceMinParam:h,unifiedFilterModels:a})}return null}},448744:function(e,t,i){i.d(t,{Ak:()=>w,Ax:()=>v,B1:()=>h,LG:()=>S,P5:()=>g,UP:()=>P,Uv:()=>p,a$:()=>c,eF:()=>k,i7:()=>f,iP:()=>_,nZ:()=>d,ph:()=>u,rc:()=>b,tx:()=>x,vJ:()=>y});var a=i(119797),n=i(503246),l=i(478135);let r=e=>e.map(({filter_component_type:e,filter_options:t,title:i})=>({filter_component_type:e,filter_options:t?.map(({id:e,label:t,count:i,image_url:a,is_verified:n,numeric_value:l,string_value:r,unit:s})=>({id:e,label:t,count:i,image_url:a,is_verified:n,numeric_value:l,string_value:r,unit:s})),title:i})),s=(e,t)=>{if(!e&&!t)return!1;if(!e||!t)return!0;if("single"===e.type&&"single"===t.type)return e.selectedOptionId!==t.selectedOptionId;if("multi"===e.type&&"multi"===t.type)return!(0,n.ZP)(e.selectedOptionIds,t.selectedOptionIds);if("range"===e.type&&"range"===t.type)return e.min!==t.min||e.max!==t.max;throw Error("Filter type specific return must be specified")},o=e=>!e||!Object.keys(e).length,d=(e,t)=>{if(o(e)&&o(t))return!1;if(o(e)||o(t)||e&&t&&Object.entries(e).length!==Object.entries(t).length)return!0;for(let i in e)if(s(e[i],t?.[i]))return!0;return!1},c=(e,t)=>!(0,n.ZP)(r(e),r(t)),u=(e,t)=>{if("single"===e.type)return!e.selectedOptionId;if("multi"===e.type)return 0===e.selectedOptionIds.size;if("range"===e.type)return!!t?.filter_options&&e.min===t.filter_options[0]?.numeric_value&&e.max===t.filter_options[2]?.numeric_value;throw Error("Filter type specific return must be specified")},h=(e,t)=>{try{for(let i in e){let a=e[i],n=t.find(e=>e.id===a?.id);if(a&&!u(a,n))return!1}return!0}catch(e){return!0}},p=(e,t)=>{if(!t||0===t.length)return!1;let i=t[0];if(!i)return!1;switch(i?.filter_component_type){case 2:let a=i.filter_options?.[0];for(let t in e){let i=e[t];if(!i)break;if("selectedOptionId"in i&&i.selectedOptionId===a?.id)return!0}return!1;case 1:for(let t in e){let a=e[t];if(!a)break;if(a.id===i.id&&"selectedOptionIds"in a&&0===a.selectedOptionIds.size)return!0}return!1;default:return!1}},_=e=>e.map(e=>{switch(e.filter_component_type){case 2:let t=e.filter_options?.find(e=>e.is_selected)?.id;return t?{selectedOptionId:t,id:e.id,type:"single"}:null;case 1:let i=e.filter_options?.filter(e=>e.is_selected).map(({id:e})=>e);return i&&i.length>0?{selectedOptionIds:new Set(i),id:e.id,type:"multi"}:null;default:return null}}).reduce((e,t)=>t?{...e,[t.id]:t}:e,{}),g=e=>{if(!e||0===e.length)return{};let t=e[0];switch(t?.filter_component_type){case 2:let i=t.filter_options?.[0]?.id;return i&&"string"==typeof t.id?{[t.id]:{selectedOptionId:i,lastChangedLocation:1,id:t.id,type:"single"}}:{};case 1:return"string"==typeof t.id?{[t.id]:{selectedOptionIds:new Set,lastChangedLocation:1,id:t.id,type:"multi"}}:{};default:return{}}},m=e=>e.map(e=>{let{filter_id:t,filter_options:i,product_filter_type:a}=e,n=t;return"number"==typeof a&&(n+=`_${a}`),i.length>0&&(n+=":",i.forEach((e,t)=>{let{filter_option_id:a,numeric_value:l,string_value:r,unit:s}=e;n+=`${a}`,"number"==typeof l&&(n+=`_${l}`),"string"==typeof r&&(n+=`_${r}`),"string"==typeof s&&(n+=`_${s}`),t<i.length-1&&(n+=",")})),n}).join("|"),f=({brands:e,colors:t,domains:i,onSale:a,priceMax:n,priceMin:r,scope:s,unifiedFilterModels:o})=>{let d={};for(let{filter_options:c,id:u,product_filter_type:h}of o)if(u&&c?.length){if(1===h&&("number"==typeof r||"number"==typeof n)){let[e,t,i,a]=c,l=r??i?.numeric_value??e?.numeric_value??0,s=n??a?.numeric_value??t?.numeric_value??100;d[u]={min:l,max:s,id:u,type:"range",lastChangedLocation:1}}if(0===h&&i&&i.length>0){let e=i.map(e=>{let t=c.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);e.length>0&&(d[u]={id:u,lastChangedLocation:1,selectedOptionIds:new Set(e),type:"multi"})}if(3===h&&e&&e.length>0){let t=e.map(e=>{let t=c.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);t.length>0&&(d[u]={id:u,lastChangedLocation:1,selectedOptionIds:new Set(t),type:"multi"})}if(6===h&&t&&t.length>0){let e=t.map(e=>{let t=c.find(({string_value:t})=>t===e);return t?t.id:null}).filter(Boolean);e.length>0&&(d[u]={id:u,lastChangedLocation:1,selectedOptionIds:new Set(e),type:"multi"})}if(4===h&&s){let e=(0,l.gi)(s),t=c.find(({search_type:t})=>t===e);t?.id&&(d[u]={id:u,lastChangedLocation:1,selectedOptionId:t.id,type:"single"})}if("number"==typeof h&&new Set([7,8,9]).has(h)&&a){let e=c[0]?.id;e&&(d[u]={id:u,lastChangedLocation:1,selectedOptionId:e,type:"single"})}}return d},y=({brandsParam:e,colorsParam:t,domainsParam:i,onSaleParam:a,priceMaxParam:n,priceMinParam:l,unifiedFilterModels:r})=>{let s=[],o=Number(l),d=Number(n),c=Number.isNaN(o)?void 0:o,u=Number.isNaN(d)?void 0:d,h=i?.split(",").filter(Boolean)??[],p=e?.split(",").filter(Boolean)??[],_=t?.split(",").filter(Boolean)??[];for(let{filter_options:e,id:t,product_filter_type:i}of r)if(t&&e?.length){if(1===i&&"number"==typeof c&&"number"==typeof u){let a={filter_id:t,filter_options:e.slice(0,2).filter(e=>void 0!==e.id).map((e,t)=>({filter_option_id:e.id,numeric_value:0===t?c:u,unit:e.unit||"USD"})),location:0,product_filter_type:i};s.push(a)}if(0===i&&h&&h.length>0){let a=h.map(t=>{let i=e.find(e=>e.string_value===t);return i?i.id:null}).filter(Boolean);if(a.length>0){let e={filter_id:t,filter_options:a.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:i};s.push(e)}}if(3===i&&p&&p.length>0){let a=p.map(t=>{let i=e.find(e=>e.string_value===t);return i?i.id:null}).filter(Boolean);if(a.length>0){let e={filter_id:t,filter_options:a.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:i};s.push(e)}}if(6===i&&_&&_.length>0){let a=_.map(t=>{let i=e.find(e=>e.string_value?.toLowerCase()===t.toLowerCase());return i?i.id:null}).filter(Boolean);if(a.length>0){let e={filter_id:t,filter_options:a.map(e=>({filter_option_id:e,string_value:e})),location:0,product_filter_type:i};s.push(e)}}if(7===i&&a){let n=e[0]?.id;if(n){let e={filter_id:t,filter_options:[{filter_option_id:n,numeric_value:Number(a)}],location:0,product_filter_type:i};s.push(e)}}}return 0===s.length?null:m(s)},b=({filterMap:e,isInWebHundredPercentProductLoadExp:t,models:i})=>{let a=null,n=null,r=!1,s=null,o=null,d=null,c=null,u=null;for(let h in e){let p=e[h];if(p){let e=i.find(e=>e.id===p.id);if(e)if("range"===p.type&&1===e.product_filter_type)d=p.min,o=p.max;else if("multi"===p.type&&0===e.product_filter_type){let t=e.filter_options?.filter(e=>p.selectedOptionIds.has(e.id||""));s=t?.map(e=>e.string_value).filter(Boolean)}else if("multi"===p.type&&3===e.product_filter_type){let t=e.filter_options?.filter(e=>p.selectedOptionIds.has(e.id||""));a=t?.map(e=>e.string_value).filter(Boolean)}else if("multi"===p.type&&6===e.product_filter_type){let t=e.filter_options?.filter(e=>p.selectedOptionIds.has(e.id||""));n=t?.map(e=>e.string_value).filter(Boolean)}else if("single"===p.type&&4===e.product_filter_type){let i=e.filter_options?.find(e=>p.selectedOptionId===e.id),a=i&&void 0!==i.search_type?(0,l.zh)(i.search_type):l.lw.PINS;u=a,t&&(u=a===l.lw.PINS_BUYABLE?l.lw.PINS:a,r=a===l.lw.PINS_BUYABLE)}else"single"===p.type&&7===e.product_filter_type&&(c=e.filter_options?.[0]?.numeric_value)}}let h=i.find(e=>4===e.product_filter_type),p=h?.filter_options?.find(e=>e.is_selected);return null===u&&"number"==typeof p?.search_type&&(u=(0,l.zh)(p.search_type)),{brands:a,colors:n,commerce_only:r,domains:s,max:o,min:d,on_sale:c,scope:u}},v=(e,t)=>{let i=[];return(Object.entries(e).forEach(([e,a])=>{let n=t.find(e=>e.id===a.id);if(!n||4===n.product_filter_type||"number"!=typeof n.product_filter_type||!n.filter_options)return;let l=[];if("range"===a.type){let[e,t]=n.filter_options;if(!e?.id||!t?.id)return;l=[{filter_option_id:e.id,numeric_value:a.min,unit:e.unit},{filter_option_id:t.id,numeric_value:a.max,unit:t.unit}]}if("single"===a.type){let e=n.filter_options.find(e=>e.id===a.selectedOptionId);if(!e?.id)return;l=[{filter_option_id:e.id,numeric_value:e.numeric_value,string_value:e.string_value}]}if("multi"===a.type){let e=n.filter_options.filter(e=>e.id&&a.selectedOptionIds.has(e.id));if(0===e.length)return;l=e.filter(e=>void 0!==e.id).map(e=>({filter_option_id:e.id,numeric_value:e.numeric_value,string_value:e.string_value}))}i.push({filter_id:e,filter_options:l,location:a.lastChangedLocation,product_filter_type:n.product_filter_type})}),i&&0!==i.length)?m(i):null},x=e=>{let{filter:t,title:i}=e.action||{},{title:a}=t||{},n=i||a;if(!t||!n)return null;let{filterComponentType:l,productFilterType:r,id:s}=t,o=(t.filterOptions||[]).filter(Boolean);if(void 0===l||void 0===o||0===o.length||null==r||null==s)return null;let d=(e=>{let t=e.map(e=>{if(!e)return null;let{auxData:t,id:i,imageUrl:a,isVerified:n,label:l,numericValue:r,searchType:s,stringValue:o,unit:d,rules:c}=e;return null===a||null===a||null===r||null===n||null===o||null===d?null:{id:i||"",label:l||"",count:0,image_url:a,is_verified:n,numeric_value:r,...c?{rules:[...c]}:{},..."number"==typeof s?{search_type:s}:{},string_value:o,unit:d,..."string"==typeof t?.moduleId?{aux_data:{module_id:t.moduleId}}:{}}}).filter(Boolean);return t.length>0?t:null})(o);return d?{filter_component_type:l,filter_options:[...d],id:s||"",product_filter_type:r,title:n}:null};function S(e,t,i){let[n,l,r,s]=i,{numeric_value:o=0}=s??n??{},{numeric_value:d=o+a.$}=r??l??{},{unit:c="USD"}=n??{},u=e.filters[t]?.type==="range"?e.filters[t]:{min:o,max:d,id:t,type:"range",lastChangedLocation:1};return{defaultMax:d,defaultMin:o,unit:c,range:u}}function w(e){return"multi"!==e.type?e:{...e,selectedOptionIds:new Set}}function P(e,t){let i=[];return Object.entries(t).forEach(([t,a])=>{let n=e.find(e=>e?.id===t);if(n){let e=n.aux_data?.module_id;e&&i.push(e);let t=("multi"===a.type?Array.from(a.selectedOptionIds):"single"===a.type?[a.selectedOptionId]:[]).map(e=>{let t=n.filter_options?.find(t=>t.id===e);return t?.aux_data?.module_id||""}).filter(Boolean);i.push(...t)}}),i}function k(e,t){let i=[];return Object.keys(t).forEach(t=>{let a=e.find(e=>e?.id===t);if(a){let e=a.product_filter_type;e&&i.push(e)}}),i}},10594:function(e,t,i){i.d(t,{Z:()=>a});let a=e=>({isAnalyticsSite:4===e,isSterlingSite:3===e,isWwwSite:0===e,isTrendsSite:7===e,isPlanningHub:12===e})},10423:function(e,t,i){i.d(t,{Z:()=>l});let a=function(e,t){this.uid=e,this.item=t,this.next=null,this.prev=null},n=function(e){this._maxNumItems=e||10,this._uidToData={},this._numItems=0,this._firstData=null,this._lastData=null};n.prototype.set=function(e,t){let i=this._uidToData[e];i||(i=new a(e,t),this._uidToData[e]=i,this._numItems+=1),this._moveToFront(i),this._numItems>this._maxNumItems&&this._evict()},n.prototype.get=function(e){let t=this._uidToData[e];return t?(this._moveToFront(t),t.item):null},n.prototype.remove=function(e){let t=this._uidToData[e];t&&(delete this._uidToData[e],this._firstData===t&&(this._firstData=t.next),this._lastData===t&&(this._lastData=t.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this._numItems-=1)},n.prototype._moveToFront=function(e){this._firstData!==e&&(this._firstData?(this._lastData===e&&(this._lastData=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this._firstData.prev=e,e.next=this._firstData,e.prev=null,this._firstData=e):(this._firstData=e,this._lastData=e))},n.prototype._evict=function(){delete this._uidToData[this._lastData.uid],this._firstData===this._lastData?(this._firstData=null,this._lastData=null):(this._lastData=this._lastData.prev,this._lastData.next=null),this._numItems-=1};let l=n},587795:function(e,t,i){i.d(t,{Cd:()=>m,G:()=>S,IA:()=>k,M5:()=>P,ML:()=>u,Oh:()=>v,Pe:()=>c,Tv:()=>_,Uy:()=>h,Xf:()=>b,cO:()=>f,ew:()=>p,nN:()=>y,p9:()=>x,yo:()=>g});var a=i(423234),n=i(112274),l=i(943271),r=i(838161),s=i(302148),o=i(236957),d=i(603316);let c=e=>e._('Make sure this age is accurate. Your birthdate is required for personalization, community safety and as part of our terms of service. For business accounts, use your own birthdate.', 'birthdateConfirmation.HelperText', 'Helper text notifying users to input their own birthday'),u=e=>e._('Use your own birthday, even if this a business account', 'birthdateConfirmation.HelperText.ownBirthday', 'Helper text notifying users to input their own birthday'),h=e=>e._('Oops! Please use a valid age to sign up.', 'existingUser.birthdaycollection.error.overage', 'Error message shown when overage (age over 120) user tries to register'),p=(e,t)=>{let{locale:i}=t.getLocaleData(),a=(0,r.Z)(e),n=a.toLocaleString(i,{month:"long"}),l=a.getDate().toString(),o=a.getFullYear();return(0,s.nk)(t._('Is {{month}} {{day}}, {{year}} your birthday?', 'birthdateConfirmation.heading', 'Header for the confirmation model verifying the age for the birthdate that the user inputted, month: month inputted into the fields, day: day inputted into the fields, year: year inputted into the fields'),{month:n,day:l,year:o})},_=(e,t,i,a,n=!1)=>{let l=(0,s.nk)(n?e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}}.', 'settings birthday error message', 'label for settings birthday error message. dayError: Incorrect day. monthError: Incorrect month. yearError: Incorrect year.'):e._('Oops! Please enter a valid {{dayError}}{{monthError}}{{yearError}} to sign up.', 'signup birthday error message', 'label for sign up birthday error message'),{dayError:t?e._('day', 'dayError keyword placeholder', 'label for dayError keyword place holder'):"",monthError:i?e._('month', 'monthError keyword placeholder', 'label for monthError keyword place holder'):"",yearError:a?e._('year', 'monthError keyword placeholder', 'label for monthError keyword place holder'):""}).filter(e=>0!==e.length);return 3===l.length?l.join(""):l[0]+l.slice(1,-1).join(", ")+l[l.length-1]},g=({country:e})=>e&&e in o.T3?o.T3[e]:o.Ur,m=(e,t)=>{let i=new Date,a=new Date(i.getFullYear()-t,i.getMonth(),i.getDate());return new Date(e)<=a},f=new Date().getFullYear(),y=new Date().getFullYear()-120,b=12,v=1,x=1,S=31,w="yyyy-MM-dd",P=e=>{let t=new Date,i=new Date(y,t.getMonth(),t.getDate()),a=m(e,5),n=new Date(e)>i;return a&&n};function k(e){let t=(0,a.Z)(e,w,new Date);if((0,n.Z)(t))return e;let i=new Date(e);try{return(0,l.Z)(i,w)}catch{return(0,d.nP)("webapp.birthday_validation_error",{sampleRate:1,tags:{birthdate:e}}),e}}},838161:function(e,t,i){i.d(t,{Z:()=>a});let a=e=>{let t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate())}},10972:function(e,t,i){i.d(t,{Z:()=>l});var a=i(667294),n=i(490193);function l({allowSearchOnMount:e,children:t,onTypeaheadSuggestionsChange:i,resourceName:l,resourceOptions:r,value:s}){let o=(0,n.Z)({allowSearchOnMount:e,resourceName:l,resourceOptions:r,value:s});return(0,a.useEffect)(()=>{o?.length&&i(o)},[o]),t||null}},684148:function(e,t,i){i.d(t,{Z:()=>a});let a=2},490193:function(e,t,i){i.d(t,{Z:()=>r});var a=i(667294),n=i(10423),l=i(791948);function r({allowSearchOnMount:e=!1,resourceName:t,resourceOptions:i={},value:r}){let s=(0,a.useRef)(!1),o=(0,a.useRef)({}),[d,c]=(0,a.useState)([]),u=function({resourceName:e,resourceOptions:t}){let i=(0,l.vL)(),r=(0,a.useRef)(void 0);return r.current||(r.current=function({resourceCreator:e,resourceName:t,resourceOptions:i}){let a=e(t,{...i,count:"count"in i?i.count:5}),l=new n.Z,r=()=>{a.abort()},s=async(e,t)=>{if(a.isCalling()){let i=a.options?.term,n=a.options?.pin_scope;if(e===i&&t===n)return;r()}let{bookmarks:i,...n}=a.options||{};a.options={...n,term:e,pin_scope:t};let{data:s}=(await a.callGet({showError:!1})).resource_response,o=s?.items,d=s?.hint||{};return l.set(`${t}-${e}`,{hint:d,items:o}),{term:e,items:o,hint:d}};return async function(e,t){let i=l.get(`${t}-${e}`);if(i){let{items:t}=i;if(t&&t.length){r();let{hint:a}=i;return{hint:a,items:t,term:e}}}return e.length>=0?s(e,t):{hint:{},items:[],term:e}}}({resourceCreator:i,resourceName:e,resourceOptions:t})),r.current}({resourceName:t,resourceOptions:i}),h=i.pin_scope||"pins",p=`${h}-${r}`;return(0,a.useEffect)(()=>{(async()=>{if(null!=r&&""!==r&&(e||s.current))if(p in o.current)c(o.current[p]);else try{let e=await u(r,h);if(e){let{items:t}=e;o.current[p]=t,c(t)}}catch(e){if("Resource call aborted"===e)return;throw e}s.current||(s.current=!0)})()},[r,h,p]),d}},244347:function(e,t,i){i.d(t,{Z:()=>l});var a=i(378888),n=i(215295);function l(e){if(!e)return"";let{directory:t,queryKey:i}=(0,n.Z)((0,a.Gw)(e,["request_params"]));return t+"?"+Object.keys(i).sort().map(e=>`${e}=${i[e]}`).join("&")}},316949:function(e,t,i){i.d(t,{Z:()=>a});function a({category:e,domains:t,maxPrice:i,minPrice:a}){return[e,t,i,a].map(e=>e??"").join("-")}},672061:function(e,t,i){i.d(t,{Z:()=>n});var a=i(378888);function n(e,t){let i=(0,a.mB)(e);return i.utm_pai&&i.utm_source&&i.pid&&"pins"===t?i.pid:null}},712064:function(e,t,i){i.d(t,{Ht:()=>s,Tb:()=>r,q7:()=>l});var a=i(244347),n=i(940280);function l({topPinIds:e,paidPinId:t}){let i=[];return t&&i.push(t),e&&i.push(e),i.length>0?i.join(","):void 0}function r({appliedProductFilters:e,appliedUnifiedFilters:t,autoCorrectionDisabled:i,filters:a,journeyDepth:n,query:l,rs:r,scope:s,selectedOneBarModules:o,selectedPinImgSig:d,sourceId:c,sourceModuleId:u,topPinIds:h,user:p}){let _=[e,a,n,l,r,s,o,d,c,u,t,h,p].map(e=>e??"").join(":");return i?"auto-correction-disabled:"+_:_}function s(e){let{appliedProductFilters:t,appliedUnifiedFilters:i,autoCorrectionDisabled:l,bubbleId:r,domains:s,filters:o,guidedSearchQuery:d,journeyDepth:c,pageSize:u,priceMax:h,priceMin:p,query:_,requestParams:g,rs:m,scope:f,selectedOneBarModules:y,selectedPinImgSig:b,seoDrawerEnabled:v,sourceId:x,sourceModuleId:S,sourceUrl:w,topPinIds:P,user:k}=e;return{name:"BaseSearchResource",options:function({appliedUnifiedFilters:e=null,appliedProductFilters:t=null,autoCorrectionDisabled:i=!1,bubbleId:l=null,domains:r=null,filters:s=null,journeyDepth:o=null,pageSize:d=null,priceMax:c=null,priceMin:u=null,query:h="",requestParams:p=null,rs:_=n.i.DIRECT_NAVIGATION,scope:g="pins",selectedOneBarModules:m=null,selectedPinImgSig:f=null,seoDrawerEnabled:y=!1,sourceId:b=null,sourceModuleId:v=null,sourceUrl:x=null,topPinIds:S=null,user:w}){return{applied_unified_filters:e,appliedProductFilters:t,article:l,auto_correction_disabled:i,corpus:f?"personalize":null,customized_rerank_type:f?"manas_graph_sage_only_wand_rewrite":null,domains:r,filters:s,journey_depth:o,page_size:d,price_max:c,price_min:u,query_pin_sigs:f,query:h,redux_normalize_feed:!0,request_params:p,rs:_,scope:g,selected_one_bar_modules:m,seoDrawerEnabled:y,source_id:b,source_module_id:v,source_url:(0,a.Z)(x),top_pin_ids:S,user:w}}({appliedProductFilters:t,appliedUnifiedFilters:i,autoCorrectionDisabled:!!l,bubbleId:r,domains:s,filters:o,guidedSearchQuery:d,journeyDepth:c,pageSize:u,priceMax:h,priceMin:p,query:_,requestParams:g,rs:m,scope:f,selectedOneBarModules:y,selectedPinImgSig:b,seoDrawerEnabled:v,sourceId:x,sourceModuleId:S,sourceUrl:w,topPinIds:P,user:k})}}},968842:function(e,t,i){i.d(t,{Z:()=>l});var a=i(647709),n=i(183152);function l(){return function({deviceType:e,site:t}){switch(t){case"analytics":return 4;case"business":return 6;case"planninghub-internal":return 12;case"sterling":return 3;case"trends":return 7;case"trends-internal":return 8;case"commerce-app":case"commerce-app-latest":case"pintergration":return 10;case"creators":case"create":return 11;case"newsroom":return 13;case"about":return 14;case"pinnacle-internal":return 17;default:return+("phone"===e||"tablet"===e)}}({deviceType:(0,a.ZP)(),site:(0,n.uo)()})}},277454:function(e,t,i){i.d(t,{Z:()=>n});let a=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,n=e=>a.test(e)},755522:function(e,t,i){i.d(t,{Z:()=>a});function a(e,t){let i=t?.separateNumbers?/([A-Z]|\d)/g:/([A-Z])/g;return e.replace(i,(e,t)=>"_"+t.toLowerCase())}},538688:function(e,t,i){i.d(t,{Z:()=>o});var a=i(667294);let n=null,l=!1,r=0,s=()=>{n&&clearTimeout(n),l=!0,n=setTimeout(()=>{l=!1},100)},o=()=>{let[e,t]=(0,a.useState)(!1),i=(0,a.useRef)(null);(0,a.useEffect)(()=>(0===r&&window.addEventListener("scroll",s),r+=1,()=>{i.current&&clearTimeout(i.current),(r-=1)||window.removeEventListener("scroll",s)}),[]);let n=e=>{i.current&&clearTimeout(i.current),i.current=e&&l?setTimeout(()=>n(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:(0,a.useRef)({onMouseOver:()=>n(!0),onMouseLeave:()=>n(!1)}).current}}},315259:function(e,t,i){i.d(t,{Z:()=>n});let a=/^(?:https?:\/\/)?([^\s\/?#."]+\.)+([^\s\/?#."]+)(\/[^\s?#]*)?(#[^\s]*)?(\?[^"]*)?$/;function n(e,t){return!!e&&a.test(e)&&(e.startsWith("http://")||e.startsWith("https://")||!!t?.protocolIsOptional)}},640924:function(e,t,i){i.d(t,{Bh:()=>_,C9:()=>P,CU:()=>d,ES:()=>k,FU:()=>T,GT:()=>c,Gy:()=>v,J_:()=>C,Jx:()=>f,Ks:()=>F,MZ:()=>x,Pg:()=>y,U2:()=>R,VC:()=>m,VG:()=>u,ZA:()=>h,Zt:()=>b,a3:()=>E,aH:()=>o,fS:()=>p,nw:()=>w,oR:()=>I,qA:()=>g,qp:()=>A,sG:()=>S,vd:()=>B,xk:()=>j});var a=i(587795),n=i(215295),l=i(315259);let r={January:31,February:29,March:31,April:30,May:31,June:30,July:31,August:31,September:30,October:31,November:30,December:31},s=e=>{let t={"":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":" "},i=String(e).split("");return i.forEach((e,a)=>{let n=t[e];n&&(i[a]=n)}),i.join("")};function o(e){return(t,i)=>{let a=[];t&&/\S/.test(t)||a.push(e.message);let n={errors:a,warnings:[]};return i&&i(n),n}}let d=RegExp("(^[-!#$%&'*+/=?^_`{}|~0-9A-Z]+(\\.[-!#$%&'*+/=?^_`{}|~0-9A-Z]+)*|^\"([\\001-\\010\\013\\014\\016-\\037!#-\\[\\]-\\177]|\\\\[\\001-\\011\\013\\014\\016-\\177])*\")@((?:[A-Z0-9](?:[A-Z0-9-]{0,61}[A-Z0-9])?\\.)+[A-Z]{2,20}$)|\\[(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)(\\.(25[0-5]|2[0-4]\\d|[0-1]?\\d?\\d)){3}\\]$","i");function c(e){return(t,i)=>{t=t&&t.trim();let a=[];t.match(d)||a.push(e.message);let n={errors:a,warnings:[]};return i&&i(n),n}}function u(e){return(t,i)=>{t=t&&t.trim();let a=[];t.match(/^[^0-9].*$/)||a.push(e.message);let n={errors:a,warnings:[]};return i&&i(n),n}}function h(e){return(t,i)=>{let a=[];if(t){let i=parseInt(t,10);Number.isNaN(i)?a.push(e.invalidAgeString):(e.ageTooShortString&&i<10&&a.push(e.ageTooShortString),i<=0||i>120?a.push(e.invalidAgeString):e.checkUnderAgeWithString&&i<18&&a.push(e.checkUnderAgeWithString))}let n={errors:a,warnings:[]};return i&&i(n),n}}function p(e){return(t,i)=>{let a=[],[n,l]=t.split(" ");if(n)if(n.match(/^[0-9]+$/)){let t=parseInt(n,10);(Number.isNaN(t)||t>31||t>r[l])&&a.push(e.invaliddobDateString)}else a.push(e.invaliddobDateString);let s={errors:a,warnings:[]};return i&&i(s),s}}function _(e){return(t,i)=>{let a=(t=t&&t.trim()).replace(/[\(\)\+\-\. ]/g,""),n=[],l=!1!==e.checkLength&&a.length<7;t&&(!t.match(/^(\(?\+?[0-9]*\)?)?[0-9_\- \.\(\)]*$/g)||l)&&n.push(e.message);let r={errors:n,warnings:[]};return i&&i(r),r}}function g(e){return(t,i)=>{let a=[];"number"==typeof t||"string"==typeof t&&(t=s(t=t&&t.trim()))&&!t.match(/^\d+$/)&&a.push(e.message);let n={errors:a,warnings:[]};return i&&i(n),n}}function m(e){return(t,i)=>{let a=[];"number"==typeof t||"string"==typeof t&&(t=s(t=t&&t.trim()))&&!t.match(/^[\d\ -]+$/)&&a.push(e.message);let n={errors:a,warnings:[]};return i&&i(n),n}}function f({message:e}){return(t,i)=>{let a=[];t&&!(0,l.Z)(t,{protocolIsOptional:!0})&&a.push(e);let n={errors:a,warnings:[]};return i&&i(n),n}}function y(e){return(t,i)=>{let a={errors:t&&!/^(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(t)?[e.message]:[],warnings:[]};return i&&i(a),a}}function b(e){return(t,i)=>{let a=[];if(t)try{let i=(0,n.Z)(t);i&&i.protocol&&("http"!==i.protocol||"localhost"===i.hostname)||a.push(e.message)}catch(t){a.push(e.message)}let l={errors:a,warnings:[]};return i&&i(l),l}}function v(e){return(t,i)=>{let a=e.should_trim||!1,n=[];a&&(t=t&&t.trim());let l=t.length;"min"in e&&e.min>0&&l<e.min?n.push(e.minErrorString):"max"in e&&e.max>0&&l>e.max&&n.push(e.maxErrorString);let r={errors:n,warnings:[]};return i&&i(r),r}}function x(e){return(t,i)=>{let a=!e.checkExclusion,{substrings:n}=e,l=[];(a&&!n.some(e=>t.includes(e))||!a&&n.some(e=>t.includes(e)))&&l.push(e.message);let r={errors:l,warnings:[]};return i&&i(r),r}}function S(e){return(t,i)=>{let a=e&&e.targetValue,n=[];t!==a&&n.push(e.message);let l={errors:n,warnings:[]};return i&&i(l),l}}function w(e){return(t,i)=>{let a=[];(t?parseFloat(t):0)<e.value&&a.push(e.message);let n={errors:a,warnings:[]};return i&&i(n),n}}function P(e){return(t,i)=>{let a=new Date(t),n=[];e.date instanceof Date&&a instanceof Date&&e.date<a&&n.push(e.message);let l={errors:n,warnings:[]};return i&&i(l),l}}function k(e){return(t,i)=>{let n=new Date(t),l=e.date instanceof Date&&n instanceof Date,r=[];(l&&e.date<n||!(0,a.M5)(t))&&r.push(e.message);let s={errors:r,warnings:[]};return i&&i(s),s}}function I(e){return(t,i)=>{let a=[];/^[\x20-\x7E]*$/.test(t)||a.push(e.message);let n={errors:a,warnings:[]};return i&&i(n),n}}function j(e){return(t,i)=>{let a=2;if(e.hasFractionalCents)a=3;else if(e.currencyCode){let{maximumFractionDigits:t}=new Intl.NumberFormat(void 0,{style:"currency",currency:e.currencyCode}).resolvedOptions();a=t}let n=new RegExp(a?`^\\d*(\\.\\d{1,${a}})?$`:"^\\d*$"),l=[];t&&!t.match(n)&&(t=t&&t.trim(),l.push(e.message));let r={errors:l,warnings:[]};return i&&i(r),r}}function C(e){return(t,i)=>{t=t&&t.trim();let a=[],n=new Date(t);t&&!n.getTime()&&a.push(e.message);let l={errors:a,warnings:[]};return i&&i(l),l}}function A(e){return(t,i)=>{let a=t&&t.trim(),n=[];a&&!a.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)&&n.push(e.message);let l={errors:n,warnings:[]};return i&&i(l),l}}function B(e){return(t,i)=>{let a=[];e.pattern.test(t)||a.push(e.message);let n={errors:a,warnings:[]};return i&&i(n),n}}function T(e,t){return[].concat(...e.map(e=>e(t).errors))}async function F(e,t){return[].concat(...await Promise.all(e.map(async e=>{let i=e(t);return i instanceof Promise?(await i)(t).errors:i.errors})))}function E(e,t){let i="";return t.some(t=>{let a=t(e);return a.errors.length>0&&(i=a.errors[0],!0)}),i}async function R(e,t){let i="";for(let a of t){let t=a(e);if(t instanceof Promise){let a=(await t)(e);if(a.errors.length>0){i=a.errors[0];break}}else if(t.errors.length>0){i=t.errors[0];break}}return i}},742723:function(e,t,i){i.d(t,{Z:()=>c,l:()=>d});var a=i(667294),n=i(10594),l=i(15667),r=i(968842),s=i(821651),o=i(448505);let d=(0,a.createContext)(void 0),c=function(){let{advertiser:e}=(0,l.B)(),t=function(){let{isSterlingSite:e}=(0,n.Z)((0,r.Z)());return(0,a.useContext)(d)??e}(),i=(0,o.Z)(),c=((0,s.W)()?.profiles||[]).find(t=>t?.id===e?.owner_user_id);return t&&c||i}},247366:function(e,t,i){i.r(t),i.d(t,{default:()=>c});var a=i(281098),n=i(667294),l=i(20256),r=i(19585),s=i(749830),o=i(715724),d=i(785893);function c(e){(0,a.Z)("PinRepEditButton","/app/www/AuthDesktopPinRep/components/PinRepEditButton.tsx");let t=(0,r.Z)(),{clientTrackingParams:i,style:c,useLegoStyles:u=!1,usePersistentOneClickSaveStyles:h,wrappingIconStyle:p,shouldUseLegoStyles:_,carouselSlotCurrentIndex:g,component:m,onDelete:f,onSubmit:y,onToggleModal:b,pinId:v,surface:x}=e,[S,w]=(0,n.useState)(!1),{onClick:P,carouselSlotCurrentIndex:k}=(0,o.Z)({carouselSlotCurrentIndexProp:g,component:m,pinId:v,setShowEditModal:w}),I=t._('Pin Saved', 'PinRepEditButton.SavedButtonLabel', 'saved button label on pin'),j=(0,d.jsxs)(n.Fragment,{children:[(0,d.jsx)(l.hU,{accessibilityLabel:t._('Edit', 'edit button on pin', 'edit button on pin'),bgColor:c&&c.bgColor||"white",icon:"edit",iconColor:c&&c.iconColor||"darkGray",onClick:P,size:c&&c.size||"md"}),S&&v&&(0,d.jsx)(s.Z,{carouselSlotCurrentIndex:k,clientTrackingParams:i,onDelete:f,onHide:()=>{w(!1),b?.(!1)},onSubmit:y,pinId:v})]});return _?(0,d.jsx)(l.Fm,{accessibilityLabel:I,color:"primary",dataTestId:"saved-button",onClick:f,selected:!0,size:"VideoCarouselModule"===x?"sm":"lg",text:t._('Saved', 'PinRepEditButton.SavedButton', 'saved button on pin')}):u||h?(0,d.jsx)("div",{"data-test-id":"use-lego-styles-div",style:{...p||{}},children:j}):j}},236957:function(e,t,i){i.d(t,{KA:()=>l,T3:()=>n,Ur:()=>r,i5:()=>a,kx:()=>s});let a={AT:14,BE:13,BG:14,HR:16,CY:14,CZ:15,DK:13,EE:14,FI:13,FR:15,DE:16,GR:15,HU:16,IE:16,IT:14,LV:13,LT:14,LU:16,MT:13,NL:16,PL:16,PT:13,RO:16,SK:16,SI:15,ES:14,SE:13,GB:13},n={...a,KR:14},l=16,r=13,s=5},964577:function(e,t,i){i.d(t,{Z:()=>a});let a={BOARD_PICKER:"board_picker",ORGANIZE_PINS:"organize_pins",PROFILE:"profile",PIN_CLUSTER:"create_pin_cluster_page"}},187440:function(e,t,i){i.d(t,{q:()=>S,Z:()=>w});var a,n=i(281098),l=i(814702);i(244311);var r=i(20256),s=i(521009),o=i(28427),d=i(19585),c=i(15667),u=i(647709),h=i(341742),p=i(532611),_=i(785893);function g({action:e,auxData:t={}}){(0,n.Z)("ButtonLinkAction","/app/www/ContentSensitivity/ButtonLinkAction.tsx");let i=(0,s.Z)(),a=(0,u.HG)(),{button:l}=e,o=l?.text||"",d=l?.link||"";return o&&d?(0,_.jsx)(r.ZP,{href:d,iconEnd:"arrow-up-right",onClick:()=>{(0,p.qA)({logContextEvent:i,auxData:{url:d,...t},isDesktop:a})},target:a?"blank":"self",text:o}):null}let m={0:"phone",1:"speech-ellipsis",2:"speech-outline",3:"globe",4:"whatsapp",5:"search"};function f({button:e,contactType:t,auxData:i={}}){(0,n.Z)("CustomActionLink","/app/www/ContentSensitivity/CustomActionLink.tsx");let a=(0,s.Z)(),l=(0,u.HG)(),o=[0,1].includes(t),d=e?.link||"",c=l&&o?`${e?.text} ${function(e){let[,t]=e.split(":");return t}(d)}`:e?.text,h=m[t]||"arrow-up-right";return c&&d?(0,_.jsx)(r.ZP,{href:d,iconStart:h,onClick:()=>{(0,p.qA)({logContextEvent:a,auxData:{url:d,...i},isDesktop:l})},target:"blank",text:c}):null}var y=i(784635),b=i(603316),v=i(30579);let x=(void 0!==a||(a=i(193157)).hash&&"6e21ec048bb4ac7d621865a42cf02a6c"!==a.hash&&console.error("The definition of 'SensitiveNotice_sensitivity' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function S({query:e,sensitivityKey:t,viewParameter:i}){(0,n.Z)("SensitiveNotice","/app/www/ContentSensitivity/SensitiveNotice.tsx");let a=(0,o.Z)(x,t),l=a?.notices;return l?.map(t=>(0,_.jsx)(w,{notice:t,query:e,sensitivity:a,viewParameter:i,viewType:2},t.noticeId))}function w({boardId:e,boardSectionId:t,notice:i,viewType:a,viewParameter:o,query:m,sensitivity:x,objectType:S}){(0,n.Z)("SensitiveNotice","/app/www/ContentSensitivity/SensitiveNotice.tsx");let w=(0,u.HG)(),P=(0,d.Z)(),k=(0,s.Z)(),{title:I,footer:j,description:C,image_type:A,content_image_url:B}=i||{},T=i?.actions??[],F=i?.suggested_resource,E=(0,c.B)(),{imageSRC:R,imageALT:z}=function(e,t){let i={[v.b.HIDDEN]:P._('Hidden Illustration.', 'sensitiveNotice.hiddenIllustration', 'Sensitive illustration for hidden content'),[v.b.HOPE]:P._('An illustration of a landscape, clouds, and the sun seen through a window with both shutters open.', 'sensitiveNotice.hopeIllustration', 'Sensitive illustration for hope content'),[v.b.LOVE]:P._('An illustration of heart-shaped flowers arranged in a vase', 'sensitiveNotice.loveIllustration', 'Sensitive illustration for love content')};return e===v.b.CUSTOM?{imageSRC:t,imageALT:P._('Illustration.', 'sensitiveNotice.customIllustration', 'Sensitive illustration for custom content')}:e===v.b.NONE?{imageSRC:"",imageALT:""}:{imageSRC:p.HY[e],imageALT:i[e]}}(A||v.b.NONE,B||""),L={advisory_level:x?.advisory,entered_query:m,severity_level:x?.severity,stage:E.stage,advisory_type:x?.advisory_type,resource_country:x?.resource_country};return(0,h.Z)(()=>{a&&(k({aux_data:L,event_type:120,component:13367,view_parameter:o,view_type:a}),(0,b.QX)("webapp.searchAdvisories.view",1,{sampleRate:1,tags:{advisory_level:L.advisory_level,advisory_type:L.advisory_type,app:w?"DESKTOP_WEB":"MOBILE_WEB",resource_country:L.resource_country,placement:a,object_type:S}})),e&&5===a&&k({aux_data:{board_id:e,board_section_id:t??0},component:178,event_type:15549,view_parameter:o,view_type:a})}),(0,_.jsx)(r.xu,{"data-test-id":"search-advisory",children:(0,_.jsxs)(r.xu,{"data-test-id":"fresh-search-advisory",margin:"auto",maxWidth:"800px",padding:6,rounding:2,children:[R&&(0,_.jsx)(r.kC,{justifyContent:w?"center":"start",children:(0,_.jsx)(r.xu,{height:120,marginBottom:4,width:120,children:(0,_.jsx)(r.Ee,{alt:z,fit:"contain",naturalHeight:1,naturalWidth:1,src:R})})}),!!I&&(0,_.jsx)(r.xu,{display:"flex",marginBottom:2,children:(0,_.jsx)(r.X6,{size:"400",children:I})}),!!C&&(0,_.jsx)(r.xu,{marginBottom:4,children:(0,_.jsx)(r.xv,{size:"200",children:(0,y.Z)(C?.text||"",C?.text_tags||[],k,L,w)})}),F&&(0,_.jsxs)(r.xu,{marginBottom:4,children:[(0,_.jsx)(r.xv,{size:"200",weight:"bold",children:P._('Suggested resource', 'sensitiveNotice.suggestedResource', 'This string is a subtitle. It appears in an alert message to users who may benefit from receiving mental health and crisis resources. Underneath the subtitle, we\u2019ll show a single resource that seems the most helpful for  the user. We use \u201Csuggested\u201D rather than \u201Crecommended\u201D to soften the framing, as this resource isn\u2019t personalized or an endorsement from Pinterest. The tone of this string is helpful, but not strongly encouraging')}),(0,_.jsx)(r.xu,{marginTop:2,children:(0,_.jsx)(r.xv,{size:"200",children:F})})]}),(0,_.jsx)(r.kC,{direction:"column",gap:2,children:T.map(e=>e?.button?.contact_type?(0,_.jsx)(f,{auxData:L,button:e.button,contactType:e.button.contact_type},e.id||e.actionId):(0,_.jsx)(g,{action:e,auxData:L},e.id))}),!!j&&(0,_.jsx)(r.xu,{marginTop:4,children:(0,_.jsx)(r.xv,{color:"subtle",size:"100",children:(0,_.jsx)(l.Z,{options:{overrides:{b:{component:({children:e})=>(0,_.jsx)(r.rU,{display:"inline",href:j.link??"",onClick:()=>{(0,p.qA)({logContextEvent:k,auxData:{...L,url:j.link},isDesktop:w,placement:a,objectType:S,viewType:a,viewParameter:o})},target:"blank",children:(0,_.jsx)(r.xv,{color:"subtle",inline:!0,size:"100",weight:"bold",children:e})},j.link)}}},children:j.text})})})]})})}},532611:function(e,t,i){i.d(t,{Fx:()=>s,HY:()=>r,IR:()=>l,Uz:()=>o,qA:()=>d});var a=i(603316),n=i(30579);let l={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2},r={[n.b.HIDDEN]:"https://i.pinimg.com/originals/0d/fc/e7/0dfce74a82e89659495f1c9257fed188.png",[n.b.HOPE]:"https://i.pinimg.com/originals/46/d7/70/46d7705570b3c23562a70f39817b7b19.png",[n.b.LOVE]:"https://i.pinimg.com/originals/60/7e/d2/607ed2380d9fa28047f211dc6a7e8576.png"};function s(e){return null!=e&&!!e.notices&&e.notices.length>0}function o(e){return!!e&&e.severity===l.ABUSIVE}function d({auxData:e,isDesktop:t,logContextEvent:i,objectType:n,placement:l,viewType:r,viewParameter:s}){i({aux_data:e,component:13367,element:11180,event_type:t?101:102,view_parameter:s||43,view_type:r||2}),(0,a.QX)("webapp.searchAdvisories.action",1,{sampleRate:1,tags:{advisory_level:e.advisory_level,advisory_type:e.advisory_type,app:t?"DESKTOP_WEB":"MOBILE_WEB",url:e.url,resource_country:e.resource_country,object_type:n,placement:l}})}},784635:function(e,t,i){i.d(t,{Z:()=>s});var a=i(281098),n=i(20256),l=i(532611),r=i(785893);function s(e,t,i,o={},d){(0,a.Z)("hyperlinkFormatText","/app/www/ContentSensitivity/hyperlinkFormatText.tsx");let c=[],u=0;for(let a=0;a<t.length;a+=1){let s=t[a];if(5===s.tag_type&&s.link){let{offset:t,length:h,link:p}=s;if(null!=t&&null!=h&&null!=p){let s=e.substring(t,t+h),_=(0,r.jsx)(n.rU,{display:"inline",href:p,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),(0,l.qA)({auxData:{...o,url:p},isDesktop:d,logContextEvent:i})},target:"blank",underline:"hover",children:(0,r.jsx)(n.xv,{inline:!0,weight:"bold",children:s})},`link-${a}-${s}`);c.push((0,r.jsx)(n.xv,{inline:!0,children:e.substring(u,t)},`text-${a}-${s}`)),c.push(_),u=t+h}}}return(u>0&&c.push((0,r.jsx)(n.xv,{inline:!0,children:e.substring(u)},e.substring(u))),0===c.length)?[(0,r.jsx)("span",{children:e},e)]:c}},822377:function(e,t,i){i.d(t,{Z:()=>z});var a,n,l,r,s=i(281098),o=i(667294),d=i(980787),c=i(274320),u=i(15667),h=i(647709),p=i(341742),_=i(187440);i(167912);var g=i(20256),m=i(28427),f=i(521009),y=i(47426),b=i(532611),v=i(306274),x=i(785893);let S=(void 0!==a||(a=i(731127)).hash&&"6ddea2ecd3dff2e1001c1e4d037cc858"!==a.hash&&console.error("The definition of 'CallToAction_advisoryAction' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function w({auxData:e,actionKey:t,alignCenter:i}){(0,s.Z)("CallToAction","/app/www/ContentSensitivityOnDesktop/CallToAction.tsx");let a=(0,m.Z)(S,t),n=(0,f.Z)(),l=(0,h.HG)(),{title:r,description:d,button:c}=a,u=c?.text,p=r?.text,_=d?.text,w=c?.link??"",P=w.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""),k=u&&w.startsWith("http"),I=(0,y.Z)({url:w}),j=k&&I?"nofollow":"none";return e?.advisory_type===v.Uv?(0,x.jsx)(o.Fragment,{children:(0,x.jsxs)(g.kC,{direction:"column",gap:3,justifyContent:"start",children:[!!p&&(0,x.jsx)(g.xv,{align:"start",weight:"bold",children:p}),!!_&&(0,x.jsx)(g.xv,{align:"start",children:_}),(0,x.jsx)(g.ZP,{color:"white",href:w,onClick:()=>{(0,b.qA)({auxData:{...e,url:w},isDesktop:l,logContextEvent:n})},rel:j,text:u||"Visit"})]})}):k?(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)(g.xu,{marginBottom:1,children:(0,x.jsx)(g.xv,{align:i?"center":"start",weight:"bold",children:""!==u?u:"Visit"})}),(0,x.jsx)(g.xu,{marginBottom:1,children:(0,x.jsx)(g.rU,{href:w,onClick:()=>{(0,b.qA)({logContextEvent:n,auxData:{...e,url:w},isDesktop:l})},rel:j,children:(0,x.jsx)(g.xv,{align:i?"center":"start",lineClamp:1,underline:!0,weight:"normal",children:P})})})]}):(0,x.jsxs)(o.Fragment,{children:[!!p&&(0,x.jsx)(g.xu,{marginBottom:1,children:(0,x.jsx)(g.xv,{align:i?"center":"start",weight:"bold",children:p})}),!!_&&(0,x.jsx)(g.xu,{marginBottom:1,children:(0,x.jsx)(g.xv,{align:i?"center":"start",children:_})})]})}let P=(void 0!==n||(n=i(811026)).hash&&"4970946a36017d9ad0c751fd70cc512c"!==n.hash&&console.error("The definition of 'HyperlinkFormatText_textTag' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function k({text:e,textTags:t,auxData:i}){let a=(0,f.Z)(),n=(0,h.HG)(),l=[],r=0;for(let s=0;s<t.length;s+=1){let o=t[s];if(5===o.tagType&&o.link){let{offset:t,length:s,link:d}=o;if(null!=t&&null!=s&&null!=d){let o=e.substring(t,t+s),c=(0,x.jsx)(g.xv,{inline:!0,weight:"bold",children:(0,x.jsx)(g.rU,{display:"inlineBlock",href:d,onClick:()=>{(0,b.qA)({logContextEvent:a,auxData:{...i,url:d},isDesktop:n})},target:"blank",underline:"hover",children:o},o)});l.push((0,x.jsx)("span",{children:e.substring(r,t)})),l.push(c),r=t+s}}}return(r>0&&l.push((0,x.jsx)("span",{children:e.substring(r)})),0===l.length)?[(0,x.jsx)("span",{children:e})]:l}function I({auxData:e,textTagKey:t,text:i}){(0,s.Z)("HyperlinkFormatText","/app/www/ContentSensitivityOnDesktop/HyperlinkFormatText.tsx");let a=(0,m.Z)(P,t);return(0,x.jsx)(k,{auxData:e,text:i,textTags:a})}let j=[4,14],C={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},A={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},B=(void 0!==l||(l=i(437533)).hash&&"5879c4710b107f258f42156bf3e47e37"!==l.hash&&console.error("The definition of 'DefaultNotice_advisoryNotice' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function T({auxData:e,advisory:t,inModal:i,noticeKey:a}){(0,s.Z)("DefaultNotice","/app/www/ContentSensitivityOnDesktop/DefaultNotice.tsx");let{title:n,description:l,actions:r}=(0,m.Z)(B,a),o=!!r?.length&&(e?.advisory_type===v.Uv||!!t&&j.includes(t)),d=r?.length===1,c=l&&l.text||"";return(0,x.jsxs)(g.xu,{dangerouslySetInlineStyle:{__style:i?A:C},padding:6,rounding:2,children:[!!n&&!i&&(0,x.jsx)(g.xu,{display:"flex",marginBottom:2,children:(0,x.jsx)(g.X6,{size:"600",children:n})}),!!c&&l?.textTags!=null&&(0,x.jsx)(g.xu,{"data-test-id":"search-advisory",marginBottom:4,children:(0,x.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:(0,x.jsx)(g.xv,{align:i?"center":"start",overflow:"normal",children:(0,x.jsx)(I,{auxData:e,text:c,textTagKey:l.textTags})})})}),o&&(0,x.jsx)(g.xu,{direction:i?"column":"row",display:"flex",marginEnd:-2,marginStart:-2,wrap:!0,children:r?.map(t=>(0,x.jsx)(g.xu,{column:i||d?12:6,paddingX:2,paddingY:1,children:(0,x.jsx)(w,{actionKey:t,alignCenter:i||d,auxData:e})},t.actionId))})]})}let F=(void 0!==r||(r=i(827222)).hash&&"53d7eec34666980eda011429185b5b10"!==r.hash&&console.error("The definition of 'LegoNotice_advisoryNotice' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function E({auxData:e,noticeKey:t}){(0,s.Z)("LegoNotice","/app/www/ContentSensitivityOnDesktop/LegoNotice.tsx");let i=(0,m.Z)(F,t),a=(0,f.Z)(),n=(0,h.HG)(),l={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return(0,x.jsxs)(g.xu,{alignItems:"center",direction:"column",display:"flex",marginBottom:3,width:"100%",children:[(0,x.jsx)(g.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",rounding:8,width:656,children:(0,x.jsxs)(g.xu,{"data-test-id":"search-advisory",height:"100%",padding:10,width:"100%",children:[(0,x.jsx)("span",{style:l,children:i.description?.textTags&&(0,x.jsx)(I,{text:i.description?.text||"",textTagKey:i.description.textTags})}),(0,x.jsx)(g.xu,{marginTop:6,children:(i.actions??[]).map(t=>{let i=t.button?.link;return i&&i.startsWith("tel")?(0,x.jsxs)(g.xu,{children:[(0,x.jsx)("span",{style:{fontWeight:"600",...l},children:t.title?.text}),(0,x.jsx)("span",{style:l,children:t.description?.text})]}):(0,x.jsx)(g.rU,{href:i||"",onClick:()=>{(0,b.qA)({logContextEvent:a,auxData:{...e,url:i||"",isLegoNotice:!0},isDesktop:n})},children:(0,x.jsx)(g.xu,{display:"inlineBlock",children:(0,x.jsx)(g.xu,{alignItems:"center",color:"infoBase",display:"flex",height:44,justifyContent:"center",paddingX:12,rounding:"pill",children:(0,x.jsx)(g.xv,{color:"inverse",weight:"bold",children:t.button?.text||""})})})})})})]})}),!!i.footer&&(0,x.jsx)(g.xu,{paddingY:2,width:540,children:(0,x.jsx)(g.rU,{display:"inlineBlock",href:i.footer.link??"",onClick:()=>{(0,b.qA)({logContextEvent:a,auxData:{...e,url:i.footer?.link??"",isLegoNotice:!0},isDesktop:n})},target:"blank",underline:"hover",children:(0,x.jsx)(g.xv,{align:"center",color:"subtle",size:"100",children:(0,x.jsx)("div",{dangerouslySetInnerHTML:{__html:i.footer.text??""}})})},i.footer.link)})]})}var R=i(603316);function z({boardId:e,boardSectionId:t,notices:i,query:a,sensitivity:n,viewParameter:l,viewType:r,inModal:g}){(0,s.Z)("SensitiveContentNotice","/app/www/ContentSensitivityOnDesktop/SensitiveContentNotice.tsx"),function({advisoryDetails:e,boardId:t,boardSectionId:i,query:a,sensitivity:n,viewParameter:l,viewType:r}){let{logContextEvent:s}=(0,d.u)(),o=(0,h.HG)();(0,p.Z)(()=>{r&&(s({aux_data:{entered_query:a,advisory_details:e,advisory_level:n?.advisory,severity_level:n?.severity,advisory_type:n?.advisory_type,resource_country:n?.resource_country},component:13367,event_type:120,view_parameter:l,view_type:r}),(0,R.QX)("webapp.searchAdvisories.view",1,{sampleRate:1,tags:{advisory_level:n?.advisory,advisory_type:n?.advisory_type,app:o?"DESKTOP_WEB":"MOBILE_WEB",resource_country:n?.resource_country,placement:5===r?"board":"search"}})),t&&5===r&&s({aux_data:{board_id:t,board_section_id:i??0},component:178,event_type:15549,view_parameter:l,view_type:r})})}({advisoryDetails:n?.advisory_details,boardId:e,boardSectionId:t,query:a,sensitivity:{advisory:n?.advisory,severity:n?.severity},viewParameter:l,viewType:r});let{checkExperiment:m}=(0,c.r)(),f=(0,u.B)(),y={advisory_level:n?.advisory||null,severity_level:n?.severity||null,advisory_type:n?.advisory_type||"",stage:f.stage,resource_country:n?.resource_country||"",entered_query:a||""};return m("ps_board_advisories_ui_refresh").anyEnabled?(0,x.jsx)(o.Fragment,{children:i?.map(e=>(0,x.jsx)(_.Z,{notice:e,objectType:t?164:5,sensitivity:n,viewParameter:l,viewType:t?164:5},e.id))}):(0,x.jsx)(o.Fragment,{children:i?.map(e=>2===e.style?(0,x.jsx)(E,{auxData:y,noticeKey:{type:"Legacy",data:e}},e.id):(0,x.jsx)(T,{advisory:n?.advisory,inModal:g,noticeKey:{type:"Legacy",data:e}},e.id))})}},306274:function(e,t,i){i.d(t,{IR:()=>n,St:()=>a,Uv:()=>r,Uz:()=>l});let a={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},n={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function l(e){return!!e&&e.severity===n.ABUSIVE}let r="THIRD_PARTY_TL"},211119:function(e,t,i){i.d(t,{CU:()=>u,ZP:()=>c,hi:()=>d});var a,n=i(422578),l=i(478135),r=i(288910),s=i(77155);let o=(void 0!==a||(a=i(725369)).hash&&"547e5abdb645851996d6a1b1a4027c56"!==a.hash&&console.error("The definition of 'hasSensitivityNotices_sensitivity' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function d(e){let{notices:t,advisory:i,severity:a}=(0,n.useFragment)(o,e)||{};return{hasNotices:!!(t?.[0]&&null!==t[0].title),advisory:i,severity:a}}function c(e){if(null==e)return{hasNotices:!1};let{advisory:t,severity:i}=e,a=!!e.notices&&e.notices.length>0;return e.notices&&e.notices.length>0&&e.notices[0]?.title===null&&(a=!1),{hasNotices:a,advisory:t,severity:i}}function u(e){let{scope:t}=(0,r.n)(),{data:i,isLoaded:a}=(0,s.Z)(),n=d(e);if(t===l.lw.USERS)return n;if(!a||!i)return{hasNotices:!1};let{sensitivity:o}=i;return c(o)}},810814:function(e,t,i){i.d(t,{Z:()=>c}),i(281098);var a=i(667294),n=i(20256),l=i(19585),r=i(765533),s=i(785893);function o(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends a.Component{constructor(...e){super(...e),o(this,"setInputRef",e=>{e&&(this._input=e)}),o(this,"handleKeyDown",e=>{let{event:t}=e,{disabled:i,indexManager:a}=this.props;if(!i)switch(t.which){case r.Z.ENTER:case r.Z.NUMPAD_ENTER:t.preventDefault(),a.select();break;case r.Z.UP:t.preventDefault(),a.prev();break;case r.Z.DOWN:t.preventDefault(),a.next()}})}componentDidMount(){this._input&&this._input.focus()}render(){let{onChange:e,value:t}=this.props;return(0,s.jsx)(n.xu,{"data-test-id":"picker-search-field-container",role:"presentation",width:"100%",children:(0,s.jsx)(n.Um,{ref:this.setInputRef,accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:"lg",value:t})})}}let c=function(e){let t=(0,l.Z)();return(0,s.jsx)(d,{...e,i18n:t})}},562247:function(e,t,i){i.d(t,{Z:()=>m});var a=i(281098),n=i(667294),l=i(20256),r=i(19585),s=i(799608),o=i(928053),d=i(810814),c=i(341570),u=i(313760),h=i(508696),p=i(785893);function _(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.Component{constructor(...e){super(...e),_(this,"state",{searchQuery:""}),_(this,"handleSelectItem",e=>{let{onCreate:t,onSelected:i}=this.props;if(!e&&t){let{searchQuery:e}=this.state;t(e)}else e&&i(e);(t||e)&&this.setState({searchQuery:""})}),_(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),_(this,"renderSectionHeader",e=>e.title?(0,p.jsx)(l.xu,{children:(0,p.jsx)(l.xu,{paddingX:3,paddingY:1,children:(0,p.jsx)(l.xv,{size:"200",children:e.title})})}):null),_(this,"renderRow",({item:e,hovered:t,sectionProps:i={}})=>{let{boardSavedTo:a,isSelectMode:n,disabledRowId:l}=this.props,{searchQuery:r}=this.state,{inSectionSelection:s=!1}=i,o=a&&a.board===e.id?a&&a.state:null,d="board_section"===e.type;return(0,p.jsx)(c.Z,{disabled:e.id===l&&s,isSection:d,isSelectMode:n,isWithinSectionPicker:s,item:e,saveState:o,searchQuery:r,selected:t})})}render(){let{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:i,getSections:a,isLoaded:n,onCreate:r,pinId:c}=this.props;if(!n)return(0,p.jsx)(l.xu,{paddingY:5,children:(0,p.jsx)(l.xH,{accessibilityLabel:this.props.i18n._('loading section picker', 'accessibility label for the loading spinner the repin picker', 'accessibility label for the loading spinner the repin picker'),show:!0})});{let{searchQuery:n}=this.state,_=a(n);return this.indexManager=new s.Z(_.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),(0,p.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{zIndex:0}},direction:"column",display:"flex",flex:"grow",height:"100%",minHeight:0,overflow:"auto",children:[!i&&(0,p.jsx)(l.xu,{children:(0,p.jsx)(l.xu,{marginBottom:4,marginTop:1,paddingX:3,children:(0,p.jsx)(d.Z,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:n})})}),(0,p.jsx)(o.Z,{disabled:!!e,grow:!i&&!n,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:_}),r&&(0,p.jsx)(l.xu,{borderStyle:_.length>1?"shadow":"none",children:(0,p.jsx)(h.Z,{buttonLabel:t,hasHoverState:!0,name:n,onClick:()=>r(n)})}),i&&r&&c&&(0,p.jsx)(u.Z,{onBoardSelected:r,pinId:c})]})}}}function m(e){(0,a.Z)("RepinPicker","/app/www/RepinPicker/RepinPicker.tsx");let t=(0,r.Z)();return(0,p.jsx)(g,{...e,i18n:t})}},443962:function(e,t,i){i.d(t,{j:()=>l});let a={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"c",:"e",:"e",:"e",:"e",:"i",:"i",:"i",:"i",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"s",:"u",:"u",:"u",:"u"},n=e=>{if(!e)return"";let t="";for(let i=0;i<e.length;i+=1)t+=a[e.charAt(i)]||e.charAt(i);return t},l=(e,t,i="name")=>{let a=t.toLowerCase();return e.filter(e=>((e,t)=>{let i=t.split(" "),a=e.split(" "),l=0;for(let e=0;e<a.length;e+=1)(n(a[e]).includes(i[l])||a[e].includes(i[l]))&&(l+=1);return l===i.length})(e[i].toLowerCase(),a))}},111879:function(e,t,i){i.d(t,{Z:()=>r});var a=i(667294),n=i(159527);function l(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r extends a.PureComponent{constructor(...e){super(...e),l(this,"setContainerRef",e=>{this.containerRef=e}),l(this,"fetchMoreIfNecessary",(0,n.Z)(()=>{let{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:i},a)=>e+t+(a?a(t):2*t)>i)(this.containerRef,t)&&e()},200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){let{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},647942:function(e,t,i){i.d(t,{Z:()=>a});let a=4},215710:function(e,t,i){i.d(t,{DR:()=>Y,MD:()=>V,sR:()=>Q,uC:()=>X,xH:()=>ee});var a=i(281098),n=i(667294),l=i(581722),r=i(172045),s=i(20256),o=i(980787),d=i(686319),c=i(821342),u=i(19585),h=i(369416),p=i(302148),_=i(675973),g=i(15667),m=i(72918),f=i(886981),y=i(684148),b=i(742723),v=i(7872),x=i(964577),S=i(790427),w=i(341742),P=i(785893);function k({children:e,headingLevel:t,textWeight:i="normal",size:n}){return(0,a.Z)("BoardHeader","/app/www/common/PinBetterSave/BoardHeader.tsx"),(0,P.jsx)(s.X6,{accessibilityLevel:t,size:n,children:(0,P.jsx)(s.xv,{inline:!0,size:n,weight:i,children:e})})}function I({boardPickerSuggestedBoards:e,clientTrackingParams:t,imageSignature:i,index:n,item:l,pinId:r,saveSessionId:d,surfaceOriginViewParameter:c,useLegoLayout:u}){(0,a.Z)("BoardHeader","/app/www/common/PinBetterSave/BoardHeader.tsx");let{logContextEvent:h}=(0,o.u)();return(0,w.Z)(()=>{"shortlist"===l.category&&h({aux_data:{board_picker_surface_origin:c,board_picker_suggested_boards:e,image_signature:i,pin_id:r,save_session_id:d},event_type:13,clientTrackingParams:t,view_type:21,view_parameter:3988})}),(0,P.jsx)(s.xu,{marginTop:n>0?2:1,paddingX:u?4:3,paddingY:1,children:(0,P.jsx)(k,{headingLevel:3,size:u?"100":"200",children:l.title})})}var j=i(918920),C=i(247354);let A=e=>{let{accessibilityLabelText:t,board:i,boardPickerSuggestedBoards:a,buttonText:l,clientTrackingParams:r,displayAlreadySavedMsg:o,i18n:d,imageSignature:c,isSectionOpen:u,logContextEvent:h,onButtonClick:p,onClick:_,pinId:g,saveSessionId:m,shouldOpenSections:f=!0,showSaveToProfile:y,showFlyoutSaveButton:b=!0,surfaceOriginViewParameter:v,useLegoLayout:x}=e,[S,w]=(0,n.useState)(!1),k=(0,n.useRef)(null),I=!!i.section_count&&i.section_count>0,{images:A,image_cover_url:B}=i||{},T=!B?.includes("custom")&&A&&A["75x75"]&&A["75x75"][A["75x75"].length-1].url||B;(0,n.useEffect)(()=>{"boardless"===i.type&&h({aux_data:{board_picker_surface_origin:v,board_picker_suggested_boards:a,image_signature:c,pin_id:g,save_session_id:m},clientTrackingParams:r,event_type:13,view_parameter:3990,view_type:21})},[]);let F=()=>{_(i)};return(0,P.jsx)(s.xu,{"data-test-id":I?"boardWithSection":"boardWithoutSection",children:(0,P.jsx)(s.iP,{ref:k,onBlur:()=>{w(!1)},onFocus:()=>{w(!0)},onMouseEnter:()=>{w(!0)},onMouseLeave:()=>{w(!1)},onTap:F,children:(0,P.jsxs)(s.xu,{alignItems:"center",color:S?"secondary":"default","data-test-id":`board-row-${i.name||""}`,display:"flex",height:x?64:52,marginBottom:+!x,marginEnd:x?2:3,marginStart:x?2:3,marginTop:+!x,padding:2*!!x,rounding:3,children:[(0,P.jsxs)(s.xu,{"aria-hidden":"true",flex:"none",height:x?48:36,marginBottom:+!x,marginEnd:x?2:3,marginStart:2*!x,marginTop:+!x,overflow:"hidden",width:x?48:36,children:[y&&"boardless"===i.type&&(0,P.jsx)(s.zd,{height:"100%",rounding:2,width:"100%",children:(0,P.jsx)(s.xu,{alignItems:"center",color:S?"default":"secondary",display:"flex",height:"100%",justifyContent:"center",width:"100%",children:(0,P.jsx)(s.xu,{children:(0,P.jsx)(s.JO,{accessibilityLabel:d._('Save to profile icon', 'BoardRow.TapArea.Icon', 'Icon to indicate saving to profile.'),color:"default",icon:"history",size:24})})})}),T&&!f&&(0,P.jsx)(s.zd,{height:x?48:36,rounding:2,wash:!0,width:x?48:36,children:(0,P.jsx)(s.Ee,{alt:"",fit:"cover",naturalHeight:x?48:36,naturalWidth:x?48:36,src:T})}),T&&f?(0,P.jsx)(s.zd,{height:x?48:36,rounding:2,wash:!0,width:x?48:36,children:(0,P.jsx)(s.Ee,{alt:"",fit:"cover",naturalHeight:x?48:36,naturalWidth:x?48:36,src:T})}):(0,P.jsx)(s.zd,{height:x?48:36,rounding:2,width:x?48:36,children:(0,P.jsx)(s.xu,{color:f?"secondary":"transparent",height:"100%",width:"100%"})})]}),(0,P.jsxs)(s.xu,{flex:"grow",marginStart:+!x,overflow:"hidden",paddingY:1,children:[(0,P.jsx)(s.xv,{lineClamp:1,overflow:"breakAll",weight:f||!f?"bold":"normal",children:i.name}),o&&(0,P.jsx)(s.xu,{marginTop:1,children:(0,P.jsx)(s.xv,{align:"start",color:"default",size:"100",children:d._('Saved here already', 'BoardFlyout.AlreadySaved.Message', 'Text that indicates if a pin has been already saved to a board')})})]}),(0,P.jsxs)(s.kC,{alignItems:"center",gap:2,children:[(0===i.section_count||!f)&&b&&(0,P.jsx)(s.xu,{"data-test-id":"board-row-save-button-container",flex:"none",opacity:+!!S,children:(0,P.jsx)(s.zx,{accessibilityLabel:t||d._('save', 'boardRow.saveButton', 'Default accessibility label for the board row save button'),color:"red","data-test-id":"board-row-save-button",onClick:({event:e})=>{F(),p&&p(),e.stopPropagation()},tabIndex:-1,text:l||d._('Save', 'save button', 'save button')})}),i&&!u?(0,P.jsx)(s.xu,{marginEnd:2*!x,children:(0,P.jsx)(C.Z,{board:i,showCollaborativeIcon:!!i.is_collaborative,showPrivateIcon:i.privacy===j.ZP.BoardPrivacy.SECRET,showProtectedIcon:i.privacy===j.ZP.BoardPrivacy.PROTECTED,showSectionsIcon:I&&f,useLegoLayout:x})}):null]})]})})})},B=e=>{(0,a.Z)("BoardRow","/app/www/common/PinBetterSave/BoardRow.tsx");let{logContextEvent:t}=(0,o.u)(),i=(0,u.Z)();return(0,P.jsx)(A,{...e,i18n:i,logContextEvent:t})};var T=i(448505),F=i(288489);function E(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class R extends n.Component{constructor(...e){super(...e),E(this,"state",{hovered:!1}),E(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),E(this,"handleMouseLeave",()=>{this.setState({hovered:!1})}),E(this,"handleTouch",()=>{let{board:e,onClick:t,section:i}=this.props;t(i,e)}),E(this,"handleButtonClick",({event:e})=>{let{onButtonClick:t}=this.props;this.handleTouch(),t&&t(),e.stopPropagation()}),E(this,"tapAreaRef",(0,n.createRef)())}focus(){let e=this.tapAreaRef.current;e&&e.focus()}render(){let{hovered:e}=this.state,{buttonText:t,section:i,showSectionSaveButton:a,useLegoLayout:n}=this.props;return(0,P.jsx)(s.iP,{ref:this.tapAreaRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTap:this.handleTouch,children:(0,P.jsxs)(s.xu,{alignItems:"center",color:e?"secondary":"default",dangerouslySetInlineStyle:{__style:n?{}:{marginLeft:53,marginRight:11}},"data-test-id":`section-row-${i.title||""}`,display:"flex",height:n?64:52,marginEnd:2*!!n,marginStart:2*!!n,marginTop:+!n,padding:2*!!n,rounding:3,children:[n&&!!i.preview_pins?.length&&(0,P.jsx)(F.Z,{image_url:i.preview_pins[0].image_square_url??"",naturalHeight:i.preview_pins[0].image_square_size_pixels?.height??1,naturalWidth:i.preview_pins[0].image_square_size_pixels?.width??1}),(0,P.jsx)(s.xu,{flex:"grow",marginStart:4*!n,paddingY:1,children:(0,P.jsx)(s.xv,{lineClamp:1,weight:n?"bold":"normal",children:i.title})}),e&&a&&(0,P.jsx)(s.xu,{flex:"none",marginEnd:2*!n,children:(0,P.jsx)(s.zx,{accessibilityLabel:"save button",color:"red",onClick:this.handleButtonClick,text:t||this.props.i18n._('Save', 'save button', 'save button')})})]})})}}function z(e){(0,a.Z)("SectionRow","/app/www/common/PinBetterSave/SectionRow.tsx");let t=(0,u.Z)();return(0,P.jsx)(R,{...e,i18n:t})}function L(e){(0,a.Z)("BoardSections","/app/www/common/PinBetterSave/BoardSections.tsx");let t=(0,u.Z)(),{board:i,buttonText:n,onClick:l,onButtonClick:r,showSectionSaveButton:o,useLegoLayout:d}=e,h=(0,T.Z)(),p=(0,c.Z)(),_=(0,v.lJ)(p,h),g=(0,f.Z)({name:"BoardSectionsRepinResource",options:{board_id:i.id,orbac_subject_id:_},noCache:!0}),m=g&&g.data||[];return(0,P.jsxs)(s.xu,{children:[!g.isLoaded&&(0,P.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,P.jsx)(s.xH,{accessibilityLabel:t._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),g.isLoaded&&(0,P.jsxs)(s.xu,{children:[d&&(0,P.jsx)(s.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(k,{headingLevel:3,size:"100",children:t._('Section', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),m.map(e=>(0,P.jsx)(z,{board:i,buttonText:n,onButtonClick:r,onClick:l,section:e,showSectionSaveButton:o,useLegoLayout:d},e.id))]})]})}function Z({onClick:e,title:t,showIcon:i}){(0,a.Z)("BoardSuggestionRow","/app/www/common/PinBetterSave/BoardSuggestionRow.tsx");let l=(0,u.Z)(),[r,o]=(0,n.useState)(!1);return(0,P.jsx)(s.iP,{dataTestId:"board-suggestion-row-button",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onTap:()=>{e({title:t})},children:(0,P.jsxs)(s.xu,{alignItems:"center",color:r?"secondary":"default",display:"flex",height:i?64:52,marginBottom:1,marginEnd:3,marginStart:3,rounding:3,children:[(0,P.jsx)(s.xu,{flex:"none",height:i?48:36,marginBottom:1,marginEnd:3,marginStart:i?1:2,marginTop:1,overflow:"hidden",rounding:i?2:1,width:i?48:36,children:(0,P.jsx)(s.xu,{alignItems:i?"center":void 0,color:"secondary",display:i?"flex":void 0,height:"100%",justifyContent:i?"center":void 0,width:"100%",children:i&&(0,P.jsx)(s.JO,{accessibilityLabel:l._('Create board icon', 'BoardSuggestionRow.AccessibilityLabel.Text', 'accessibility label text form add icon'),color:"default",icon:"add",size:20})})}),(0,P.jsx)(s.xu,{flex:"grow",paddingY:1,children:(0,P.jsx)(s.xv,{lineClamp:1,weight:"bold",children:t})}),r&&(0,P.jsx)(s.xu,{marginEnd:2,children:(0,P.jsx)(s.zx,{accessibilityLabel:"create button",color:"red",text:l._('Create', 'create button to create a new board', 'create button to create a new board')})})]})})}function D(e){(0,a.Z)("BoardSuggestions","/app/www/common/PinBetterSave/BoardSuggestions.tsx");let t=(0,u.Z)(),{suggestionsResource:i,onClick:l,pinBuilderSuggestions:r,inWebRepinFlowExp:o}=e,d=r||i&&i.data||[],c=(0,P.jsxs)(n.Fragment,{children:[o&&(0,P.jsx)(s.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(k,{headingLevel:3,size:"100",children:t._('Suggestions', 'PinBetterSave.BoardFlyout.SectionPlaceholderText', 'section list title')})}),d.map((e,t)=>(0,P.jsx)(Z,{onClick:l,showIcon:o,title:e.title},t))]});return(0,P.jsx)(n.Fragment,{children:d?c:(0,P.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:"100%",children:(0,P.jsx)(s.xH,{accessibilityLabel:t._('loading board suggestions', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})})}E(R,"defaultProps",{showSectionSaveButton:!0});var K=i(461951);function O({isBoardCreate:e,onCreateBoardClick:t,useLegoLayout:i}){(0,a.Z)("CreateBoardButton","/app/www/common/PinBetterSave/CreateBoardButton.tsx");let l=(0,u.Z)(),[r,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1);return(0,P.jsx)(s.xu,{"data-test-id":"create-board",display:"flex",height:"100%",rounding:2,children:(0,P.jsx)(s.iP,{dataTestId:e?"create-board-button":"create-section-button",onBlur:()=>c(!1),onFocus:()=>c(!0),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onTap:t,rounding:2,children:(0,P.jsxs)(s.xu,{alignItems:"center",color:r?"secondary":"default",dangerouslySetInlineStyle:{__style:{...d?{border:`2px solid ${K.nTo}`}:{}}},display:"flex",height:"100%",padding:i?4:2,width:"100%",children:[(0,P.jsx)(s.xu,{color:i?"secondary":"transparent",dangerouslySetInlineStyle:{__style:i?{padding:"14px"}:{}},marginEnd:i?2:5,marginStart:4*!i,rounding:2*!!i,children:(0,P.jsx)(s.JO,{accessibilityLabel:"",color:i?"default":"error",icon:i?"add":"add-circle",size:i?20:28})}),e?(0,P.jsx)(s.xv,{align:"center",lineClamp:1,weight:"bold",children:l._('Create board', ' - ', ' -- ')}):(0,P.jsx)(s.xv,{align:"center",lineClamp:1,weight:"bold",children:l._('Create section', ' - ', ' -- ')})]})})})}var N=i(443962),M=i(524558);function U(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let H="allBoards",q="shortlist",W=`
.BoardsSlideLeft {
  animation: boardFlyoutSlideLeft 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRight {
  animation: boardFlyoutSlideRight 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideLeftRTL {
  animation: boardFlyoutSlideLeftRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

.BoardsSlideRightRTL {
  animation: boardFlyoutSlideRightRTL 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
}

@keyframes boardFlyoutSlideLeft {
  from {
    margin-left: 0%;
  }

  to {
    margin-left: -100%;
  }
}

@keyframes boardFlyoutSlideRight {
  from {
    margin-left: -100%;
  }

  to {
    margin-left: 0%;
  }
}

@keyframes boardFlyoutSlideLeftRTL {
  from {
    margin-right: -100%;
  }

  to {
    margin-right: 0%;
  }
}

@keyframes boardFlyoutSlideRightRTL {
  from {
    margin-right: 0%;
  }

  to {
    margin-right: -100%;
  }
}
`;class V extends n.PureComponent{constructor(...e){super(...e),U(this,"state",{boardSuggestions:[],isSectionOpen:null,selectedBoardId:"",selectedBoardCategory:"",searchQuery:"",searchBoxFocused:!0,saveSessionId:(0,r.Z)()}),U(this,"handleScroll",()=>{let{_container:e}=this,{logContextEvent:t}=this.props;t({event_type:110,component:13282,view_type:21})}),U(this,"getComplexBoardPickerThreshold",()=>{let{boardResource:e,checkExperiment:t}=this.props,i=(e?.data?.all_boards||[]).length>0?t("web_curation_board_picker_tune_complex_board_picker").group:"control",a=3;switch(i){case"enabled_2":a=2;break;case"enabled_4":a=4;break;case"enabled_5":a=5;break;default:a=3}return a}),U(this,"refHandler",e=>{this.removeEventListeners(),e&&e.addEventListener("scroll",this.handleScroll,{once:!0}),this._container=e}),U(this,"getItems",e=>{let{boardResource:t,showSaveToProfile:i,checkExperiment:a}=this.props;if(!t?.data)return[];let{all_boards:n}=t.data,l=n.length>=this.getComplexBoardPickerThreshold(),r=i&&n.length&&a("web_curation_board_picker_reorder_profile_option").anyEnabled,s=[{boardId:"",image_cover_url:"",is_collaborative:!1,isOpen:!1,name:this.props.i18n._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),privacy:"public",section_count:0,type:"boardless",url:"/me/"}],o=this.getAllBoards().map((e,t)=>this.mapBoards(e,H,t)),d=this.getShortlist().map((e,t)=>this.mapBoards(e,q,t)),{searchQuery:c}=this.state;return c.length>=y.Z?[...(0,N.j)(o,c)]:[...l||!i||r?[]:[{type:"header",title:this.props.i18n._('Quick save and organize later', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.boardlessPinsTitle', 'Header saving to profile')},...s],...l&&l&&i&&!r?s:[],...l&&d?.length?[{category:q,type:"header",title:e?this.props.i18n._('Top choices', 'PinBetterSave.BoardFlyout.TopChoicesSectionTitle', 'Header for top suggestions in board picker'):this.props.i18n._('Top board suggestions', 'Header for top suggesions in board picker', 'Header for top suggesions in board picker')},...d]:[],...n.length>0?[{type:"header",title:!l&&i?this.props.i18n._('Save to board', 'BoardFlyout.inPinBetterSaveAndLessThanThreeBoards.saveToBoardTitle', 'Header for boards when there are less than 3 boards in board picker'):this.props.i18n._('All boards', 'Header for all boards in board picker', 'Header for all boards in board picker')},...o,...r?s:[]]:[]]}),U(this,"mapBoards",(e,t,i)=>{let{selectedBoardId:a,selectedBoardCategory:n}=this.state,l=e.id===a&&t===n;return{...e,category:t,isOpen:l,gridIndex:i}}),U(this,"handleBack",()=>{let{setBoardWithSection:e}=this.props;this.setState({isSectionOpen:!1,selectedBoardId:"",selectedBoardCategory:""}),e&&e(null)}),U(this,"handleSectionClick",(e,t)=>{let{clientTrackingParams:i,imageSignature:a,logContextEvent:n,onItemChosen:l,pinId:r,surfaceOriginViewParameter:s}=this.props,{saveSessionId:o,searchQuery:d}=this.state;n({event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:t.id,view_type:91,view_parameter:3133,aux_data:{board_id:t.id,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:t.gridIndex,image_signature:a,is_profile_save:!1,pin_id:r,save_session_id:o,search_query:d,section_id:e.id}}),l({boardId:t.id,url:e.slug?`${t.url}${e.slug}/`:t.url,sectionId:e.id,title:e.title||"",type:e.type,imageCoverUrl:t.image_cover_url,ownerUsername:t.owner&&t.owner.username||""})}),U(this,"getPinBuilderSuggestions",async()=>{let{clientTrackingParams:e,imageSignature:t,logContextEvent:i,pinId:a,surfaceOriginViewParameter:n}=this.props,{saveSessionId:l}=this.state;if(a){let r=await (0,d.Z)({url:`/v3/pins/${a}/board_title_suggestions/`,data:{pin_id:a}});if(r.resource_response.data){let s=r.resource_response.data.map(e=>({title:e.title,metadata:JSON.parse(e?.metadata??"{}")}))||[];this.setState({boardSuggestions:s}),i({aux_data:{board_picker_surface_origin:n,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:t,pin_id:a,save_session_id:l},component:13282,clientTrackingParams:e,event_type:13,view_parameter:3992,view_type:21})}}}),U(this,"getAllBoards",()=>{let{boardResource:e,advertiser_id:t}=this.props;return(e?.data?.all_boards||[]).filter(e=>!t||"secret"!==e.privacy)}),U(this,"getShortlist",()=>{let{suggestedBoardsShortListResource:e,displayShortlistMostRecentBoard:t,boardResource:i}=this.props,a=i?.data?.boards_shortlist||[];return t?a:e?.data||[]}),U(this,"getBoards",e=>e===H?this.getAllBoards():e===q?this.getShortlist():[]),U(this,"getSuggestedBoardsIds",()=>{let{showSaveToProfile:e}=this.props,t=(e?this.getShortlist().slice(0,2):this.getShortlist()).map(e=>e.id);return e&&t.unshift("PROFILE_PINS"),t}),U(this,"getTopChoiceBoardsAuxData",()=>{let{showSaveToProfile:e}=this.props;return(e?this.getShortlist().slice(0,2):[...this.getShortlist()]).map(e=>({board_title_id:String(e.id),board_title_kind:JSON.parse(e.recommendation_reason??"{}").reason,board_title:String(e.name),board_title_score:JSON.parse(e.recommendation_reason??"{}").score}))}),U(this,"getBoardTitleSuggestionsAuxData",()=>{let{boardSuggestions:e}=this.state;return e.map(e=>({board_title_id:String(e.metadata.value),board_title_kind:String(e.metadata.kind),board_title:String(e.title),board_title_score:String(e.metadata.confidence)}))}),U(this,"handleBoardWithSectionsClick",e=>{let{clientTrackingParams:t,logContextEvent:i,pinId:a,setBoardWithSection:n,surfaceOriginViewParameter:l}=this.props,{saveSessionId:r,searchQuery:s,selectedBoardId:o,selectedBoardCategory:d}=this.state,c=this.getBoards(e.category).find(({id:t})=>t===e.id),u=o===e.id&&d===e.category;i({event_type:13,clientTrackingParams:t,component:13282,element:36,object_id_str:e.id,view_type:275,aux_data:{board_id:e.id,board_picker_surface_origin:l,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,is_profile_save:!1,pin_id:a,save_session_id:r,search_query:s}}),c&&n&&n(c),this.setState({isSectionOpen:!0,selectedBoardId:u?"":e.id,selectedBoardCategory:u?"":e.category})}),U(this,"handleBoardClick",({board:e,toggleSections:t})=>{let{clientTrackingParams:i,imageSignature:a,logContextEvent:n,onItemChosen:l,pinId:r,surfaceOriginViewParameter:s}=this.props,{saveSessionId:o,searchQuery:d}=this.state;this.setState({searchBoxFocused:!1}),t?(n({event_type:101,component:13282,element:36,clientTrackingParams:i,object_id_str:e.id,view_type:91,view_parameter:e.category===q?3988:3989,aux_data:{board_id:e.id,board_component:e.category===q?3988:3989,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:a,is_profile_save:!1,pin_id:r,save_session_id:o,search_query:d}}),this.handleBoardWithSectionsClick({category:e.category,gridIndex:e.gridIndex,id:e.id})):(n("boardless"===e.type?{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:3990,aux_data:{board_id:e.id,board_component:3990,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:a,is_profile_save:!0,pin_id:r,save_session_id:o,search_query:d}}:{event_type:101,clientTrackingParams:i,component:13282,element:36,object_id_str:e.id,view_type:91,view_parameter:e.category===q?3988:3989,aux_data:{board_id:e.id,board_component:e.category===q?3988:3989,board_picker_surface_origin:s,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),board_index:e.gridIndex,image_signature:a,is_profile_save:"boardless"===e.type,pin_id:r,save_session_id:o,search_query:d}}),l({boardId:e.id,url:e.url,title:e.name||"",type:e.type,imageCoverUrl:e.image_cover_url,privacy:e.privacy}))}),U(this,"handleSearchQueryUpdate",e=>{this.setState(t=>({...t,searchQuery:e}))}),U(this,"handleCreateBoardClick",e=>{let{clientTrackingParams:t,imageSignature:i,logContextEvent:a,onBoardCreate:n,pinId:l,surfaceOriginViewParameter:r,surface:s}=this.props,{saveSessionId:o,searchQuery:d}=this.state;a({event_type:101,clientTrackingParams:t,component:13282,element:249,view_type:91,view_parameter:e?87:3132,aux_data:{board_component:e?87:3132,board_picker_surface_origin:r,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:i,pin_id:l,save_session_id:o,search_query:d,source:s??x.Z.BOARD_PICKER}}),n({title:d})}),U(this,"handleBoardSuggestionClick",e=>{let{clientTrackingParams:t,imageSignature:i,logContextEvent:a,onBoardCreate:n,pinId:l,surfaceOriginViewParameter:r}=this.props,{saveSessionId:s}=this.state;a({event_type:101,clientTrackingParams:t,component:13282,element:23,view_type:91,view_parameter:3992,aux_data:{board_picker_surface_origin:r,board_title_suggestions:JSON.stringify(this.getBoardTitleSuggestionsAuxData()),image_signature:i,pin_id:l,save_session_id:s}}),n(e)})}componentWillUnmount(){this.removeEventListeners()}componentDidMount(){let{clientTrackingParams:e,logContextEvent:t,imageSignature:i,pinId:a,setBoardWithSection:n,surfaceOriginViewParameter:l}=this.props,{saveSessionId:r}=this.state;n&&n(null),t({event_type:13,component:13282,clientTrackingParams:e,element:10960,aux_data:{board_picker_surface_origin:l,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),image_signature:i,pin_id:a,save_session_id:r}})}componentDidUpdate(e){let{saveSessionId:t}=this.state,{clientTrackingParams:i}=this.props;!e.suggestedBoardsShortListResource?.isLoaded&&this.props.suggestedBoardsShortListResource?.isLoaded&&this.getSuggestedBoardsIds().length>0&&this.props.logContextEvent({event_type:13,clientTrackingParams:i,component:13282,element:1001,aux_data:{pin_id:this.props.pinId,board_picker_suggested_boards:JSON.stringify(this.getTopChoiceBoardsAuxData()),save_session_id:t}})}removeEventListeners(){let{_container:e}=this;e&&e.removeEventListener("scroll",this.handleScroll)}render(){let{accessibilityLabelText:e,boardResource:t,buttonText:i,changeBoardModal:a,clientTrackingParams:l,customItem:r,headerText:o,hideAlreadySavedMsg:d,imageSignature:c,onButtonClick:u,paneHeight:_,paneWidth:g,pinAlreadySavedBoard:m,pinId:f,requestContext:y,sectionText:b,showSaveToProfile:v,showSearchField:x,showCreateBoardButton:w,showFlyoutSaveButton:j,showSections:C,showSectionSaveButton:A,suggestedBoardsShortListResource:T,surfaceOriginViewParameter:F,useStoryboardStyle:E,useLegoLayout:R,boardFlyoutStyle:z}=this.props,{boardSuggestions:Z,isSectionOpen:K,saveSessionId:N,searchBoxFocused:U,searchQuery:q}=this.state;if(!t)return null;let{isLoaded:V,error:$}=t,J=[];(V&&!$||T&&T.data&&!T.error)&&(J=this.getItems(!!R));let G=J.filter(e=>e&&e.category===H).length,Y=G>this.getComplexBoardPickerThreshold();Y||0!==Z.length||this.getPinBuilderSuggestions();let X=E?200:322,Q=E?214:334,ee=_||290,et=JSON.stringify(this.getTopChoiceBoardsAuxData()),ei=y.isRTL?"BoardsSlideRightRTL":"BoardsSlideLeft",ea="";null!==K&&(ea=y.isRTL?"BoardsSlideLeftRTL":"BoardsSlideRight");let en=e=>(0,P.jsxs)(n.Fragment,{children:[!R&&(0,P.jsx)(s.iz,{}),(0,P.jsx)(s.xu,{borderStyle:R&&G>=3&&J.length>1?"shadow":"none",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}},height:R?80:52,overflow:"hidden",children:(0,P.jsx)(O,{isBoardCreate:e,onCreateBoardClick:({event:t})=>{t.stopPropagation(),this.handleCreateBoardClick(e)},useLegoLayout:R})})]});return(0,P.jsxs)(s.xu,{color:"default","data-test-id":"board-picker-flyout",height:E||a?"100%":R?498:439,overflow:"hidden",rounding:2,width:R&&!a?"100%":g,zIndex:S.lI,children:[(0,P.jsx)(h.Z,{unsafeCSS:W}),V?null:(0,P.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:200,width:R&&!a?360:g,children:(0,P.jsx)(s.xH,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})}),(0,P.jsx)(s.kC,{direction:"row",children:V&&(0,P.jsx)("div",{className:K?ei:ea,children:(0,P.jsx)(s.xu,{position:"relative",children:(0,P.jsxs)(s.xu,{direction:"row",display:"flex",width:R&&!a?720:(g??0)*2,zIndex:new s.Ry(0),children:[(0,P.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:R&&!a?360:g,children:[R&&!a&&(0,P.jsx)(s.kC,{alignItems:"center",height:64,justifyContent:"center",children:(0,P.jsx)(k,{headingLevel:2,size:"300",textWeight:"bold",children:o||(v?this.props.i18n._('Save', 'PinBetterSave.BoardFlyout.SavePlaceholder', 'flyout header text to indicate save options'):this.props.i18n._('Save to board', 'PinBetterSave.BoardFlyout.SaveToBoardPlaceholder', 'flyout header text'))})}),(x??!a)&&(0,P.jsxs)(s.xu,{"data-test-id":"search-boards-field-container",height:R?64:"auto",padding:z?.searchFieldStyle?.padding??3*!R,paddingX:z?.searchFieldStyle?.paddingX??(R?4:3),paddingY:z?.searchFieldStyle?.paddingY,children:[(0,P.jsx)(M.Z,{accessibilityClearButtonLabel:this.props.i18n._('Clear board search text', 'dropdown.searchField.clearButtonLabel', 'clear button label for search field in board picker'),accessibilityLabel:this.props.i18n._('Search through your boards', 'search bar placeholder text', 'search bar placeholder text'),focused:U,id:"pickerSearchField",onChange:({value:e})=>this.handleSearchQueryUpdate(e),placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:z?.searchFieldStyle?.size??"lg",value:q}),(0,P.jsx)(s.xu,{"aria-live":"assertive",display:"visuallyHidden",children:G?(0,p.Wc)(this.props.i18n.ngettext('Found a board', 'Found {{boardCount}} boards', G, 'PinBetterSave.BoardFlyout.BoardFoundsDropdown', 'Text to indicate how many boards were found in the board autocomplete. boardCount: the number of boards created by the user.'),{boardCount:G.toString()}):this.props.i18n._('No boards found', 'PinBetterSave.BoardFlyout.noBoardFoundsDropdown', 'Text to indicate no boards were found in the board autocomplete')})]}),(0,P.jsxs)(s.xu,{ref:this.refHandler,maxHeight:R?ee:X,minHeight:R?290:X,overflow:"scrollY",children:[T&&!T.isLoaded?(0,P.jsx)(s.xu,{"data-test-id":"suggestedBoardsContainer",children:(0,P.jsx)(s.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:128.5,width:"100%",children:(0,P.jsx)(s.xH,{accessibilityLabel:this.props.i18n._('loading board picker', 'accessibility text for loading spinner', 'accessibility text for loading spinner'),show:!0})})}):null,r,J.map((t,a)=>"header"===t.type?(0,P.jsx)(I,{boardPickerSuggestedBoards:et,clientTrackingParams:l,imageSignature:c,index:a,item:t,pinId:f,saveSessionId:N,surfaceOriginViewParameter:F,useLegoLayout:R},`${t.title}`):(0,P.jsx)(s.xu,{children:(0,P.jsx)(B,{accessibilityLabelText:e,board:t,boardPickerSuggestedBoards:et,buttonText:i,clientTrackingParams:l,displayAlreadySavedMsg:m&&m.id===t.id&&!d,imageSignature:c,onButtonClick:u,onClick:e=>{this.handleBoardClick({board:e,toggleSections:C&&!!e.section_count})},pinId:f,saveSessionId:N,shouldOpenSections:C,showFlyoutSaveButton:j,showSaveToProfile:v,surfaceOriginViewParameter:F,useLegoLayout:R})},`${t.category}-${t.id}`)),!Y&&Z.length>0&&(0,P.jsx)(D,{inWebRepinFlowExp:R,onClick:this.handleBoardSuggestionClick,pinBuilderSuggestions:Z})]}),w&&en(!0)]}),K&&(0,P.jsxs)(s.xu,{direction:"column",display:"flex",marginBottom:2*!!R,width:R&&!a?360:g,children:[(0,P.jsxs)(s.kC,{alignContent:"center",alignItems:"center",direction:"row",justifyContent:"center",children:[(0,P.jsx)(s.sg,{span:2,children:(0,P.jsx)(s.xu,{alignContent:"center",alignItems:"center",display:"flex",justifyContent:"start",marginStart:3,children:(0,P.jsx)(s.hU,{accessibilityLabel:"Back button",icon:"arrow-back",iconColor:"darkGray",onClick:this.handleBack,size:"sm"})})}),(0,P.jsx)(s.sg,{span:8,children:(0,P.jsx)(s.kC,{alignItems:"center",height:R?64:52,justifyContent:"center",children:(0,P.jsx)(k,{headingLevel:2,size:"300",textWeight:"bold",children:b||(R?this.props.i18n._('Save Pin to', 'PinBetterSave.BoardFlyout.SectionHeader', 'Header for section header'):this.props.i18n._('Choose section', 'Header for section header', 'Header for section header'))})})}),(0,P.jsx)(s.sg,{span:2,children:(0,P.jsx)(s.xu,{})})]}),!R&&(0,P.jsx)(s.iz,{}),(0,P.jsx)(s.xu,{maxHeight:R?ee:Q,minHeight:R?354:Q,overflow:"scrollY",children:J?(0,P.jsx)(n.Fragment,{children:J&&J.map(e=>"header"===e.type?null:(0,P.jsx)(s.xu,{children:e.isOpen&&(0,P.jsxs)(n.Fragment,{children:[R&&(0,P.jsx)(s.xu,{marginStart:4,marginTop:2,paddingY:1,children:(0,P.jsx)(k,{headingLevel:3,size:"100",children:this.props.i18n._('Board', 'PinBetterSave.BoardFlyout.BoardPickerTitle', 'board title on section picker')})}),(0,P.jsx)(B,{board:e,boardPickerSuggestedBoards:et,buttonText:i,displayAlreadySavedMsg:m&&m.id===e.id,isSectionOpen:!0,onButtonClick:u,onClick:e=>{this.handleBoardClick({board:e,toggleSections:!1})},saveSessionId:N,shouldOpenSections:!1,showFlyoutSaveButton:j,useLegoLayout:R}),(0,P.jsx)(L,{board:e,buttonText:i,onButtonClick:u,onClick:this.handleSectionClick,showSectionSaveButton:A,useLegoLayout:R})]})},`${e.category}-${e.id}`))}):null}),w&&!a&&en(!1)]})]})})})})]})}}function $(e){let{logContextEvent:t}=(0,o.u)(),i=(0,u.Z)(),{checkExperiment:a}=(0,_.Z)();return(0,P.jsx)(V,{...e,checkExperiment:a,i18n:i,logContextEvent:t,requestContext:(0,g.B)()})}function J(e,t,i){let{advertiser:a}=e,n={};if(i&&i.user&&i.user.username&&i.id!==(t.isAuth?t.id:void 0)&&(n.orbacActingAs=i,n.username=i.user.username),t&&a){let i=e.advertiser;if(t.isAuth&&i.is_impersonation)return{hasMUA:i.owner_user_id!==t.id,advertiser_id:i.id,username:i.owner_user_id,...n};if(t.isAuth&&i.owner_user_id!==t.id)return{hasMUA:!0,advertiser_id:i.id,username:i.owner_user_id,...n};if(t.isAuth&&i.owner_user_id===t.id)return{hasMUA:!1,advertiser_id:i.id,username:"me"}}return{advertiser_id:void 0,hasMUA:void 0,...n}}function G(e){let{advertiser_id:t,hasMUA:i,boardFilter:a="all"}=e,{username:n}=e,l={field_set_key:"board_picker",filter:i?"protected":a,...n?{username:n}:Object.freeze({}),...t?{advertiser_id:t}:{}};return e.orbacActingAs&&e.orbacActingAs.user&&e.orbacActingAs.user.username&&(l={...l,username:e.orbacActingAs.user.username,orbac_subject_id:e.orbacActingAs.id,filter:a}),l}function Y(e,t){return(0,a.Z)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx"),(i,a)=>i((0,m.jB)("BoardPickerBoardsResource",G(J(a(),e,t))))}function X(e){(0,a.Z)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx");let t=(0,c.Z)(),i=(0,l.v9)(i=>J(i,t,e.orbacActingAs)),n={...e,...i},r=(0,f.Z)({name:"BoardPickerBoardsResource",options:G(n)});return(0,P.jsx)($,{...n,boardResource:r})}function Q(e){(0,a.Z)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx");let t=(0,b.Z)(),i=(0,c.Z)(),n=(0,v.lJ)(i,t);return(0,P.jsx)(X,{...e,orbacActingAs:n?t:void 0})}function ee(e){(0,a.Z)("BoardFlyout","/app/www/common/PinBetterSave/BoardFlyout.tsx");let t=(0,f.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:e.pinId,shortlist_length:2,num_shortlist_suggestions:2}}),{data:i}=(0,f.Z)({name:"ApiResource",options:{url:`/v3/pins/${e.pinId}/`,field_sets:["pin.pinned_to_board()"]},noCache:!0});return(0,P.jsx)($,{...e,pinAlreadySavedBoard:i?.pinned_to_board,suggestedBoardsShortListResource:t})}U(V,"defaultProps",{clientTrackingParams:void 0,paneWidth:320,showCreateBoardButton:!0,showFlyoutSaveButton:!0,showSections:!0,showSectionSaveButton:!0,useLegoLayout:!0})},247354:function(e,t,i){i.d(t,{Z:()=>d});var a=i(281098),n=i(20256),l=i(411544),r=i(494904),s=i(785893);let o=({collaborator_count:e,useLegoLayout:t,type:i})=>t?(0,s.jsx)(n.xu,{marginEnd:2*!!e,children:(0,s.jsx)(r.Z,{type:i})}):(0,s.jsx)(r.Z,{type:i}),d=({board:e,showCollaborativeIcon:t,showPrivateIcon:i,showProtectedIcon:d,showSectionsIcon:c,useLegoLayout:u})=>{(0,a.Z)("BoardPickerRowIconList","/app/www/common/PinBetterSave/BoardPickerRowIconList.tsx");let h=e?.collaborating_users?.length||0;return t||i||d||c?(0,s.jsxs)(n.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{paddingLeft:8}},"data-test-id":"board-picker-row-icon-list-box",direction:"row",display:"flex",marginEnd:5*!u,children:[i&&(0,s.jsx)(o,{collaborator_count:h,type:"secret",useLegoLayout:u}),d&&(0,s.jsx)(o,{collaborator_count:h,type:"protected",useLegoLayout:u}),t&&(u?(0,s.jsx)(l.Z,{board:e,isCompact:!0,ownerOnly:!1}):(0,s.jsx)(r.Z,{type:"group"})),c&&(0,s.jsx)(r.Z,{type:"sections"})]}):null}},923924:function(e,t,i){i.r(t),i.d(t,{default:()=>ew,PinBetterSave:()=>eS});var a,n,l,r,s=i(281098),o=i(667294),d=i(581722);i(167912);var c=i(825332),u=i(20256),h=i(575108),p=i(249013),_=i(111330),g=i(980787),m=i(118755),f=i(679422),y=i(78423),b=i(355940),v=i(657043),x=i(697063),S=i(364843),w=i(475498),P=i(821342),k=i(28427),I=i(390843),j=i(19585),C=i(302148),A=i(2420),B=i(886981),T=i(753143),F=i(982234),E=i(87853),R=i(378888),z=i(431338),L=i(601686),Z=i(688170),D=i(647942),K=i(215710),O=i(785893);function N({dropdownRef:e,hideDropdown:t=!1,isSaved:i,onBoardDropdownClick:a,onSaveClick:n,promotedIsLeadAd:l,renderPinSaveTooltip:r,selectedTitle:d,showBoardFlyout:c,unselectedText:h,view:p,surface:_}){(0,s.Z)("BoardSelectionDisplay","/app/www/common/PinBetterSave/BoardSelectionDisplay.tsx");let[g,m]=(0,o.useState)(!1),f=(0,j.Z)(),y=(0,o.useRef)(null),{closeupWithinMasonryEnabled:b}=(0,L.x4)();(0,o.useEffect)(()=>{g&&m(!1)},[g]);let v="closeup"===p,x="media-viewer"===p,S="VideoCarouselModule"===_,w=(0,o.useMemo)(()=>x?c?"inverse":"default":c||!v?"inverse":"default",[v,c,x]),P=(0,o.useCallback)(({event:e})=>{a(e)},[a]),k=v?"transparent":"transparentWhiteText";k=x?"semiTransparentWhite":k;let I=i?f._('Saved', 'PinBetterSave.BoardSelection.SavedButton', 'BetterSave Saved label'):f._('Save', 'PinBetterSave.BoardSelection.SaveButton', 'BetterSave Save label');return(0,O.jsxs)(u.xu,{ref:e,alignItems:x?"start":"center",dangerouslySetInlineStyle:{__style:{gap:"4px"}},display:"flex",paddingX:b?0:void 0,width:"100%",children:[!t&&(0,O.jsx)(u.xu,{"data-test-id":d?"board-selection-item-selected":"board-selection-placeholder",flex:"grow",width:"100%",children:(0,O.jsx)(u.zx,{accessibilityLabel:f._('Select a board you want to save to', 'PinBetterSave.BoardSelection.DropdownIcon', 'BetterSave accessibility label to change the board'),color:k,dataTestId:"PinBetterSaveDropdown",iconEnd:"arrow-down",onClick:P,selected:c,size:S?"sm":"lg",text:(0,O.jsx)(u.xv,{color:w,lineClamp:1,overflow:"breakAll",size:S?"100":"300",weight:"bold",children:d||h})})}),(0,O.jsx)(u.xu,{alignSelf:v?"center":"start","data-test-id":"PinBetterSaveButton",flex:"none",marginStart:"auto",children:(0,O.jsx)(u.Fm,{ref:y,color:l?"secondary":"primary",onClick:({event:e})=>{t?a(e):n(e)},selected:i,size:S?"sm":"lg",text:I})}),!!r&&!!y.current&&v&&r(y.current)]})}var M=i(686231);class U extends o.PureComponent{constructor(...e){var t,i,a;super(...e),t="handleClick",i=()=>{let{boardId:e,logContextEvent:t}=this.props;t({event_type:101,component:20,element:10805,object_id_str:e})},(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}componentDidMount(){let{toastShown:e}=this.props;e()}render(){let{boardName:e,boardUrl:t,onHide:i}=this.props;return(0,O.jsx)(w.Z,{duration:5e3,href:`${t}more_ideas/?ideas_referrer=16`,onClick:this.handleClick,onHide:i,text:(0,O.jsx)(u.xv,{weight:"bold",children:(0,C.nk)(this.props.i18n._('Find more ideas for {{ boardName }}', 'postRepinUpsellToast.findMoreIdeas.toast', 'Find more ideas for you board'),{boardName:e}).join("")})})}}function H(e){(0,s.Z)("PostRepinUpsellToast","/app/www/common/PinBetterSave/PostRepinUpsellToast.tsx");let{logContextEvent:t}=(0,g.u)(),i=(0,j.Z)(),a=(0,d.I0)();return(0,O.jsx)(U,{...e,i18n:i,logContextEvent:t,toastShown:()=>a((0,M.ND)(e.boardId))})}var q=i(667835),W=i(744862),V=i(109425),$=i(782259),J=i(341742);let G=(0,o.lazy)(()=>Promise.all([i.e("29670"),i.e("43645")]).then(i.bind(i,826654)));function Y(e){(0,s.Z)("PostSavedPinBoardCollabUpsell","/app/www/common/PinBetterSave/PostSavedPinBoardCollabUpsell.tsx");let{board:t,hideToast:i}=e,a=(0,j.Z)(),n=(0,P.Z)(),[l,r]=(0,o.useState)(!1),[d,c]=(0,o.useState)(!1),h=()=>{i()};(0,J.Z)(()=>{setTimeout(()=>c(!0),100)});let{marginTop:p,opacity:_,pointerEvents:g,transform:m,transition:f,visibility:y}=(0,V.ZP)({deviceType:"desktop",hiding:!1,visible:d}),b=t.name,v=(0,O.jsxs)(u.xv,{children:[(0,O.jsxs)(u.xv,{weight:"bold",children:[" ",(0,C.nk)(a._('Invite people to your new board', 'postSavedPinBoardCreateCollabUpsell.title.1', 'Title to inform user that they have successfully saved a pin to their board'),{boardName:b})]}),(0,O.jsx)(u.xv,{children:a._('Get ideas from your favorite people', 'postSavedPinBoardCollabUpsell.message', 'Message to upsell invite collaborator feature')})]}),x=n.isAuth&&n.firstName&&(0,O.jsxs)(u.xu,{height:48,position:"relative",width:48,children:[(0,O.jsx)(u.xu,{position:"absolute",children:(0,O.jsx)(W.qE,{color:n.avatar_color_index,name:n.firstName,outline:!0,size:"sm",src:n.imageMediumUrl})}),(0,O.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{left:"25%",top:"25%"}},position:"absolute",rounding:4,children:(0,O.jsx)(u.Sj,{bgColor:"lightGray",hovered:!0,icon:"person-add",iconColor:"darkGray",size:"sm"})})]}),S=(0,O.jsx)(u.kC,{alignContent:"center",alignItems:"center",justifyContent:"start",children:(0,O.jsxs)(u.hE,{children:[(0,O.jsx)(u.zx,{accessibilityLabel:a._('Not now', 'postSavedPinBoardCollabUpsell.notNowLabel', 'Accessibility label for declining upsell'),color:"gray",onClick:h,text:a._('Not now', 'postSavedPinBoardCollabUpsell.notNowLabel', 'Label for decline button on upsell')}),(0,O.jsx)(u.zx,{accessibilityLabel:a._('Invite', 'postSavedPinBoardCollabUpsell.inviteFriendsLabel', 'Accessibility label for inviting friends on upsell'),color:"red",onClick:()=>{r(!0)},text:a._('Invite', 'postSavedPinBoardCollabUpsell.inviteFriendsLabel', 'Label for invite friends button on upsell')})]})});return(0,O.jsx)(u.mh,{zIndex:new u.H3([new u.Ry(1e3)]),children:l?(0,O.jsx)($.Z,{children:(0,O.jsx)(G,{board:t,fromBoardCollabUpsell:!0,onDismiss:h})}):(0,O.jsx)(u.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{transform:m,transition:f,visibility:y,pointerEvents:g}},display:"flex",justifyContent:"center",marginBottom:5,marginTop:p,opacity:_,position:"fixed",width:"100%",children:(0,O.jsxs)(u.xu,{borderStyle:"shadow",color:(0,q.Yc)()?"elevationFloating":"default",direction:"column",display:"flex",paddingY:4,rounding:4,smDirection:"row",children:[(0,O.jsxs)(u.xu,{smDisplay:"flex",smMarginBottom:-3,smMarginTop:-3,width:"100%",wrap:!0,children:[(0,O.jsxs)(u.xu,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",justifyContent:"center",padding:4,smDirection:"row",smPaddingY:3,children:[x,(0,O.jsx)(u.xu,{alignItems:"center",direction:"column",display:"flex",flex:"shrink",marginBottom:"auto",marginTop:"auto",smDisplay:"block",smMarginEnd:6,smMarginStart:2,children:(0,O.jsx)(u.xu,{maxWidth:648,children:v})})]}),S]}),(0,O.jsx)(u.hU,{accessibilityLabel:"cancel",icon:"cancel",iconColor:"darkGray",onClick:h,padding:4,size:"sm"})]})})})}var X=i(97781),Q=i(646012),ee=i(74229),et=i(306274),ei=i(211119),ea=i(253861),en=i(441733),el=i(310916),er=i(548286),es=i(990103),eo=i(189976),ed=i(498951),ec=i(401450),eu=i(696323),eh=i(66690);let ep=(void 0!==a||(a=i(578772)).hash&&"03aa6b9cad1d5fb9b12a7c896ccdaffd"!==a.hash&&console.error("The definition of 'PinSaveRequestRepinWithSectionSuggestions_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),e_=(void 0!==n||(n=i(998538)).hash&&"6bd1eb83cfe5391288164b17cc5d85b7"!==n.hash&&console.error("The definition of 'PinSaveRequestRepinWithSectionSuggestions_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function eg(e){(0,s.Z)("PinSaveRequestRepinWithSectionSuggestions","/app/www/save/pin-to-board/PinToBoard/PinSaveRequestRepinWithSectionSuggestions.tsx");let{action:t,additionalCreateFields:i,boardWithSection:a,clientTrackingParams:n,children:l,onClose:r,pinKey:o,setCompletionPromise:d,shouldHideToast:c,shuffleAssetKey:u}=e,h=(0,k.Z)(ep,o),p=(0,k.Z)(e_,u);return(0,O.jsx)(eh.K,{action:t,additionalCreateFields:i,boardWithSection:a,clientTrackingParams:n,onClose:r,pinKey:h,setCompletionPromise:d,shouldShowToast:!c,showCreate:!0,shuffleAssetKey:p,urlPinInfo:null,children:e=>l(e)})}var em=i(876338),ef=i(603316);function ey(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eb=(void 0!==l||(l=i(557070)).hash&&"00592a87c0eef346f4bdfb1d6ca06595"!==l.hash&&console.error("The definition of 'PinBetterSave_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),ev=(void 0!==r||(r=i(808569)).hash&&"2fd12704316ce3077575f9a0d9e31e84"!==r.hash&&console.error("The definition of 'PinBetterSave_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);function ex({savedInfo:e,variant:t}){let i=(0,j.Z)(),{closeupWithinMasonryEnabled:a}=(0,L.x4)(),n="closeup"===t,l="boardless"===e.type?i._('Profile', 'PinBetterSave.PinBetterSaveSavedStatus.savedTitle', 'Text indicating saved to your profile'):e.title??"";return(0,O.jsx)(u.rU,{href:e.url||"",onClick:({event:e})=>{e.stopPropagation()},children:(0,O.jsx)(u.xu,{alignItems:n?"center":void 0,dangerouslySetInlineStyle:{__style:{color:a?"#FFF":"#333"}},"data-test-id":"saved-board-title",display:n?"flex":"block",marginEnd:4*!!n,marginStart:+!!n,minHeight:n?52:void 0,children:(0,O.jsx)(u.xv,{align:n?"end":void 0,color:"cutout"===t||"media-viewer"===t?"light":"default",lineClamp:n?1:void 0,overflow:"breakAll",size:"300",weight:"bold",children:l})})})}class eS extends o.Component{constructor(...e){super(...e),ey(this,"state",{boardWithSection:null,createdBoard:null,suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1,sensitiveContentNotice:null,showBoardCollabUpsell:!1,hasItemSelected:!1}),ey(this,"setBoardSaveCompletionPromise",e=>{let{createdBoard:t}=this.state;this._repinCompletionPromise=e,this._repinCompletionPromise.promise.then(e=>{if(!e.board)return;let{board:{id:i,name:a,url:n}}=e,l={boardId:i,title:a,url:n};this.updateSelectedBoardOrSection(l),this.updateSavedState({...l,localPinId:e.id}),t&&(0,et.Uz)(t.sensitivity)&&(0,ei.ZP)(t.sensitivity)?this.setState({sensitiveContentNotice:t.sensitivity.notices[0]}):this.handleRepinHide()})}),ey(this,"updateSavedState",e=>{let{currentHistoryStack:t,location:i,save:a,searchQueryInvalidated:n,onSave:l,pin:r}=this.props,s=(0,R.mB)(i.search).q||(0,Z._)(t);a({pinId:r.entityId,nodeId:r.__id,boardId:e.boardId??"",localPinId:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??"",type:e.type??"",url:e.url??""}),s&&n(s),l&&e.localPinId&&l()}),ey(this,"updateSelectedBoardOrSection",e=>{let{selectBoardOrSection:t,pin:i}=this.props;t({pinId:i.entityId,nodeId:i.__id,boardId:e.boardId??"",localPinId:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??"",type:e.type??"",url:e.url??""})}),ey(this,"updateSelectedItem",()=>{let{initialSelection:e,selectedItem:t}=this.props;!t&&e&&(this.updateSelectedBoardOrSection(e),this.setState({hasItemSelected:!0}))}),ey(this,"dropdownRef",(0,o.createRef)()),ey(this,"handleItemChosen",e=>{this.updateSelectedBoardOrSection(e),this.hideFlyout(!0),this.save({item:e})}),ey(this,"handleBoardCreate",({title:e=""}={})=>{let{requireAuth:t,i18n:i}=this.props;if(t)return void t({loginModalHeader:(0,m.is)(i)});this.hideFlyout(!0),this.setState(t=>({...t,suggestedBoardTitle:e,showRepinModal:!0}));let{onToggleFlyout:a}=this.props;a&&a(!0,!0)}),ey(this,"handleBoardCreated",e=>{this.setState({createdBoard:e});let{toastManagerContext:t}=this.props;this.isViewerEligibleForBoardCollabUpsell(e)&&(this.setState({showBoardCollabUpsell:!0}),(0,T.M0)().setItem(_.zq,+new Date),setTimeout(()=>t.showOneToast(({hideToast:t})=>(0,O.jsx)(Y,{board:e,hideToast:t})),4e3))}),ey(this,"handleRepinHide",()=>{this.setState(e=>({...e,suggestedBoardTitle:"",showRepinModal:!1}));let{onToggleFlyout:e}=this.props;e&&e(!1,!1)}),ey(this,"handleBoardDropdownClick",e=>{let{setAbortNoActionPlacementTimeout:t,pin:{entityId:i},viewParameter:a,viewType:n,clientTrackingParams:l,logContextEvent:r}=this.props;t(!0),e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.state.showBoardFlyout?this.hideFlyout(!0):(r({aux_data:{pin_id:i},component:13282,element:10960,event_type:101,object_id_str:i,view_parameter:a,view_type:n,clientTrackingParams:l}),this.showFlyout())}),ey(this,"handleSaveClick",async(e,t)=>{this.props.onVisitButtonAnimate&&this.props.onVisitButtonAnimate();let{i18n:i,selectedItem:a,requireAuth:n}=this.props;if(n){e.stopPropagation(),n({loginModalHeader:(0,m.Bx)(i)});return}if(t||!a)return void this.handleBoardDropdownClick(e);e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),this.logClickEvent({isSaveClick:!0}),await this.save({item:a})}),ey(this,"logClickEvent",({isSaveClick:e})=>{let{clientTrackingParams:t,pin:i,selectedItem:a,viewType:n,viewParameter:l,logContextEvent:r}=this.props,s=a?.score?JSON.stringify([a.score]):void 0;r({event_type:101,...n?{view_type:n}:Object.freeze({}),...l?{view_parameter:l}:Object.freeze({}),component:13282,element:36,object_id_str:a?.boardId,clientTrackingParams:t,aux_data:{board_id:a?.boardId,grid_index:D.Z,is_profile_save:a?.type==="boardless",is_undo:!e,pin_id:i.entityId,suggested_boards_score_list:s}})}),ey(this,"setBoardWithSection",e=>{this.setState({boardWithSection:e})}),ey(this,"handleEditSubmit",({boardId:e,sectionId:t,url:i,title:a})=>{let{savedInfo:n}=this.props,l=n?.localPinId;this.updateSavedState({localPinId:l||"",boardId:e,sectionId:t||"",url:i,title:a})}),ey(this,"resetPinSavedState",()=>{this.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),ey(this,"deleteSavedState",({isDisableToast:e,newPinId:t})=>{let{clientTrackingParams:i,i18n:a,onDelete:n,pin:l,toastManagerContext:r,unsave:s}=this.props;s({pinId:l.entityId,nodeId:l.__id}),t&&h.Z.create("PinResource",{id:t,client_tracking_params:i}).callDelete().then(()=>{e||r.showToast(({hideToast:e})=>(0,O.jsx)(w.Z,{dataTestId:"pin-better-save-removed-pin-toast",onHide:e,text:l.savedInfo?.boardId?a._('Removed from your board!', 'PinBetterSave.SavedPin.RemovedFromYourBoard', 'User removed their pin'):a._('Pin removed!', 'PinBetterSave.SavedPin.PinRemoved', 'User removed their pin')}))}),n&&n()}),ey(this,"save",async({item:e,movedBoardTitle:t})=>{let{onClickCallback:i,requireAuth:a}=this.props;if(a)return void a();let{addNewPinToPinsFeed:n,i18n:l,isLimitedLogin:r,mostRecentBoard:s,pin:o,postRepinMoreIdeasUpsell:d,postRepinUpsellDisabled:c,save:u,setMostRecentBoard:h,toastManagerContext:p,showEmailVerificationReminderModal:_,mountAfterActionPlacement:g}=this.props;this.updateSavedState(e);let m=!!e.sectionId,f="boardless"===e.type;try{let{resource_response:{data:a}}=await this.getPinResource(e).callCreate({showError:!1}),r=e.url,{incrementBoardPinCount:_,updateUserPinCount:y,viewerUserId:b}=this.props;!c&&r&&!f&&(({boardId:e,boardUrl:t,postRepinMoreIdeasUpsell:i})=>{if(!t)return!1;let{recentSaves:a,recentUpsell:n}=i;if(n[e])return!1;let l=a.findIndex(t=>t.boardId!==e);return(-1===l?a.length:l)+1>=3})({boardId:e.boardId??"",boardUrl:r,postRepinMoreIdeasUpsell:d})&&p.showToast(({hideToast:t})=>(0,O.jsx)(H,{boardId:e.boardId??"",boardName:e.title??"",boardUrl:r,onHide:t})),u({pinId:o.entityId,nodeId:o.__id,boardId:e.boardId??(a.board.id||""),localPinId:a.id?a.id:e.localPinId??"",score:e.score??void 0,sectionId:e.sectionId??"",title:e.title??(a.board.title||""),type:e.type??"",url:e.url??(a.board.url||""),localPin:a}),this.props.onPinCreate&&this.props.onPinCreate({boardId:a.board.id,pinId:a.id}),_({boardId:e.boardId??"",sectionId:e.sectionId}),y(b);let v=e.sectionId?e.sectionId:e.boardId;f?(v=b,n(v,a.id,!1,f)):n(v??"",a.id,m,!1);let{id:x,images:S,board:P}=a,k=S["236x"];this.updateSavedState({...e,localPinId:x}),p.showToast(({hideToast:i})=>t?(0,O.jsx)(w.Z,{onHide:i,text:(0,C.nk)(l._('Moved to {{ boardName }}', 'PinBetterSave.SavedPin.MovedToBoard', 'User moved their pin. boardName: the board name where the pin is moved to'),{boardName:t}).join("")}):(0,O.jsx)(X.Z,{boardName:(e.title||P.name)??"",boardUrl:e.url||P.url,isBoardlessPin:f,onHide:i,onUndo:()=>this.deleteSavedState({newPinId:x}),pinImageUrl:k.url})),g("Save",{is_promoted:o.isPromoted,pin_id:o.entityId,repin_id:x}),s&&e.boardId!==s.id&&!f&&h(e.boardId??"",e.title??"",e.url??""),"function"==typeof i&&i()}catch(e){(0,v.Z)(e,"api_error_code")===A.H9?_():r||x.Z.showError((0,v.Z)(e,"message_detail")||(0,v.Z)(e,"message")||""),this.resetPinSavedState()}}),ey(this,"hideFlyout",(e=!1)=>{let{onToggleFlyout:t}=this.props;this.setState({showBoardFlyout:!1}),t&&t(!1,e)})}componentDidMount(){let{autoQuicksaveCallback:e,onMount:t,shouldAutoQuicksave:i}=this.props;this.updateSelectedItem(),t&&t(),i&&(this.save({item:{boardId:"",url:"/me/",title:"Profile",type:"boardless"}}),e?.())}componentDidUpdate(){this.state.hasItemSelected||this.updateSelectedItem(),this.props.saveToBoardFromPostDownloadUpsell&&(this.showFlyout(),this.props.setSaveToBoardFromPostDownloadUpsell?.(!1))}getPinResource(e){let{carouselData:t,clientTrackingParams:i,pin:a,getStringifiedCommerceAuxData:n,shuffleAsset:l}=this.props,r={carousel_slot_index:t&&t.index||0,clientTrackingParams:i,description:a.description||"",image_base64:a.imageBase64,is_buyable_pin:!1,is_promoted:a.isPromoted,is_removable:a.promotedIsRemovable,link:a.link,pin_id:a.entityId||"",title:a.title||"",...l?{shuffle_asset:l.entityId}:{},...e.boardId&&"boardless"!==e.type?{board_id:e.boardId}:null,...e.sectionId?{section:e.sectionId}:null,...n()};return h.Z.create("RepinResource",r)}showFlyout(){let{onToggleFlyout:e}=this.props;this.setState({showBoardFlyout:!0}),e&&e(!0,!0)}isViewerEligibleForBoardCollabUpsell(e){let{viewer:t}=this.props;if(t?.isAuth&&e){if(!(0,F.Z)(_.zq))return!1;let i=(0,T.M0)().getItem(_.zq)||"0",a=new Date,n=Number(i)<a.getTime()-6048e5,l=(t.boardCount??0)>=2&&(t.pinCount??0)>=3,r=!e.is_collaborative&&!!e.url&&e.url.split("/")[1]===t.username;return l&&r&&n}return!1}render(){let{boardResource:e,carouselData:t,clientTrackingParams:i,hideAlreadySavedMsg:a,onToggleModal:n,pin:l,renderPinSaveTooltip:r,renderSavedStatus:s,savedInfo:o,savedCutout:d,selectedItem:c,unselectedText:h,variant:p,viewParameter:_,hideDropdown:g,showSaveToProfile:m,shuffleAsset:f,nodeRef:y,surface:v}=this.props,{boardWithSection:x,showBoardFlyout:w,showRepinModal:P,sensitiveContentNotice:k,suggestedBoardTitle:I}=this.state,j=o||d,{entityId:C,imageSignature:A}=l,{showSelectTextOnBoardSelectionDisplay:B,shouldAllowSaveToProfile:T,shouldSeePinBetterSave:F}=(0,en.Z)({dangerouslySkipActivation:!0}),E=(0,O.jsx)(K.xH,{boardResource:e,clientTrackingParams:i,hideAlreadySavedMsg:a,imageSignature:A,onBoardCreate:this.handleBoardCreate,onItemChosen:this.handleItemChosen,pinId:C,selectedItem:c,setBoardWithSection:this.setBoardWithSection,showSaveToProfile:m||T,surfaceOriginViewParameter:_}),R=()=>{this.logClickEvent({isSaveClick:!1}),this.deleteSavedState({newPinId:j?.localPinId??""})};return(0,O.jsx)(b.Z,{name:"PinBetterSave",children:(0,O.jsxs)(u.xu,{ref:y??void 0,"data-test-id":"pin-better-save-button",display:["closeup","media-viewer"].includes(p)?"flex":void 0,height:"closeup"===p||"media-viewer"===p?void 0:60,children:[j?.title?(0,O.jsx)(Q.Z,{clientTrackingParams:i,currentCarouselIndex:t&&t.index,onDeleteSavedState:R,onEditSubmit:this.handleEditSubmit,onToggleModal:n,pinId:j.localPinId,shouldUseLegoStyles:!0,surface:v,variant:p,viewParameter:_,children:s&&j&&s({savedInfo:j,variant:p})}):(0,O.jsx)(N,{dropdownRef:this.dropdownRef,hideDropdown:g,isSaved:!!j?.boardId,onBoardDropdownClick:this.handleBoardDropdownClick,onSaveClick:e=>this.handleSaveClick(e,F),promotedIsLeadAd:l.promotedIsLeadAd,renderPinSaveTooltip:r,selectedItem:F?void 0:c,selectedTitle:B?h:c?.title,showBoardFlyout:w,surface:v,unselectedText:h,view:p}),(0,O.jsx)(eg,{action:"create",additionalCreateFields:{is_stl_pin:(l.shoppingFlags??[]).includes(2)},boardWithSection:x,clientTrackingParams:i,onClose:this.handleRepinHide,pinKey:l,setCompletionPromise:this.setBoardSaveCompletionPromise,shouldHideToast:this.state.showBoardCollabUpsell,shuffleAssetKey:f,urlPinInfo:null,children:({boardSavedTo:e,dismissModal:t,displaySuccessAnimation:i,handleAbort:a,handleNewBoardAnimationCompletion:n,handleSaveToBoard:r,newPin:s,updateDescription:o,modalTitle:d,setModalTitle:c})=>(0,O.jsx)(em.Z,{boardSavedTo:e,boardWithSection:x,dismissModal:t,displaySuccessAnimation:i,handleAbort:a,handleNewBoardAnimationCompletion:n,handleSaveToBoard:r,isInModal:!0,modalTitle:d,newPin:s,onBoardCreated:this.handleBoardCreated,pinKey:l,pwtAuxData:{pin_create_method:"repin"},sensitiveContentNotice:k,setModalTitle:c,shouldRenderContent:P,showCreate:!0,shuffleAssetKey:f,suggestedBoardTitle:I,updateDescription:o,urlPinInfo:null})}),w&&(0,O.jsx)(u.mh,{zIndex:new u.H3([ee.k]),children:(0,O.jsx)(u.J2,{anchor:this.dropdownRef.current,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!1,size:"xl",children:E})}),(0,O.jsx)(S.k6,{placementId:1000578})]})})}}ey(eS,"defaultProps",{variant:"pin",renderSavedStatus:({savedInfo:e,variant:t})=>(0,O.jsx)(ex,{savedInfo:e,variant:t})});let ew=(0,o.memo)(function({pinKey:e,shuffleAssetKey:t,surface:i,...a}){let{logContextEvent:n}=(0,g.u)(),l=(0,j.Z)(),r=(0,c.TH)(),s=(0,k.Z)(eb,e),u=(0,k.Z)(ev,t),h=s.selectedItem,_=(0,B.Z)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),m=(0,B.Z)({name:"BoardPickerBoardsShortlistResource",options:{pin_id:s.entityId,shortlist_length:1,num_shortlist_suggestions:1,suggestions_only:!0,min_confidence:.5}}),b=(0,ea.J)()?.onPinCreate,v=(0,E.dI)(),{showEmailVerificationReminderModal:x}=(0,y.H7)(),w=(0,P.Z)(),C=(0,d.I0)(),A=(0,d.v9)(({mostRecentBoard:e})=>e),{previous:T}=(0,I.ou)(),F=(0,I.aX)(),R=(0,d.v9)(({ui:e})=>e.postRepinMoreIdeasUpsell),Z=s&&s.board?.layout!=="default",{initialSelection:D}=a,K=D?.title||"",N=!0,{showEnabledSaveBehavior:U}=(0,el.ZP)(w.isAuth&&w.id||""),H=(0,S.cO)(),{setAbortNoActionPlacementTimeout:q}=(0,L.x4)(),W={boardId:"",title:l._('Profile', 'pinBetterSave.initialSelection.boardlessPinsOption', 'Option to save to profile without a board.'),type:"boardless",url:"/me/"},V=(0,f.Z)();if(!D){let e=m&&m.data&&m.data[0];D=s.board?.name&&!Z&&w.isAuth&&s.board.owner?.entityId===w.id&&{title:s.board.name,boardId:s.board.entityId,url:s.board.url??""}||s.recommendationReason?.board&&{title:s.recommendationReason.board.name??"",boardId:s.recommendationReason.board.entityId??"",url:s.recommendationReason.board.url??""}||m&&m.isLoaded&&e&&{boardId:e.id,score:JSON.parse(e?.recommendation_reason??"{}").score,title:e.name,url:e.url}||m&&m.isLoaded&&!e&&U&&W||m&&m.isLoaded&&!e&&A&&{boardId:A.id,title:A.name,url:A.url}||void 0,K=m&&m.isLoaded?l._('Select', 'BetterSave label to pick a board from the list', 'BetterSave label to pick a board from the list'):"...",N=!1}D?.url?.includes("_quick_saves")&&(D=W);let $=(0,z.Z)(s),J=(0,o.useCallback)(e=>{let t="cutout"===a.variant?M.o4:M.a1;(0,ef.nP)(`web.closeup.media_viewer_stats.save.clicked_from.${a.variant}`),C(t(e))},[a.variant,C]),G=(0,o.useCallback)(e=>{let t="cutout"===a.variant?M.ti:M.jg;(0,ef.nP)(`web.closeup.media_viewer_stats.unsave.clicked_from.${a.variant}`),C(t(e))},[a.variant,C]),{triggerVisitButtonAnimation:Y}=(0,p.g)();return(0,O.jsx)(eS,{...a,addNewPinToPinsFeed:(e,t,i,a)=>{let n=i?eu.Z.BOARD_SECTION_PINS:eu.Z.BOARDFEED;a&&(n=eu.Z.BOARDLESS_PINS),C((0,eo.vX)({feedId:e,feedType:n,itemIds:[t],itemType:"pin"}))},boardResource:_,carouselData:s&&s.carouselData,currentHistoryStack:F,getStringifiedCommerceAuxData:$,i18n:l,incrementBoardPinCount:({boardId:e,sectionId:t})=>C((0,er.Br)({boardId:e,sectionId:t,increment:1})),initialSelection:D,isLimitedLogin:w.isLimitedLogin,location:r,logContextEvent:n,mostRecentBoard:A,mountAfterActionPlacement:H,onPinCreate:b,onVisitButtonAnimate:Y,pin:s,postRepinMoreIdeasUpsell:R,postRepinUpsellDisabled:N,previousHistory:T,renderPinSaveTooltip:a.renderPinSaveTooltip,requireAuth:V,save:J,savedCutout:s.savedCutout??void 0,savedInfo:s.savedInfo??void 0,searchQueryInvalidated:e=>C((0,es.sb)(e)),selectBoardOrSection:e=>{C(("cutout"===a.variant?M.b6:M.Vp)(e))},selectedItem:h??void 0,setAbortNoActionPlacementTimeout:q,setMostRecentBoard:(e,t,i)=>C((0,ed.p)(e,t,i)),showEmailVerificationReminderModal:x,showSaveToProfile:U,shuffleAsset:u,surface:i,toastManagerContext:v,unsave:G,unselectedText:K,updateUserPinCount:e=>C((0,ec.JS)({userId:e,increment:1})),viewer:w,viewerUserId:w.isAuth?w.id:""})})},288489:function(e,t,i){i.d(t,{Z:()=>r});var a=i(281098),n=i(20256),l=i(785893);let r=({image_url:e,naturalHeight:t,naturalWidth:i})=>((0,a.Z)("RepinSectionImage","/app/www/common/PinBetterSave/RepinSectionImage.tsx"),(0,l.jsx)(n.xu,{"aria-hidden":"true",height:48,marginBottom:1,marginEnd:2,marginTop:1,overflow:"hidden",width:48,children:(0,l.jsx)(n.zd,{height:48,rounding:2,wash:!0,width:48,children:(0,l.jsx)(n.Ee,{alt:"",naturalHeight:t,naturalWidth:i,src:e})})}))},646012:function(e,t,i){i.d(t,{Z:()=>s});var a=i(281098),n=i(20256),l=i(247366),r=i(785893);function s(e){(0,a.Z)("SavedStatus","/app/www/common/PinBetterSave/SavedStatus.tsx");let{clientTrackingParams:t,children:i,currentCarouselIndex:s,hidePinRepEditButton:o=!1,onDeleteSavedState:d,onEditSubmit:c,onToggleModal:u,pinId:h,variant:p,viewParameter:_,shouldUseLegoStyles:g,surface:m}=e;return(0,r.jsxs)(n.xu,{alignItems:"center",direction:"row",display:"flex",maxHeight:"100%",paddingX:"closeup"!==p||g?void 0:2,width:"closeup"===p?"100%":void 0,children:[i&&(0,r.jsx)(n.xu,{"data-test-id":"saved-info",flex:"grow",paddingX:1,children:i}),!o&&(0,r.jsx)(n.xu,{flex:"none",marginStart:"auto",paddingX:1,children:(0,r.jsx)(l.default,{carouselSlotCurrentIndex:s,clientTrackingParams:t,component:0,onDelete:d,onSubmit:c,onToggleModal:u,pinId:h,shouldUseLegoStyles:g,style:"pin"===p?{bgColor:"white",iconColor:"darkGray",size:"sm"}:{bgColor:"transparent",iconColor:"darkGray",size:"sm"},surface:m,useLegoStyles:"pin"===p,viewParameter:_})})]})}},799608:function(e,t,i){i.d(t,{Z:()=>r});let a={row:0,section:0},n={row:-1,section:-1},l=()=>void 0;class r{constructor(e){this.index={...a},this.sections=e,this.updateCallback=l,this.selectItem=l}getIndex(){return this.index}isAtStart(){let{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){let{row:e,section:t}=this.index,i=this.sections[t]||[];return this.sections.length===t+1&&i.length===e+1}next(){if(this.isAtEnd())return;let{row:e,section:t}=this.index;e===n.row&&t===n.section?this.index={...a}:this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;let{row:e,section:t}=this.index;if(e===n.row&&t===n.section)this.index={...a};else if(e>0)this.index.row-=1;else{let e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){let{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index={...n},this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},928053:function(e,t,i){i.d(t,{Z:()=>d});var a=i(281098),n=i(667294),l=i(20256),r=i(111879),s=i(785893);function o(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.Component{constructor(e){super(e),o(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),o(this,"handleIndexUpdate",e=>{let{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),o(this,"handleSelectItem",e=>()=>{let{disabled:t,onSelectItem:i}=this.props;t||i(e)}),o(this,"handleMouseEnter",e=>()=>{let{disabled:t,indexManager:i}=this.props;t||i.updateIndex(e)}),o(this,"handleMouseLeave",()=>{let{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),o(this,"renderItems",(e,t)=>{let{renderItem:i}=this.props,{selectedIndex:a}=this.state,{row:n,section:r}=a||{},{customProps:o={},items:d,renderItem:c}=e,{isDisabled:u}=o,h=t===r,p=c||i;return p&&d.map((e,i)=>{let a=u?.(e)??!1,r=h&&i===n;return(0,s.jsx)(l.xu,{ref:!a&&r?this.setSelectedItemRef:null,"data-test-id":"board-selection",children:a?p({item:e,hovered:r,sectionProps:o}):(0,s.jsx)(l.iP,{fullWidth:!1,onMouseEnter:this.handleMouseEnter({section:t,row:i}),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:2,children:p({item:e,hovered:r,sectionProps:o})})},i)})}),o(this,"renderSections",()=>{let{renderSectionHeader:e,sections:t}=this.props;return t.map((t,i)=>(0,s.jsxs)(l.xu,{children:[e&&e(t,i),this.renderItems(t,i)]},i))});let{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){let{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){let e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;let i=e.getBoundingClientRect(),a=i.top,n=i.bottom,l=t.getBoundingClientRect(),r=l.top;n>=l.bottom?e.scrollIntoView(!1):a<=r&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){(0,a.Z)("SectionList","/app/www/common/SectionList/SectionList.tsx");let{grow:e=!1,maxHeight:t,fetchMore:i}=this.props;return(0,s.jsx)(r.Z,{fetchMore:i,children:({setRef:i,onScroll:a})=>(0,s.jsx)(l.xu,{ref:e=>{this.containerRef=e,i(e)},flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:a,overflow:"auto",children:this.renderSections()})})}}},422790:function(e,t,i){i.d(t,{Z:()=>o});var a=i(281098),n=i(20256),l=i(785893);let r={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function s(){return(0,l.jsx)(n.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,l.jsx)(n.xu,{dangerouslySetInlineStyle:r,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function o({disabled:e,name:t,onClick:i,size:r,submitting:o,text:d}){return(0,a.Z)("SubmitButton","/app/www/common/SubmitButton/SubmitButton.tsx"),(0,l.jsxs)(n.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[o&&(0,l.jsx)(s,{}),(0,l.jsx)(n.zx,{color:"red",disabled:e||o,name:t,onClick:i,size:r,text:d,type:"submit"})]})}},283034:function(e,t,i){i.d(t,{Z:()=>x});var a,n,l=i(281098),r=i(667294);i(167912);var s=i(20256),o=i(28427),d=i(19585),c=i(302148),u=i(785893);function h(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],_=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),g=e=>Math.PI/180*e;class m extends r.PureComponent{constructor(...e){super(...e),h(this,"animationTimer",null),h(this,"canvasRemovalTimer",null),h(this,"containerRef",(0,r.createRef)()),h(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;let{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),i=2.5*e,a=document.createElement("canvas");return a.style.position="absolute",a.style.left=`${0-(i-t)/2}px`,a.style.top=`${0-(i-e)/2}px`,a.style.pointerEvents="none",a.style.width=`${i}px`,a.style.height=`${i}px`,a.style.overflow="visible",a.width=i,a.height=i,a}),h(this,"explode",()=>{let e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;let i=e.getContext("2d");t.prepend(e);let a=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(_(10,30)),color:p[Math.floor(Math.random()*p.length)],degree:Number(_(0,360).toFixed(1)),speed:Math.round(_(0,25)),friction:.9,opacity:Number(_(0,.5).toFixed(1)),yVel:0,gravity:.04})),n=(e,t,i,a)=>{window.requestAnimationFrame(()=>n(e,t,i,a)),t.clearRect(0,0,i,a),e.forEach(e=>{e.x+=e.speed*Math.cos(g(e.degree)),e.y+=e.speed*Math.sin(g(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};i&&n(a,i,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},(this.props.delay||0)+800)})}componentDidUpdate(e){let{delay:t,startAnimation:i}=this.props,{startAnimation:a}=e;i&&a!==i&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,u.jsx)(s.xu,{ref:this.containerRef,position:"relative",children:this.props.children})}}function f(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}h(m,"defaultProps",{delay:0});let y=(void 0!==a||(a=i(588032)).hash&&"18c3db3fbed169f50cffd214f66ddd8e"!==a.hash&&console.error("The definition of 'BoardCreateSuccess_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),b=(void 0!==n||(n=i(430138)).hash&&"f12c153dafdb70970e02775ea0db67c2"!==n.hash&&console.error("The definition of 'BoardCreateSuccess_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class v extends r.PureComponent{constructor(...e){super(...e),f(this,"state",{isInitialized:!1}),f(this,"containerRef",(0,r.createRef)()),f(this,"pinDestinationRef",(0,r.createRef)())}componentDidMount(){window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(){let{isInitialized:e}=this.state,{onDismiss:t}=this.props;e&&t&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(t,2600))}render(){let{pin:e,firstRepin:t,pinImageRef:i,selectedBoardName:a,shuffleAsset:n}=this.props,l=n?.cutoutImages??e?.imageSpec_236x,o=e?.description??"",d=l?.height??1,h=l?.width??1,p=l?.url??"",{isInitialized:_}=this.state,{mask:g,imageContainer:f}=((e,t,i,a)=>{let n,l,r={},s=i.current?.getBoundingClientRect(),o=t.current?.getBoundingClientRect(),d=a.current?.getBoundingClientRect();if(o&&s&&d){r={left:s.left-o.left,top:s.top-o.top};let e={x:d.left-s.left,y:d.top-s.top},t={x:(d.width-s.width)/2,y:(d.height-s.height)/2};n=`translate(${e.x}px, ${e.y}px)`,l=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:r.left,top:r.top,width:e?d?.width:s?.width,height:e?d?.height:s?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?n:"none",transform:e?n:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:s?.width,height:s?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?l:"none",transform:e?l:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(_,this.containerRef,i,this.pinDestinationRef);return(0,u.jsx)(r.Fragment,{children:(0,u.jsxs)(s.xu,{ref:this.containerRef,bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:[(0,u.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:g},maxHeight:335,overflow:"hidden",children:(0,u.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:f},children:(0,u.jsx)(s.Ee,{alt:o,naturalHeight:d,naturalWidth:h,src:p})})}),(0,u.jsx)(s.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:+!!_,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1}},left:!0,position:"absolute",right:!0,top:!0,children:(0,u.jsxs)(s.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:+!!_,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}},direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,u.jsx)(m,{delay:1250,startAnimation:_,children:(0,u.jsx)(s.zd,{height:180,rounding:2,width:270,children:(0,u.jsxs)(s.kC,{alignItems:"stretch",height:"100%",justifyContent:"start",width:"100%",children:[(0,u.jsx)(s.xu,{ref:this.pinDestinationRef,color:"transparent",flex:"grow",height:"100%",marginEnd:1}),(0,u.jsxs)(s.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:80,children:[(0,u.jsx)(s.xu,{color:"secondary",flex:"grow",marginBottom:1}),(0,u.jsx)(s.xu,{color:"secondary",flex:"grow"})]})]})})}),(0,u.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{opacity:+!!_,WebkitTransform:_?"translateY(0)":"translateY(20%)",transform:_?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"}},"data-test-id":"board-saved-heading",paddingX:2,children:(0,u.jsx)(s.X6,{align:"center",children:t?(0,c.nk)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First board create confirmation message', 'First board create confirmation message'),{selectedBoardName:a??""}):(0,c.nk)(this.props.i18n._('You saved this Pin to {{ selectedBoardName }}!', 'Board create confirmation message', 'Board create confirmation message'),{selectedBoardName:a??""})})})]})})]})})}}function x({pinKey:e,shuffleAssetKey:t,...i}){(0,l.Z)("BoardCreateSuccess","/app/www/nux/BoardCreateSuccess.tsx");let a=(0,d.Z)(),n=(0,o.Z)(y,e),r=(0,o.Z)(b,t);return(0,u.jsx)(v,{...i,i18n:a,pin:n,shuffleAsset:r})}f(v,"defaultProps",{firstRepin:!1})},631897:function(e,t,i){i.d(t,{Z:()=>r});var a=i(316949),n=i(672061),l=i(712064);function r({appliedUnifiedFilters:e,autoCorrectionDisabled:t,bubbleId:i,currentlyAppliedFiltersParamTerm:r,guidedSearchQuery:s,inGlobalSearch:o,initialCategory:d,initialDomains:c,initialMaxPrice:u,initialMinPrice:h,isDuplo:p,journeyDepth:_,personalizationPinSig:g,query:m,requestParams:f,rs:y,scope:b,search:v,selectedOneBarModules:x,sourceId:S,sourceModuleId:w,sourceUrl:P,topPinIds:k,user:I}){let j,C=x?.split(",");if(o)j=(0,l.Ht)({autoCorrectionDisabled:t,filters:r,journeyDepth:_,query:m,requestParams:f,scope:b,selectedOneBarModules:C,selectedPinImgSig:g,sourceId:S,sourceModuleId:w,sourceUrl:P,topPinIds:k});else{let o={autoCorrectionDisabled:t,bubbleId:i,filters:r,guidedSearchQuery:s,journeyDepth:_,query:m,requestParams:f,rs:y,scope:b,selectedOneBarModules:C,selectedPinImgSig:g,sourceId:S,sourceModuleId:w,sourceUrl:P,topPinIds:k,user:I};e&&(o.appliedUnifiedFilters=e),o.appliedProductFilters=(0,a.Z)({category:d,domains:c,maxPrice:u,minPrice:h}),p&&(o.domains=c,o.priceMax=u?parseInt(u,10):void 0,o.priceMin=h?parseInt(h,10):void 0,o.topPinIds=(0,n.Z)(v,b)),j=(0,l.Ht)(o)}return j}},77155:function(e,t,i){i.d(t,{Z:()=>h});var a=i(825332),n=i(239988),l=i(274320),r=i(15667),s=i(886981),o=i(478135),d=i(647709),c=i(288910),u=i(631897);function h(e){let{skipResourceCall:t}=e||{},{checkExperiment:i}=(0,l.r)(),{isAuthenticated:h}=(0,r.B)(),{pathname:p,search:_}=(0,a.TH)(),g=(0,d.HG)(),m=!h||!g,{autoCorrectionDisabled:f,bubbleId:y,category:b,currentlyAppliedFiltersParamTerm:v,domains:x,guidedSearchQuery:S,inGlobalSearch:w,journeyDepth:P,personalizationPinSig:k,priceMax:I,priceMin:j,query:C,requestParams:A,rs:B,scope:T,selectedOneBarModules:F,sourceId:E,sourceModuleId:R,topPinIds:z,user:L}=(0,c.n)(),Z=(0,n.Z)(),D=(0,u.Z)({appliedUnifiedFilters:Z,autoCorrectionDisabled:f,bubbleId:y,currentlyAppliedFiltersParamTerm:v,guidedSearchQuery:S,inGlobalSearch:w,initialCategory:b,initialDomains:x,initialMaxPrice:I,initialMinPrice:j,isDuplo:m,journeyDepth:P,personalizationPinSig:k,query:C,requestParams:A,rs:B,scope:T,search:_,selectedOneBarModules:F,sourceId:E,sourceModuleId:R,sourceUrl:p+_,topPinIds:z,user:L}),K=m;m&&(K=!!h&&!i("unify_search_resource_auth_mweb").anyEnabled);let O=t||T===o.lw.USERS&&!m||K;return(0,s.Z)(O?null:D)}},411544:function(e,t,i){i.d(t,{Z:()=>c});var a=i(281098),n=i(20256),l=i(821342),r=i(19585),s=i(302148),o=i(785893);function d(e){let t=e?.imageMediumUrl??e?.image_medium_url??"",i=e?.avatar_color_index??void 0;return{name:e?.fullName??e?.full_name??"",color:i,src:"https://s.pinimg.com/images/user/default_75.png"===t?void 0:t}}function c({board:e,forceViewer:t,isCompact:i,ownerOnly:c}){(0,a.Z)("CollaboratorsFacepile","/app/www/profile/ProfileBoardCard/ProfileBoardCardFooter/CollaboratorsFacepile.tsx");let u=(0,r.Z)(),h=(0,l.Z)(),p=c?[d(e?.owner)]:(function(e,t,i){let{collaborated_by_me:a,collaborating_users:n,owner:l}=e??{},r=n??[],s=[l];if(a||i){let e=r.findIndex(e=>t.isAuth&&e.id===t.id);if(-1!==e){let t=r.splice(e,1)[0];s.push(t)}else s.push(t)}return[...s,...[...r].sort((e,t)=>(e.full_name??"")>(t.full_name??"")?1:(t.full_name??"")>(e.full_name??"")?-1:0)]})(e,h,t).map(d),_=p.slice(0,3).map(e=>e.name),g="";switch(p.length){case 3:g=(0,s.Wc)(`${u._('{{ first }}, {{ second }}, and {{ last }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars', 'List of three usernames')}`,{first:`${_[0]??""}`,second:`${_[1]??""}`,last:`${_[2]??""}`});break;case 2:g=(0,s.Wc)(`${u._('{{ first }} and {{ second }}', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars', 'List of two usernames.')}`,{first:`${_[0]??""}`,second:`${_[1]??""}`});break;default:g=_.join(", ")}let m=p.length>3?(0,s.Wc)(`, ${u.ngettext('Collaborators: {{ userNames }} and {{ leftCount }} more.', 'Collaborators: {{ userNames }} and {{ leftCount }} more.', p.length - 3, 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree', 'Accessibility label that lists the names of collaborators and a final count of non-displayed avatars')}`,{userNames:g,leftCount:`${p.length-3}`}):(0,s.Wc)(`, ${u._('Collaborators: {{ userNames }}.', 'CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree', 'Accessibility label that lists the names of collaborators')}`,{userNames:g});return(0,o.jsx)(n.HE,{accessibilityLabel:m,collaborators:p,size:i?"xs":"sm"})}},889229:function(e,t,i){function a(e,t){return{type:"SECTION_ADDED",payload:{boardId:e,section:t}}}function n(e,t){return{type:"SECTION_DELETED",payload:{boardId:e,sectionId:t}}}i.d(t,{HG:()=>n,OQ:()=>l,hd:()=>a});let l=(e,t)=>({type:"BOARD_SECTION_EDIT",payload:t})},816676:function(e,t,i){i.d(t,{Z:()=>c});var a=i(575108),n=i(72918),l=i(74105),r=i(889229),s=i(189976),o=i(831786),d=i(696323);function c({boardId:e,sourceBoardId:t="",sourceSectionId:i="",name:c,nameSource:u,pinImport:h,initialPinIds:p=[]},_,g,m){let f=0;"RECOMMENDATION"===u?f=1:"EDITED_RECOMMENDATION"===u&&(f=2);let y={board_id:e,initial_pins:h&&!h.all?h.pinIds:p,name:c,name_source:f,...g?{orbac_subject_id:g}:Object.freeze({})};return c=>a.Z.create("BoardSectionResource",y).callCreate({showError:!1}).then(({resource_response:{data:a}})=>{m({event_type:7100,object_id_str:a.id}),c((0,r.hd)(e,a)),c((0,s.vX)({feedId:e,feedType:d.Z.BOARD_SECTIONS,itemIds:[a.id],itemType:"boardsection"})),c((0,l.Z)(e,"pin_count")),c((0,n.jB)("BoardSectionsRepinResource",{board_id:e,orbac_subject_id:g}));let{all:u,pinIds:p}=h||{all:!1,pinIds:[]};return u?new Promise((n,l)=>c((0,o.Z)({inverseSelection:!0,selectedPinIds:p,source:{boardId:t||e,sectionId:i||null},target:{boardId:e,sectionId:a.id}},_)).then(()=>n(a)).catch(l)):(p.length>0&&c((0,s.EX)({feedId:e,feedType:d.Z.BOARDFEED,itemIds:p,itemType:"pin"})),a)})}},74105:function(e,t,i){i.d(t,{Z:()=>n});var a=i(536652);function n(e,t,i){return(0,a.U)("BoardResource",{options:{board_id:e,field_set_key:t,...i?{orbac_subject_id:i}:{}}})}},415602:function(e,t,i){i.d(t,{A8:()=>v,CQ:()=>I,Cf:()=>y,DK:()=>g,GJ:()=>k,RZ:()=>x,SD:()=>S,aN:()=>j,h6:()=>f,tV:()=>P,xx:()=>b,yC:()=>C,zC:()=>m});var a,n,l,r,s,o,d,c=i(581722),u=i(167912),h=i(575108),p=i(980787),_=i(686319);let g=()=>{let e=(void 0!==a||(a=i(800679)).hash&&"850c5de9834cac0edfdd5652a78bffbf"!==a.hash&&console.error("The definition of 'collab_users_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),[t]=(0,u.useMutation)(e),{logContextEvent:n}=(0,p.u)();return async(e,i,a)=>{let l={boardId:e,collaboratorIds:i,message:a||""};return await new Promise((i,a)=>{t({variables:{...l},onCompleted:(t,l)=>{l&&a(l[0]),n({event_type:28,object_id_str:e}),i()},onError:e=>a(e)})})}},m=()=>{let e=(void 0!==n||(n=i(868455)).hash&&"de392a939a95d05f7ee889fe77a9e52d"!==n.hash&&console.error("The definition of 'collab_emails_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),[t]=(0,u.useMutation)(e),{logContextEvent:a}=(0,p.u)();return async(e,i,n)=>{let l={boardId:e,emails:i,message:n||""};return await new Promise((i,n)=>{t({variables:{...l},onCompleted:(t,l)=>{l&&n(l[0]),a({event_type:28,object_id_str:e}),i()},onError:e=>n(e)})})}},f=()=>{let e=(void 0!==l||(l=i(479699)).hash&&"40ae8061007ba5f53a4570e43e4ca864"!==l.hash&&console.error("The definition of 'collab_ApproveInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),[t]=(0,u.useMutation)(e),{logContextEvent:a}=(0,p.u)();return async(e,i)=>{let n={boardId:e,userId:i};return await new Promise((i,l)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&l(n[0]),a({event_type:32,object_id_str:e}),i(t)},onError:e=>l(e)})})}};function y(e,t){return async i=>{await (0,_.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"POST",data:{collaborator:t}}),i({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST",payload:{boardId:e,collaboratorId:t}})}}function b(e,t){return async i=>{await (0,_.Z)({url:`/v3/boards/${e}/collaborators/requests/ownership/`,method:"DELETE",data:{collaborator:t}}),i({type:"BOARD_OWNERSHIP_TRANSFER_REQUEST_CANCEL",payload:{boardId:e}})}}let v=(e,t)=>({type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e,collaboratingUser:t}}),x=()=>{let e=(void 0!==r||(r=i(608747)).hash&&"7005ce437a6a6ff33741ab44aa02cf61"!==r.hash&&console.error("The definition of 'collab_AcceptInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),[t]=(0,u.useMutation)(e),{logContextEvent:a}=(0,p.u)();return async e=>{let i={boardId:e};return await new Promise((n,l)=>{t({variables:{...i},onCompleted:(t,i)=>{i&&l(i[0]),a({event_type:32,object_id_str:e}),n(t)},onError:e=>l(e)})})}},S=(e,t,i)=>async a=>{a(v(e,t)),(await h.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t.id}).callUpdate()).resource_response.error||i({event_type:32,object_id_str:e})};function w(e,t){return{type:"BOARD_REQUEST_TO_JOIN",payload:{boardId:e,value:t}}}let P=()=>{let e=(void 0!==s||(s=i(336997)).hash&&"9aa22a7713214239538142ad2c957cc3"!==s.hash&&console.error("The definition of 'collab_RequestToJoin_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s),[t]=(0,u.useMutation)(e),a=(0,c.I0)();return async e=>{let i={boardId:e};return await new Promise((n,l)=>{t({variables:{...i},onCompleted:(t,i)=>{i&&(a(w(e,!1)),l(i[0])),a(w(e,!0)),n(t)},onError:t=>{a(w(e,!1)),l(t)}})})}};function k(e,t){return i=>{(0,_.Z)({url:`/v3/boards/${e}/collaborators/invite/${t}/`,method:"DELETE",data:{board:e,user:t}}).catch(()=>{i(w(e,!0))}),i(w(e,!1))}}let I=()=>{let e=(void 0!==o||(o=i(296485)).hash&&"c62e5df78917dd238b70f366f358d487"!==o.hash&&console.error("The definition of 'collab_DeclineOrDeleteBoardCollaboratorInvite_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),[t]=(0,u.useMutation)(e),{logContextEvent:a}=(0,p.u)();return async(e,i,n)=>{let l={boardId:e,userId:i,ban:n||!1};return await new Promise((i,n)=>{t({variables:{...l},onCompleted:(t,l)=>{l&&n(l[0]),a({event_type:29,object_id_str:e}),i(t)},onError:e=>n(e)})})}},j=()=>{let e=(void 0!==d||(d=i(579965)).hash&&"2c3e1508650962adfff1171e950fa419"!==d.hash&&console.error("The definition of 'collab_RemoveBoardCollaborators_Mutation' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),d),[t]=(0,u.useMutation)(e),{logContextEvent:a}=(0,p.u)();return async(e,i)=>{let n={board:e,collaboratorIds:[i]};return await new Promise((i,l)=>{t({variables:{...n},onCompleted:(t,n)=>{n&&l(n[0]),a({event_type:29,object_id_str:e}),i(t)},onError:e=>l(e)})})}},C=()=>{let e=I(),t=j();return(i,a,n)=>async()=>{let{invited_user:a,status:l,board:{id:r}}=i;a&&("accepted"===l?await t(r,a.id):await e(r,a.id,n))}}},498951:function(e,t,i){i.d(t,{p:()=>a});let a=(e,t,i)=>({type:"MOST_RECENT_BOARD",payload:{id:e,name:t,url:i}})},831786:function(e,t,i){i.d(t,{S:()=>p,Z:()=>_});var a=i(575108),n=i(74105),l=i(225013),r=i(189976),s=i(686231),o=i(696323),d=i(697063);let c=e=>t=>{d.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(t,e))},u=e=>(0,r.N8)(e.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,e.sectionId||e.boardId);function h(e,t){let{source:i,target:a}=e;a.boardId!==i.boardId?(t((0,n.Z)(i.boardId,"pin_count")),t((0,n.Z)(a.boardId,"pin_count"))):i.sectionId&&a.sectionId||t((0,n.Z)(a.boardId,"pin_count")),i.sectionId&&t((0,l.Z)(i.sectionId)),a.sectionId&&t((0,l.Z)(a.sectionId))}function p(e){return t=>{let{selectedPinIds:i,source:a,target:n}=e;t((0,r.EX)({feedId:a.sectionId||a.boardId,feedType:a.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,itemIds:i,itemType:"pin"})),t((0,r.vX)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,itemIds:i,itemType:"pin"})),i.forEach(e=>{t((0,s.Vp)({pinId:e,boardId:n.boardId,sectionId:n.sectionId||void 0,title:n.name||""}))}),h(e,t)}}function _(e,t){return i=>{let{selectedPinIds:n,target:l}=e;return n.forEach(e=>{i((0,s.Vp)({pinId:e,boardId:l.boardId,sectionId:l.sectionId||void 0,title:l.name||""}))}),(function(e,t,i){let{inverseSelection:n,selectedPinIds:l,source:s,target:d,orbacSubjectId:h}=e;if(s.boardId===d.boardId&&(s.sectionId||null)===(d.sectionId||null))return Promise.reject();if(n){let e={board_id:s.boardId,new_board_id:d.boardId,old_section_id:s.sectionId||void 0,new_section_id:d.sectionId||void 0,pin_ids:l,orbac_subject_id:h};return a.Z.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([t(u(s)),t(u(d))])).catch(c(i))}{let e=(e,i)=>{t((0,r.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,itemIds:l,itemType:"pin"})),t((0,r.vX)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?o.Z.BOARD_SECTION_PINS:o.Z.BOARDFEED,itemIds:l,itemType:"pin"}))};e(s,d);let n=()=>e(d,s);if(d.boardId===s.boardId)if(d.sectionId){let e={section_id:d.sectionId,pins:l,orbac_subject_id:h};return a.Z.create("BoardSectionEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),c(i)(e)})}else{let e={section_id:s.sectionId,pins:l,orbac_subject_id:h};return a.Z.create("BoardSectionPinsResource",e).callDelete({showError:!1}).catch(e=>{n(),c(i)(e)})}{let e={board_id:d.boardId,section_id:d.sectionId||void 0,pin_ids:l,orbac_subject_id:h};return a.Z.create("BulkEditResource",e).callUpdate({showError:!1}).catch(e=>{n(),c(i)(e)})}}})(e,i,t).then(()=>h(e,i))}}},749830:function(e,t,i){i.d(t,{Z:()=>_});var a=i(281098),n=i(667294),l=i(878709),r=i(355940),s=i(821342),o=i(886981),d=i(448505),c=i(7872),u=i(391694),h=i(785893);let p=(0,n.lazy)(()=>Promise.all([i.e("25418"),i.e("78372"),i.e("16111"),i.e("91440"),i.e("17280"),i.e("9715")]).then(i.bind(i,425975)));function _(e){(0,a.Z)("EditPinModalLoader","/app/www/save/EditPinModal/EditPinModalLoader.tsx");let t=(0,d.Z)(),i=(0,s.Z)(),_=(0,c.lJ)(i,t),g=(0,o.Z)({name:"PinResource",options:(0,u.Tr)(e.pinId,!0,_)});return(0,h.jsx)(r.Z,{name:"SafeSuspense_EditPinModalLoader_EditPinModal",children:(0,h.jsx)(n.Suspense,{children:g?.data?(0,h.jsx)(l.A,{pinKey:{type:"Legacy",data:g.data},children:(0,h.jsx)(p,{...e,pin:g.data,pinIsLoaded:g.isLoaded})}):null})})}},715724:function(e,t,i){i.d(t,{Z:()=>r});var a=i(581722),n=i(980787),l=i(679422);let r=({pinId:e,carouselSlotCurrentIndexProp:t,component:i,setShowEditModal:r})=>{let s,{logContextEvent:o}=(0,n.u)(),d=(0,l.Z)(),c=(0,a.v9)(({pins:e})=>e),{carousel_data:u}=c&&e&&c[e]||{},{index:h}=u||{};return void 0!==t&&(s=h||t||0),{onClick:({event:e})=>{if(d)return void d();e.stopPropagation(),o({event_type:101,element:3,...i?{component:i}:Object.freeze({})}),r(!0)},carouselSlotCurrentIndex:s}}},391694:function(e,t,i){function a(e){return!!(e&&e.trim().length)}function n(e,t){let i=a(e),n=a(t);return(i||n)&&e!==t}i.d(t,{Tr:()=>l,aU:()=>n});let l=(e,t,i)=>({field_set_key:"detailed",id:e,preserve_component_state:t,...i?{orbac_subject_id:i}:Object.freeze({})})},524558:function(e,t,i){i.d(t,{Z:()=>s});var a=i(281098),n=i(667294),l=i(20256),r=i(785893);function s(e){(0,a.Z)("FocusableSearchField","/app/www/save/board/FocusableSearchField.tsx");let{accessibilityClearButtonLabel:t,accessibilityLabel:i,focused:s,id:o,onBlur:d,onChange:c,onFocus:u,placeholder:h,value:p,size:_="lg"}=e,g=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(s){let e=g.current;window.requestAnimationFrame(()=>{let t=e&&e.querySelector("input");t instanceof HTMLInputElement&&t.focus()})}},[s]),(0,r.jsx)(l.xu,{ref:g,children:(0,r.jsx)(l.Um,{accessibilityClearButtonLabel:t,accessibilityLabel:i,id:o,onBlur:d,onChange:c,onFocus:u,placeholder:h,size:_,value:p})})}},341570:function(e,t,i){i.d(t,{W:()=>u,Z:()=>h});var a=i(281098),n=i(20256),l=i(918920),r=i(19585),s=i(247354),o=i(288489),d=i(494904),c=i(785893);function u(e,t=""){(0,a.Z)("BoardPickerRow","/app/www/save/pin-to-board/BoardPickerPane/BoardPickerRow.tsx");let i=e&&e.length>1?RegExp(e,"i"):"";return e&&e.length>1?t.split(i).reduce((i,a)=>{if(i.length>0&&e&&e.length){let n=t.toLowerCase().indexOf(e.toLowerCase());return i.concat(t.substring(n,n+e.length),a)}return[a]},[]):t}let h=function(e){let t=(0,r.Z)(),{disabled:i,item:a,isSection:h,isSelectMode:p,isWithinSectionPicker:_,saveState:g,searchQuery:m,selected:f}=e,y=h?null:a,b=h?a:null,v=b&&b.title||y&&y.name||"",x="",S=!1,w="",P=0;y&&({image_cover_url:x,is_collaborative:S,privacy:w,section_count:P=0}=y);let k=u(m,v),I=w===l.ZP.BoardPrivacy.SECRET,j=!i&&(f||!!g),C=!_&&"number"==typeof P&&P>0,A="number"==typeof P&&P>0?"boardWithSection":"boardWithoutSection",B=p?t._('Select', 'Board select button label', 'Board select button label'):t._('Save', 'Pin save button label', 'Pin save button label');return(0,c.jsxs)(n.xu,{alignItems:"center",color:j?"secondary":"default","data-test-id":A,display:"flex",height:64,marginEnd:2,marginStart:2,marginTop:1,padding:2,rounding:3,children:[y&&(0,c.jsx)(n.xu,{color:"secondary",flex:"none",height:48,marginEnd:2,overflow:"hidden",rounding:2,width:48,children:x&&(0,c.jsx)(n.Ee,{alt:t._('Board cover image', 'boardPickerRow.image.altText', 'alt text for a board cover image'),fit:"cover",naturalHeight:1,naturalWidth:1,src:x})}),b&&!!b.preview_pins?.length&&(0,c.jsx)(o.Z,{image_url:b.preview_pins[0].image_square_url??"",naturalHeight:b.preview_pins[0].image_square_size_pixels?.height??1,naturalWidth:b.preview_pins[0].image_square_size_pixels?.width??1}),(0,c.jsxs)(n.kC,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,c.jsx)(n.xv,{color:i?"subtle":"default",lineClamp:1,size:"300",weight:"bold",children:k}),(C||!j)&&(0,c.jsxs)(n.kC,{alignItems:"center",justifyContent:"start",children:[I&&(0,c.jsx)(d.Z,{type:"secret"}),S&&(0,c.jsx)(s.Z,{board:y,showCollaborativeIcon:S,useLegoLayout:!0}),C&&(0,c.jsx)(d.Z,{type:"sections"})]}),!C&&j&&!g&&(0,c.jsx)(n.xu,{alignItems:"center",color:"primary","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:4,children:(0,c.jsx)(n.xv,{color:"inverse",overflow:"normal",size:"300",weight:"bold",children:B})}),!C&&j&&"loading"===g&&(0,c.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:(0,c.jsx)(n.xH,{accessibilityLabel:t._('Saving', 'Accessibility label for saving a pin to a board', 'Accessibility label for saving a pin to a board'),show:!0})})]})]})}},494904:function(e,t,i){i.d(t,{Z:()=>r}),i(281098);var a=i(20256),n=i(19585),l=i(785893);let r=function({type:e}){let t=(0,n.Z)(),i={group:{accessibilityLabel:t._('group board', 'Board picker group board icon', 'Board picker group board icon'),icon:"people"},protected:{accessibilityLabel:t._('protected board', 'Board picker protected board icon', 'Board picker protected board icon'),icon:"protect"},secret:{accessibilityLabel:t._('secret board', 'Board picker secret board icon', 'Board picker secret board icon'),icon:"lock"},sections:{accessibilityLabel:t._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-forward"},sectionsInline:{accessibilityLabel:t._('board with sections', 'Board picker board with sections icon', 'Board picker board with sections icon'),icon:"arrow-down"}}[e],r="sections"===e||"sectionsInline"===e;return(0,l.jsx)(a.xu,{marginStart:+!!r,children:(0,l.jsx)(a.xu,{marginStart:2*!!r,children:"sections"===e||"sectionsInline"===e?(0,l.jsx)(a.JO,{accessibilityLabel:i.accessibilityLabel,color:"default",icon:i.icon,size:"12"}):(0,l.jsx)(a.JO,{accessibilityLabel:i.accessibilityLabel,color:"default",icon:i.icon,size:16})})})}},313760:function(e,t,i){i.d(t,{Z:()=>h});var a=i(281098),n=i(667294),l=i(20256),r=i(980787),s=i(19585),o=i(886981),d=i(785893);function c(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends n.Component{constructor(...e){super(...e),c(this,"state",{isHovering:!1}),c(this,"onHover",()=>{this.setState({isHovering:!0})}),c(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){(0,a.Z)("BoardSuggestionListRow","/app/www/save/pin-to-board/BoardSuggestionList/BoardSuggestionListRow.tsx");let{name:e,selected:t,image:i,inFlyoutExp:n}=this.props;return n?(0,d.jsxs)(l.xu,{alignItems:"center",color:this.state.isHovering?"secondary":"transparent",direction:"row",display:"flex",onMouseOut:this.offHover,onMouseOver:this.onHover,paddingX:4,paddingY:2,children:[(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.zd,{height:40,rounding:2,width:40,children:this.state.isHovering&&i&&i.url?(0,d.jsx)(l.Ee,{alt:"",color:"",fit:"cover",naturalHeight:i.height??1,naturalWidth:i.width??1,src:i.url}):(0,d.jsx)(l.xu,{color:"secondary",height:40,width:40})})}),(0,d.jsx)(l.xu,{padding:2,children:(0,d.jsx)(l.X6,{size:"400",children:e})})]}):(0,d.jsxs)(l.xu,{alignItems:"center",color:t?"secondary":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[(0,d.jsx)(l.xu,{children:(0,d.jsx)(l.JO,{accessibilityLabel:"",color:t?"default":"subtle",icon:"add"})}),(0,d.jsx)(l.xu,{marginStart:3,children:(0,d.jsx)(l.xv,{color:t?"default":"subtle",weight:"bold",children:e})})]})}}let h=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:i,image:c,minHeight:h,onBoardSelected:p})=>{(0,a.Z)("BoardSuggestionList","/app/www/save/pin-to-board/BoardSuggestionList/BoardSuggestionList.tsx");let{logContextEvent:_}=(0,r.u)(),g=(0,s.Z)(),[m,f]=(0,n.useState)(-1),{data:y=[],isLoaded:b}=(0,o.Z)({name:"ApiResource",options:{url:`/v3/pins/${String(i)}/board_title_suggestions/`,pin_id:i}}),v=(0,n.useMemo)(()=>y&&y.length?y.map(e=>e.title):[],[y]),x=()=>{f(-1)},S=(t,i)=>{let a=m===i;return(0,d.jsx)("li",{children:(0,d.jsx)(l.iP,{onMouseEnter:()=>{f(i)},onMouseLeave:x,onTap:()=>{p(v[i],!1),_({event_type:101,component:13025,element:23})},children:(0,d.jsx)(u,{image:c,inFlyoutExp:e,name:t,selected:a})})},i)};return b?v&&v.length?e?(0,d.jsx)(l.xu,{children:(0,d.jsx)("ul",{children:v.map(S)})}):t?(0,d.jsxs)(l.xu,{children:[(0,d.jsx)(l.xu,{marginBottom:3,marginStart:6,marginTop:5,children:(0,d.jsx)(l.xv,{children:g._('Suggested board names', 'text above suggested board names list', 'text above suggested board names list')})}),(0,d.jsx)("ul",{children:v.map(S)})]}):(0,d.jsxs)(l.xu,{children:[(0,d.jsx)(l.xu,{marginTop:2,paddingX:5,children:(0,d.jsx)(l.xv,{children:g._('Suggested board names', ' - ', ' -- ')})}),(0,d.jsx)("ul",{children:v.map(S)})]}):null:(0,d.jsx)(l.kC,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:h||"",children:(0,d.jsx)(l.xH,{accessibilityLabel:g._('Loading board suggestions', 'Accesibility label for loading board suggestions', 'Accesibility label for loading board suggestions'),show:!0})})}},508696:function(e,t,i){i.d(t,{Z:()=>o});var a=i(281098),n=i(20256),l=i(19585),r=i(538688),s=i(785893);function o(e){(0,a.Z)("CreateBoardButton","/app/www/save/pin-to-board/CreateBoardButton/CreateBoardButton.tsx");let t=(0,l.Z)(),{buttonLabel:i,hasHoverState:o,name:d,onClick:c}=e,{isHovering:u,hoverHandlers:h}=(0,r.Z)(),p=d||i||t._('Create board', ' - ', ' -- ');return(0,s.jsx)(n.iP,{onMouseEnter:h.onMouseOver,onMouseLeave:h.onMouseLeave,onTap:c,children:(0,s.jsxs)(n.xu,{alignItems:"center",color:o&&u?"secondary":"default",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,s.jsx)(n.xu,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},marginEnd:2,rounding:2,children:(0,s.jsx)(n.JO,{accessibilityLabel:"",color:"default",icon:"add",size:20})}),d?(0,s.jsx)(n.xu,{margin:1,children:(0,s.jsxs)(n.xv,{inline:!0,overflow:"normal",children:[" ",t._('Create: ', ' - ', ' -- ')," "]})}):null,(0,s.jsxs)(n.xv,{align:"center",inline:!0,lineClamp:1,weight:"bold",children:[" ",p," "]})]})})}},7257:function(e,t,i){i.d(t,{Z:()=>f}),i(281098);var a=i(667294),n=i(581722),l=i(20256),r=i(521009),s=i(821342),o=i(19585),d=i(765533),c=i(448505),u=i(7872),h=i(422790),p=i(816676),_=i(785893);function g(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m extends a.Component{constructor(e){super(e),g(this,"onCreateSection",()=>{let{board:e,sourceBoard:t,sourceSection:i,dispatch:a,completeCreateSectionAction:n,pinImport:l,viewer:r,orbacActingAs:s,logContextEvent:o}=this.props,d=(0,u.lJ)(r,s);return this.setState({isSaving:!0}),a((0,p.Z)({boardId:e.id,sourceBoardId:t&&t.id,sourceSectionId:i&&i.id,name:this.state.inputName.trim(),pinImport:l},this.props.i18n,d,o)).then(e=>{this.setState({isSaving:!1}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),g(this,"handleKeyDown",({event:e})=>{let{createError:t,inputName:i}=this.state;[d.Z.ENTER,d.Z.NUMPAD_ENTER].includes(e.which)&&!t&&i.trim()&&this.onCreateSection()}),g(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),g(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){let{createError:i,inputRef:a}=this.state;a&&(!t.inputRef||i)&&a.focus()}render(){let{showTitle:e,positionRelative:t}=this.props,{createError:i,inputName:a,isSaving:n}=this.state,r=!!a.trim()&&!i;return(0,_.jsxs)(l.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},direction:"column",display:"flex",flex:"grow",position:t?"relative":"absolute",right:!0,rounding:2,top:!0,width:"100%",children:[e&&(0,_.jsx)(l.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,_.jsx)(l.X6,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,_.jsxs)(l.xu,{padding:4,children:[(0,_.jsx)(l.xu,{marginBottom:2,children:(0,_.jsx)(l.__,{htmlFor:"sectionEditName",children:(0,_.jsx)(l.xv,{color:i?"error":"subtle",size:"200",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,_.jsx)(l.xu,{children:(0,_.jsx)(l.xu,{ref:this.handleInputRef,children:(0,_.jsx)(l.nv,{errorMessage:i||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:a})})})]}),(0,_.jsx)(l.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start"}),(0,_.jsx)(l.xu,{padding:4,children:(0,_.jsx)(l.kC,{alignItems:"stretch",justifyContent:"end",children:(0,_.jsx)(h.Z,{disabled:!r||n,onClick:this.onCreateSection,submitting:n,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}}let f=function(e){let t=(0,n.I0)(),i=(0,o.Z)(),a=(0,s.Z)(),l=(0,c.Z)();return(0,_.jsx)(m,{...e,dispatch:t,i18n:i,logContextEvent:(0,r.Z)(),orbacActingAs:l,viewer:a})}},963215:function(e,t,i){i.d(t,{Z:()=>s});var a=i(281098),n=i(20256),l=i(215295),r=i(785893);function s({url:e,description:t,color:i}){return(0,a.Z)("ImagelessPinImage","/app/www/save/pin-to-board/ImagelessPinImage/ImagelessPinImage.tsx"),i=i||"#8fa7bf",(0,r.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{background:i}},height:216,rounding:2,width:"100%",children:(0,r.jsxs)(n.xu,{maxHeight:200,overflow:"hidden",padding:4,children:[e&&(0,r.jsx)(n.xu,{marginBottom:2,children:(0,r.jsx)(n.xv,{color:"inverse",size:"100",children:(0,l.Z)(e).hostname||e})}),(0,r.jsx)(n.xu,{maxHeight:144,children:(0,r.jsx)(n.xv,{color:"inverse",overflow:"normal",weight:"bold",children:t})})]})})}},867215:function(e,t,i){i.d(t,{Z:()=>g});var a=i(281098),n=i(667294),l=i(20256),r=i(686319),s=i(19585),o=i(709311),d=i(302148),c=i(765533),u=i(796765),h=i(785893);function p(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class _ extends n.Component{constructor(...e){super(...e),p(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),p(this,"onDismiss",()=>{}),p(this,"mounted",!1),p(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),p(this,"handleKeyDown",e=>{e.keyCode===c.Z.UP?this.handlePrevHashtag(e):e.keyCode===c.Z.DOWN?this.handleNextHashtag(e):e.keyCode===c.Z.ESCAPE?this.handleClose(e):e.keyCode===c.Z.ENTER&&this.handleSubmit(e)}),p(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),p(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),p(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),p(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),p(this,"callResource",e=>{let{makeCancelablePromise:t}=this.props;t((0,r.Z)({url:"/v3/search/autocomplete/",data:{q:e,show_pin_count:!0}}),"typeahead").then(e=>{if(!this.mounted)return;let{data:t}=e.resource_response;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){let{recommendations:e,resourceLoaded:t,selectedIndex:i}=this.state,{anchor:a,idealDirection:n}=this.props,r=e.filter(e=>e.query),s="flyout_"+r.length;return t&&r.length>0?(0,h.jsx)(l.J2,{anchor:a,idealDirection:n||"down",onDismiss:this.onDismiss,size:"sm",children:(0,h.jsx)(l.xu,{width:"100%",zIndex:new l.Ry(3),children:r.length>0?r.map((e,t)=>(0,h.jsx)(l.iP,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:(0,h.jsxs)(l.xu,{alignItems:"center",color:t===i?"secondary":"transparent",display:"flex",justifyContent:"between",padding:1,children:[(0,h.jsx)(l.xu,{flex:"grow",children:(0,h.jsx)(l.xv,{inline:!0,size:"200",weight:"bold",children:e.query})}),(0,h.jsx)(l.xu,{flex:"none",children:(0,h.jsx)(l.xv,{inline:!0,size:"100",children:(0,d.nk)(this.props.i18n.ngettext('{{ count }} pin', '{{ count }} pins', Number(e.pin_count), 'label for n pins in hashtag flyout', 'label for n pins in hashtag flyout'),{count:(0,h.jsx)(o.Z,{value:Number(e.pin_count)},"pinCount")})})})]})},e.query)):null})},s):null}}function g(e){(0,a.Z)("HashtagFlyout","/app/www/save/pin-to-board/PinPane/HashtagFlyout.tsx");let t=(0,s.Z)(),i=(0,u.Z)();return(0,h.jsx)(_,{...e,i18n:t,makeCancelablePromise:i})}},305469:function(e,t,i){i.d(t,{Z:()=>A});var a,n,l,r,s,o=i(281098),d=i(667294);i(167912);var c=i(20256),u=i(980787),h=i(28427),p=i(963215),_=i(221020),g=i(801082),m=i(19585),f=i(302148),y=i(886981),b=i(785893);let v=(void 0!==a||(a=i(297180)).hash&&"3caf9424c2af74d2b11a6ea682b57d1b"!==a.hash&&console.error("The definition of 'AlreadyPinnedCheck_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),x=(void 0!==n||(n=i(938742)).hash&&"6bb1a587f71f85424aa51845831862d4"!==n.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),S=(void 0!==l||(l=i(618916)).hash&&"0b5f077c08e31de36594b6918e128d12"!==l.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function w({pinKey:e}){(0,o.Z)("AlreadyPinnedCheck","/app/www/save/pin-to-board/PinPane/AlreadyPinnedCheck.tsx");let t=(0,m.Z)(),i=(0,h.Z)(v,e),a="GraphQL"===(0,_.o)(e),n=(0,g.Z)({strategy:a?"GraphQL":"Legacy",query:S,variables:{pinId:i.entityId},options:{fetchPolicy:"network-only"},useGetLegacyResource:({pinId:e})=>{let t=(0,y.Z)({name:"ApiResource",options:{url:`/v3/pins/${e}/`,field_sets:["pin.board()","pin.id","pin.pinned_to_board()","pin.type","pin.via_pinner()"]},noCache:!0});return{data:t.data,refresh:t.refresh}}}),l=n?.v3GetPinQuery?.__typename==="V3GetPin"?n.v3GetPinQuery.data:null,r=(0,h.Z)(x,l);return r&&r.pinnedToBoard&&"quick_creates"!==r.pinnedToBoard.layout?(0,b.jsxs)(c.xu,{children:[(0,b.jsx)(c.xu,{color:"errorBase","data-test-id":"already-pinned",display:"flex",padding:3,rounding:2,width:185,children:(0,b.jsx)(c.xv,{align:"center",color:"inverse",size:"200",weight:"bold",children:(0,f.nk)(t._('Psst! You already saved this Pin to {{ board_name }} ', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:(r.pinnedToBoard||{}).name}).join(" ")})}),(0,b.jsx)(c.xu,{display:"flex",justifyContent:"center",marginTop:-3,children:(0,b.jsx)(c.JO,{accessibilityLabel:"",color:"error",icon:"heart",size:26})})]}):null}var P=i(867215);function k(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let I=(void 0!==r||(r=i(451508)).hash&&"d928a4e793c8e81567357b1faa71d2e3"!==r.hash&&console.error("The definition of 'PinPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r),j=(void 0!==s||(s=i(810730)).hash&&"1a4583782792fbfe92015cb2dbe50f70"!==s.hash&&console.error("The definition of 'PinPane_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);class C extends d.Component{constructor(...e){super(...e),k(this,"state",{flyoutCursorIndex:-1,description:this.props.pin?.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),k(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),k(this,"handleHashtagAddition",e=>{let{pin:t}=this.props;this.props.logContextEvent({event_type:101,component:208,element:10249,object_id_str:t?.entityId,aux_data:{hashtags:e}});let i=this.state.flyoutCursorIndex,a=Number(i+this.state.hashtagQuery.length),n=this.state.description.slice(0,i)+e+" "+this.state.description.slice(a);this.updateDescription(n),this.setState({description:n,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})})}render(){let{color:e,isFirstPin:t,pin:i,pinImageRef:a,shuffleAsset:n}=this.props,{editing:l,flyoutOpened:r,hashtagQuery:s,isHashtagFlyoutOpen:o}=this.state,d=n?.cutoutImages??i?.imageSpec_236x,u=d?.url||i?.imageBase64||this.props.urlPinInfo?.imageUrl,h=this.state.description||this.props.urlPinInfo?.description||"",_=i?.link||this.props.urlPinInfo?.link;return(0,b.jsxs)(c.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:r&&l?{transform:"translateY(-75px)"}:{}},display:"flex",justifyContent:"center",position:"relative",width:t?"50%":"",children:[(0,b.jsxs)(c.kC,{alignItems:"center",direction:"column",justifyContent:"start",children:[i?.entityId&&!n&&(0,b.jsx)(w,{pinKey:i}),(0,b.jsx)(c.xu,{paddingY:9*!!t,width:240,children:(0,b.jsx)(c.xu,{ref:a,maxHeight:r&&l?220:335,overflow:"hidden",rounding:4,children:u?(0,b.jsx)(c.Ee,{alt:h,naturalHeight:d?.height||1,naturalWidth:d?.width||1,src:u}):!!_&&(0,b.jsx)(p.Z,{color:e||"",description:h,url:_})})})]}),this.anchor&&o?(0,b.jsx)(P.Z,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,query:s}):null]})}}function A({pinKey:e,shuffleAssetKey:t,...i}){(0,o.Z)("PinPane","/app/www/save/pin-to-board/PinPane/PinPane.tsx");let{logContextEvent:a}=(0,u.u)(),n=(0,h.Z)(I,e),l=(0,h.Z)(j,t);return(0,b.jsx)(C,{...i,logContextEvent:a,pin:n,shuffleAsset:l})}},66690:function(e,t,i){i.d(t,{K:()=>K});var a,n,l=i(281098),r=i(667294),s=i(581722);i(167912);var o=i(825332),d=i(575108),c=i(980787),u=i(697063),h=i(364843),p=i(877956),_=i(475498),g=i(821342),m=i(28427),f=i(390843),y=i(19585),b=i(536652),v=i(87853),x=i(639983),S=i(598849),w=i(594135),P=i(620427),k=i(253861),I=i(548286),j=i(206459),C=i(401450),A=i(20256),B=i(302148),T=i(417245),F=i(785893),E=i(643067);function R(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let z=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>)]+/gi,L=(void 0!==a||(a=i(973220)).hash&&"bfa270bf437ef1e9195cafe07b0b3631"!==a.hash&&console.error("The definition of 'PinSaveRequest_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),Z=(void 0!==n||(n=i(13697)).hash&&"58c24e25a76e7a1c4533f3b07f490517"!==n.hash&&console.error("The definition of 'PinSaveRequest_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class D extends r.Component{constructor(...e){super(...e),R(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.getModalTitle(this.props.showCreate,!!this.props.boardWithSection),pinDescription:this.props.pin&&this.props.pin.description||this.props.urlPinInfo?.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),R(this,"unmounted",!1),R(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),R(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),R(this,"close",()=>{let{onClose:e}=this.props;e&&e(),this.props.logContextEvent({event_type:2502,component:5,element:610})}),R(this,"safeSetState",(e,t)=>{this.unmounted?t&&t():this.setState(e,t)}),R(this,"getPinResource",(e,t,i)=>{let{color:a,clientTrackingParams:n,pin:l,method:r,guid:s,additionalCreateFields:o,advertiser_id:c,urlPinInfo:u,shuffleAsset:h}=this.props,p=l?.entityId?"RepinResource":"PinResource",_=l?.imageUrl||u?.imageUrl,g=l?.link||u?.link,m=!l?.entityId&&_?(0,x.Z)(_,g):l?.imageSpec_orig?.url||"",f={...o,board_id:t||"",color:a||"",clientTrackingParams:(0,P.Z)(n,l?.trackingParams),description:this.state.pinDescription,guid:s||"",link:g,image_base64:l?.imageBase64??void 0,image_url:m,is_buyable_pin:!1,is_removable:l?.promotedIsRemovable??void 0,media_upload_id:l?.mediaUploadId??void 0,method:r||"",pin_id:l?.entityId||"",section:i,title:l?.title||"",...c?{advertiser_id:c}:Object.freeze({}),...h?{shuffle_asset:h.entityId}:{}};if(!e){let{facebook:e,twitter:t}=this.state.sharing;f.share_facebook=e,f.share_twitter=t}return d.Z.create(p,f)}),R(this,"triggerPubSubs",e=>{this.props.onPinCreate&&this.props.onPinCreate({boardId:e.board.id,pinId:e.id})}),R(this,"makeCancelablePromise",e=>{let t=!1;return{promise:new Promise((i,a)=>{e.then(e=>t?a({isCanceled:!0}):i(e)),e.catch(e=>t?a({isCanceled:!0}):a(e))}),cancel(){t=!0}}}),R(this,"handleLogToastClick",()=>{this.props.logContextEvent({event_type:101,component:20,view_type:52})}),R(this,"showBoardSavedToast",(e,t)=>{let{toastManagerContext:i,i18n:a}=this.props;i.showToast(({hideToast:i})=>{var n;return(0,F.jsx)(_.Z,{duration:E.A,href:t?`${e.url??""}${t.slug??""}`:e.url,imageUrl:e.image_cover_url??"",onClick:this.handleLogToastClick,onHide:i,text:(n=e.name,((0,l.Z)("lib","/app/www/save/pin-to-board/lib.tsx"),t)?(0,T.Z)(a._('Saved to {{sectionName}} in {{boardName}}', 'Toast for successfully saving to a section within a board', 'Toast for successfully saving to a section within a board'),{sectionName:t.title??"",boardName:n??""}):(0,F.jsx)(A.xv,{children:(0,B.nk)(a._('Saved to {{ boardName }}', 'Libs.PinToBoard.NewBoardToast', 'boardName:Name of the new board created to add the saved pin'),{boardName:(0,F.jsx)(A.xv,{weight:"bold",children:n})})}))})})}),R(this,"dismissModal",()=>{let{resolve:e,newPin:t}=this.state;e&&e(t)}),R(this,"handleBoardSaveSuccess",(e,t,i,a)=>{let{action:n,saveToBoard:l,dispatch:r,pin:s,setCompletionPromise:o,shouldShowToast:d,showRepinAnimation:c,viewerUserId:u,urlPinInfo:h}=this.props;r((0,p.fO)());let _=e.resource_response.data,g=this.makeCancelablePromise(new Promise(e=>{this.triggerPubSubs(_);let n=this.state.pinDescription.match(z)||[];n.length>0&&this.props.logContextEvent({event_type:2,element:10273,object_id_str:this.props.pin?.entityId,aux_data:{hashtags:JSON.stringify(n)}});let l=()=>{d&&this.showBoardSavedToast(t,i),this.safeSetState({displaySuccessAnimation:!0,modalTitle:this.props.i18n._('Board created', 'Modal title after creating a new board', 'Modal title after creating a new board'),newPin:_,resolve:e})};a?l():e(_)}));!a&&s?.entityId&&c(s.entityId),o(g),l(t),r((0,I.Br)({boardId:t.id,sectionId:i&&i.id,increment:1})),u&&(r((0,C.JS)({userId:u,increment:1})),r((0,p.fO)())),(i||!t.image_cover_url)&&(t.image_cover_url=s?.imageUrl||h?.imageUrl||s?.imageSpec_236x?.url||"",r((0,I.yT)(t))),i&&r((0,b.U)("BoardSectionResource",{options:{field_set_key:"board_page",section_id:i.id}})),s?.entityId&&r((0,j.Ur)({id:s.entityId,nodeId:s.__id,boardId:t.id,title:t.name??"",url:t.url??"",localPinId:_.id}))}),R(this,"handleSaveToBoard",(e,t,i)=>{let{onToggleModal:a,shouldShowToast:n,mountAfterActionPlacement:l}=this.props;n&&!i&&(this.close(),this.showBoardSavedToast(e,t));let r="secret"===(e.privacy||""),s={board:t?t.id:e.id,state:E.S.LOADING};this.safeSetState({boardSavedTo:s},()=>{this.getPinResource(r,e.id,(t||{}).id).callCreate({showError:!1}).then(n=>{l("Save",{pin_id:this.props.pin?.entityId,is_promoted:this.props.pin?.isPromoted}),this.safeSetState({boardSavedTo:Object.assign(s,{state:E.S.SUCCESS})},()=>this.handleBoardSaveSuccess(n,e,t,i)),a&&!i&&a(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),u.Z.showError(e.message_detail||e.message);let t=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(t),a&&a(!1)})})}),R(this,"handleNewBoardAnimationCompletion",()=>{let{pin:e,showRepinAnimation:t}=this.props;e?.entityId&&t(e.entityId)})}getModalTitle(e,t){if(e)if(t)return this.props.i18n._('Create section', 'modal title for create section pane', 'modal title for create section pane');else return this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board');return t?this.props.i18n._('Choose section', 'modal title for choose section', 'modal title for choose section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board')}componentDidUpdate(e){let{boardWithSection:t,showCreate:i,pin:a,urlPinInfo:n,description:l}=this.props,r={};(a!==e.pin||n!==e.urlPinInfo||l!==e.description)&&(r.pinDescription=a?.description||n?.description||l||""),(i!==e.showCreate||t!==e.boardWithSection)&&(r.modalTitle=this.getModalTitle(i,!!t)),Object.keys(r).length>0&&this.safeSetState(r)}componentWillUnmount(){this.unmounted=!0}render(){let{close:e,dismissModal:t,handleNewBoardAnimationCompletion:i,handleSaveToBoard:a,setModalTitle:n,updateDescription:l}=this,{boardSavedTo:r,displaySuccessAnimation:s,modalTitle:o,newPin:d}=this.state,{color:c}=this.props;return this.props.children({boardSavedTo:r,color:c,dismissModal:t,displaySuccessAnimation:s,handleAbort:e,handleNewBoardAnimationCompletion:i,handleSaveToBoard:a,modalTitle:o,newPin:d,setModalTitle:n,updateDescription:l})}}function K({pinKey:e,shuffleAssetKey:t,...i}){(0,l.Z)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx");let{saveToBoard:a}=(0,w.W)(),{logContextEvent:n}=(0,c.u)(),r=(0,k.J)()?.onPinCreate,d=(0,y.Z)(),u=(0,o.TH)(),p=(0,g.Z)(),_=(0,v.dI)(),b=(0,s.I0)(),{updateHeaderState:x}=(0,S.Z)(),P=(0,s.v9)(({advertiser:e})=>p.isAuth&&e&&e.owner_user_id!==p.id?e.id:void 0),{previous:I}=(0,f.ou)(),j=(0,h.cO)(),C=(0,m.Z)(L,e),A=(0,m.Z)(Z,t);return(0,F.jsx)(D,{...i,advertiser_id:P,dispatch:b,i18n:d,location:u,logContextEvent:n,mountAfterActionPlacement:j,onPinCreate:r,pin:C,previousHistory:I,saveToBoard:a,showRepinAnimation:e=>x({type:"showRepinAnimation",payload:e}),shuffleAsset:A,toastManagerContext:_,viewerUserId:p.isAuth?p.id:void 0})}},876338:function(e,t,i){i.d(t,{Z:()=>eo});var a,n,l,r,s=i(281098),o=i(667294);i(167912);var d=i(20256),c=i(982166),u=i(821342),h=i(28427),p=i(19585),_=i(675973),g=i(822377),m=i(283034),f=i(581722),y=i(521009),b=i(15667),v=i(816676),x=i(785893);let S=({board:e,completeCreateSectionAction:t,height:i,onClose:a,pinImport:n,url:l,width:r})=>{(0,s.Z)("SectionCreateModal","/app/www/save/board/BoardPage/ModalContents/SectionCreateModal.tsx");let u=(0,p.Z)(),{isRTL:h}=(0,b.B)(),_=(0,y.Z)(),g=(0,f.I0)(),[m,S]=(0,o.useState)(""),[w,P]=(0,o.useState)(!1),[k,I]=(0,o.useState)(null);return(0,x.jsx)(c.ZP,{accessibilityModalLabel:u._('Repin modal', 'save.pinToBoard.modal.label', 'Accessibility label on modal'),footer:(0,x.jsx)(d.kC,{children:(0,x.jsx)(d.xu,{marginStart:"auto",children:(0,x.jsx)(d.zx,{color:"red",dataTestId:"create-section-add-button",disabled:w||!m.trim()||!!k,fullWidth:!0,onClick:()=>{e&&(P(!0),g((0,v.Z)({boardId:e.id,name:m.trim(),pinImport:n},u,void 0,_)).then(i=>{t(e,i,!1)}).catch(e=>{I(e.message_detail||e.message)}).finally(()=>{P(!1)}))},size:"lg",text:u._('Add', 'sectionCreateModal.add.button', 'add a new section')})})}),heading:(0,x.jsx)(d.xu,{paddingY:8,children:(0,x.jsxs)(d.kC,{justifyContent:"center",children:[(0,x.jsx)(d.xu,{maxWidth:400,children:(0,x.jsx)(d.X6,{align:"center",size:"600",children:u._('Add section', 'sectionCreateModal.title', 'Title in the add section modal')})}),(0,x.jsx)(d.xu,{left:h,padding:8,position:"absolute",right:!h,top:!0,children:(0,x.jsx)(d.hU,{accessibilityLabel:u._('Close', 'sectionCreateModal.closeButton', 'close section create modal button'),icon:"cancel",iconColor:"darkGray",onClick:a,size:"md"})})]})}),onDismiss:a,size:"sm",children:(0,x.jsx)(d.xu,{padding:8,children:(0,x.jsxs)(d.kC,{children:[(0,x.jsx)(d.zd,{height:i,rounding:4,width:r,children:l&&(0,x.jsx)(d.Ee,{alt:"",fit:"cover",naturalHeight:i??1,naturalWidth:r??1,src:l})}),(0,x.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{width:r?`calc(100% - ${r}px)`:"100%"}},marginStart:8,children:(0,x.jsx)(d.nv,{dataTestId:"create-section-name-input-field",errorMessage:k,id:"sectionEditName",label:u._('Name', 'section.create.label', 'label text for section input'),onChange:e=>{S(e.value),I(null)},placeholder:u._('Like "Lighting"', 'sectionCreateModal.boardSection.name', 'Placeholder for board section name'),size:"lg",type:"text",value:m})})]})})})};var w=i(980787),P=i(72918),k=i(886981),I=i(684148),j=i(647709);let C=void 0;function A(e,t,i,a){return{...e?{pin_id:e}:Object.freeze({}),...t?{username:t}:Object.freeze({}),...i?{advertiser_id:i,filter:"protected"}:Object.freeze({}),field_set_key:"board_picker",limit:C,shortlist_suggestions:2,isDesktop:a}}var B=i(562247),T=i(443962);let F=(void 0!==a||(a=i(416054)).hash&&"76215b7b40cb02e76b77e58c8765d0d1"!==a.hash&&console.error("The definition of 'BoardPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);class E extends o.Component{constructor(...e){var t,i,a;super(...e),t="getSections",i=e=>{let{boardResource:{data:t}}=this.props;if(!t)return[];let{all_boards:i,boards_shortlist:a}=t,n=(e=>{let t=[],i=[];return e.forEach(e=>{e.name?.match(/^\d/)?i.push(e):t.push(e)}),[...t,...i]})(i);return n.length<=3?[{items:n}]:e.length>=I.Z?[{items:(0,T.j)(n,e)}]:[a.length?{items:a,title:this.props.i18n._('Top choices', ' - ', ' -- ')}:{items:[]},{items:n,title:this.props.i18n._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')}]},(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{boardResource:{data:e,error:t,isLoaded:i},boardSavedTo:a,isSelectMode:n,onBoardCreate:l,onBoardSelected:r,pin:s}=this.props,o=i&&!!e&&e.all_boards.length<=3;return(0,x.jsx)(B.Z,{boardSavedTo:a,getSections:this.getSections,hasLoadError:!!t,hasLowBoardCount:o,isLoaded:i,isSelectMode:n,onCreate:l,onSelected:r,pinId:s?.entityId})}}function R({pinKey:e,...t}){(0,s.Z)("BoardPicker","/app/www/RepinPicker/BoardPicker/BoardPicker.tsx");let i=(0,p.Z)(),a=(0,u.Z)(),n=(0,j.HG)(),l=(0,h.Z)(F,e),r=(0,f.v9)(({advertiser:e})=>{if(a.isAuth&&e&&e.owner_user_id!==a.id)return e.id}),o=(0,f.v9)(({advertiser:e})=>{if(a.isAuth&&e&&e.owner_user_id!==a.id)return e.owner_user_id}),d=(0,k.Z)({name:"BoardPickerBoardsResource",options:A(l?.entityId,o,r,n)});return(0,x.jsx)(E,{...t,boardResource:d,i18n:i,pin:l})}class z extends o.Component{constructor(...e){var t,i,a;super(...e),t="getSections",i=e=>{let{board:t,i18n:i,sectionsResource:{data:a}}=this.props,n=i._('Board', 'PinSaveButton.RepinPicker.SectionListBoardTitle', 'board title on section picker'),l=i._('Section', 'PinSaveButton.BoardFlyout.SectionListSectionTitle', 'section title on section picker');return e.length>=I.Z?[{items:(0,T.j)([t],e),customProps:{inSectionSelection:!0}},{items:(0,T.j)(a??[],e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0},title:n},{items:a??[],title:l}]},(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{sectionsResource:{error:e,isLoaded:t},boardSavedTo:i,isSelectMode:a,onSectionCreate:n,onSectionSelected:l,pinId:r}=this.props;return(0,x.jsx)(B.Z,{boardSavedTo:i,createButtonLabel:this.props.i18n._('Add section', 'Button for creating a board section', 'Button for creating a board section'),getSections:this.getSections,hasLoadError:!!e,isLoaded:t,isSelectMode:a,onCreate:n,onSelected:l,pinId:r})}}function L(e){(0,s.Z)("SectionPicker","/app/www/RepinPicker/SectionPicker.tsx");let t=(0,p.Z)(),i=(0,k.Z)({name:"BoardSectionsRepinResource",options:{board_id:e.board.id}});return(0,x.jsx)(z,{...e,i18n:t,sectionsResource:i})}var Z=i(918920),D=i(10972),K=i(277454),O=i(744862),N=i(417245);function M(e){let t=(0,p.Z)(),{body:i,img:a,onClick:n,selected:l,title:r,username:s,valid:o}=e;return(0,x.jsx)(d.xu,{marginBottom:4,children:(0,x.jsx)(d.iP,{onTap:n,children:(0,x.jsxs)(d.kC,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[a,(0,x.jsxs)(d.xu,{flex:"grow",marginEnd:2,marginStart:3,children:[(0,x.jsx)(d.xu,{marginBottom:1,children:(0,x.jsx)(d.xv,{lineClamp:1,weight:"bold",children:r})}),(0,x.jsx)(d.xv,{lineClamp:1,size:"100",children:s||i})]}),(0,x.jsx)(d.xu,{marginStart:2,children:s?l?(0,x.jsx)(d.JO,{accessibilityLabel:t._('Confirmation an invite will be sent', 'Alt tags on a check box on the board create flow for board invites', 'Alt tags on a check box on the board create flow for board invites'),color:"error",icon:"check-circle",size:32}):(0,x.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):(0,x.jsx)(d.zx,{color:"gray",disabled:!!l||!o,size:"sm",text:l?t._('Sent', 'Sent a board collaborator invite', 'Sent a board collaborator invite'):t._('Invite', 'Add board collaborator invite', 'Add board collaborator invite')})})]})})})}var U=i(415602);function H(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function q(e,t,i){let{id:a}=e;return t===i.findIndex(e=>e.id===a)}class W extends o.Component{constructor(...e){super(...e),H(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),H(this,"isIdSelected",{}),H(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),H(this,"handleCollaboratorClick",e=>{let{id:t,type:i}=e;this.isIdSelected[t]=!this.isIdSelected[t];let{inviteUsers:a,inviteEmails:n}=this.props,{selectedCollaborators:l}=this.state,r=l.concat([e]);this.props.onSelectedCollaboratorsChange({id:t,resource:"email"===i?n:a}),this.setState({selectedCollaborators:r})}),H(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})})}componentDidMount(){let{inviteUsers:e,inviteEmails:t}=this.props;this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map(i=>{let{id:a,type:n}=i;return this.isIdSelected[a]=!this.isIdSelected[a],this.props.onSelectedCollaboratorsChange({id:a,resource:"email"===n?t:e}),null})}render(){let{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,i=t||[],a=(""===e?this.state.selectedCollaborators.concat(i).filter(q):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:(0,K.Z)(e)}).concat(i).filter(q)).map(e=>(function(e,t,i,a){if((0,s.Z)("Contact","/app/www/BoardCreate/Contact.tsx"),"user_share_suggestion"===e.type||"user"===e.type){let a=(0,x.jsx)(O.qE,{accessibilityLabel:"",name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return(0,x.jsx)(M,{img:a,onClick:()=>i(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){let n,l,{id:r,valid:s}=e,o=(0,x.jsx)(d.xu,{alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:(0,x.jsx)(d.JO,{accessibilityLabel:a._('Email icon', 'Email icon on board create modal', 'Email icon on board create modal'),color:"default",icon:"envelope",size:20})}),c=(0,N.Z)(a._('Email {{ email }}', ' - ', ' -- '),{email:r});return t?(n=a._('Done!', 'Text that lets the user know we sent the board invite email', 'Text that lets the user know we sent the board invite email'),l=()=>void 0):(n=s?a._('Click to send!', 'Text that lets the user know they can successfully send a board invite email', 'Text that lets the user know they can successfully send a board invite email'):a._('Keep typing!', 'Text that lets a user know the email they are typing is not valid yet', 'Text that lets a user know the email they are typing is not valid yet'),l=()=>s?i(e):void 0),(0,x.jsx)(M,{body:n,img:o,onClick:l,selected:t,title:c,valid:s})}})(e,this.isIdSelected[e.id],this.handleCollaboratorClick,this.props.i18n)).map((e,t)=>(0,x.jsx)("li",{children:e},t));return(0,x.jsxs)(d.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,x.jsx)(d.xu,{paddingX:3,paddingY:2,children:(0,x.jsx)(d.xv,{size:"100",children:this.props.i18n._('Add collaborators (optional)', 'Optional field to add collaborators to a board on board create', 'Optional field to add collaborators to a board on board create')})}),(0,x.jsx)(d.xu,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:(0,x.jsx)(d.xu,{flex:"grow",children:(0,x.jsx)(D.Z,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,x.jsx)(d.Um,{accessibilityLabel:this.props.i18n._('Search for collaborators by name or email', ' - ', ' -- '),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:this.props.i18n._('Search by name or email', ' - ', ' -- '),size:"lg",value:e})})})}),(0,x.jsx)(d.xu,{marginBottom:14,overflow:"auto",paddingX:3,children:(0,x.jsx)("ul",{children:a})})]})}}function V(e){(0,s.Z)("BoardCreateCollaborators","/app/www/BoardCreate/BoardCreateCollaborators.tsx");let t=(0,p.Z)(),i=(0,k.Z)({name:"ShareSuggestionsResource",noCache:!0}),a=(0,U.zC)(),n=(0,U.DK)();return(0,x.jsx)(W,{...e,i18n:t,inviteEmails:a,inviteUsers:n,shareSuggestionsResource:i})}var $=i(422790),J=i(896960);function G({isOverlayPanelEnabled:e,onCancel:t,onCreate:i,onInvite:a,prefilledName:n,preselectedCollaborators:l,showTitle:r}){(0,s.Z)("CreateBoardPane","/app/www/save/pin-to-board/CreateBoardPane/CreateBoardPane.tsx");let c=(0,p.Z)(),{isRTL:u}=(0,b.B)(),{handleCreate:h,handleChangeName:_,handleChangePrivacy:g,isAdAccountOwner:m,state:{createBoardError:f,inputName:y,nameValidatorErrors:v,privacy:S,saving:w}}=(0,J.Z)({onCreate:i,prefilledName:n}),P=0===v.length,k=S===Z.ZP.BoardPrivacy.SECRET,I=(0,x.jsxs)(o.Fragment,{children:[(0,x.jsx)(d.kC,{children:(0,x.jsx)(d.zx,{onClick:t,text:c._('Cancel', 'cancel board create', 'cancel board create')})}),(0,x.jsxs)(d.kC,{alignItems:"stretch",justifyContent:"end",children:[!!f&&(0,x.jsx)(d.xu,{paddingX:2,children:(0,x.jsx)(d.xv,{align:"center",color:"error",size:"200",weight:"bold",children:f})}),(0,x.jsx)($.Z,{disabled:!y.trim()||!P||!!f||w,submitting:w,text:c._('Create', 'create a new board', 'create a new board')})]})]});return(0,x.jsx)(d.xu,{color:"default",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:(0,x.jsx)("form",{onSubmit:e=>{e.preventDefault(),h()},style:{height:"100%"},children:(0,x.jsxs)(d.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[r&&(0,x.jsx)(d.xu,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:(0,x.jsx)(d.X6,{size:"400",children:c._('Create board', ' - ', ' -- ')})}),(0,x.jsxs)(d.xu,{padding:3,children:[(0,x.jsx)(d.xu,{marginBottom:2,children:(0,x.jsx)(d.__,{htmlFor:"boardEditName",children:(0,x.jsx)(d.xv,{size:"100",children:c._('Name', ' - ', ' -- ')})})}),(0,x.jsx)(d.xu,{children:(0,x.jsx)(d.nv,{errorMessage:v.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>_(e),placeholder:c._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:y})})]}),m&&(0,x.jsxs)(o.Fragment,{children:[(0,x.jsxs)(d.xu,{padding:3,children:[(0,x.jsx)(d.xu,{marginBottom:2,children:(0,x.jsx)(d.__,{htmlFor:"secret",children:(0,x.jsx)(d.xv,{size:"100",children:c._('Secret', 'secret board', 'secret board')})})}),(0,x.jsx)(d.xu,{children:(0,x.jsx)(d.rs,{id:"secret",onChange:g,switched:k})})]}),(0,x.jsx)(d.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start",overflow:"hidden",children:(0,x.jsx)(d.xu,{width:"100%",children:(0,x.jsx)(V,{onSelectedCollaboratorsChange:a,preselectedCollaborators:l})})})]}),!m&&(0,x.jsx)(o.Fragment,{children:(0,x.jsxs)(d.xu,{padding:3,children:[(0,x.jsx)(d.xu,{marginBottom:2,children:(0,x.jsx)(d.__,{htmlFor:"protected",children:(0,x.jsx)(d.xv,{size:"100",children:c._('Protected board (not listed on user\'s profile)', 'protected board', 'protected board')})})}),(0,x.jsx)(d.xu,{children:(0,x.jsx)(d.rs,{disabled:!0,id:"protected",onChange:()=>void 0,switched:!0})})]})}),e?(0,x.jsx)(d.xu,{bottom:!0,color:"default","data-test-id":"create-board-footer-overlay",display:"flex",justifyContent:"between",left:u,position:"absolute",right:!u,width:672,children:I}):(0,x.jsx)(d.xu,{borderStyle:"shadow",bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},"data-test-id":"create-board-footer-default",display:"flex",justifyContent:"between",left:u,paddingX:4,paddingY:2,position:"absolute",right:!u,width:720,children:I})]})})})}var Y=i(7257);function X(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let Q=(void 0!==n||(n=i(146550)).hash&&"56f620fbd63abf8f7cb32f9a378198f8"!==n.hash&&console.error("The definition of 'BoardsPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class ee extends o.Component{constructor(...e){super(...e),X(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),X(this,"close",()=>{let{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:i}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):i()}),X(this,"sendInvites",e=>{let{inviteQueue:t}=this.state;Object.keys(t).forEach(i=>{t[i].resource(e.id??"",[i])})}),X(this,"handleInvite",e=>{let{inviteQueue:t}=this.state;if(t[e.id]){let i={...t};delete i[e.id],this.setState({inviteQueue:i})}else{let i={...t,[e.id]:e};this.setState({inviteQueue:i})}}),X(this,"handleBoardCreate",e=>{let{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),X(this,"handleBoardSave",(e,t)=>{let{selectedSectionBoard:i}=this.state,{onBoardSave:a,invalidatePinBetterSaveResource:n,invalidateResource:l}=this.props,r="board_section"===e.type;if(l(),n(),i&&("boardsection"===e.type||r))return a(i,e,t);let{section_count:s=0}=e;!i&&"number"==typeof s&&s>0?this.setState({selectedSectionBoard:e},this.manageModalTitle):(this.sendInvites(e),a(e,void 0,t))}),X(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle),this.props.logContextEvent({event_type:101,component:e?13105:13025,element:e?10306:249})}),X(this,"manageModalTitle",()=>{let{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:i}=this.state;e&&e(i&&t?this.props.i18n._('Add section', 'Repin title for making a board section', 'Repin title for making a board section'):i&&!t?this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board'):t&&!i?this.props.i18n._('Choose section', 'Repin title for choosing a board section', 'Repin title for choosing a board section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board'))})}render(){let{boardSavedTo:e,isOverlayPanelEnabled:t,isRepin:i,isSelectMode:a,pin:n,preselectedCollaborators:l,setModalTitle:r,suggestedBoardTitle:s}=this.props,{newName:o,selectedSectionBoard:c,showCreate:u}=this.state,h=!!c,p=!r;return(0,x.jsxs)(d.xu,{display:"flex",position:"relative",width:"100%",children:[!u&&(0,x.jsx)(d.xu,{direction:"column",display:"flex",marginTop:4,width:"100%",children:c?(0,x.jsx)(L,{board:c,boardSavedTo:e,isSelectMode:a,onSectionCreate:this.handleCreate(h),onSectionSelected:this.handleBoardSave}):(0,x.jsx)(R,{boardSavedTo:e,isSelectMode:a,onBoardCreate:this.handleCreate(h),onBoardSelected:this.handleBoardSave,pinKey:n})}),u&&!c&&(0,x.jsx)(G,{isOverlayPanelEnabled:t,onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,prefilledName:o||s,preselectedCollaborators:l,showTitle:p}),u&&c&&(0,x.jsx)(Y.Z,{board:c,completeCreateSectionAction:this.handleBoardSave,initialName:o,isRepin:i,onClearModal:this.close,showTitle:p})]})}}function et({pinKey:e,...t}){(0,s.Z)("BoardsPane","/app/www/save/pin-to-board/BoardsPane/BoardsPane.tsx");let{logContextEvent:i}=(0,w.u)(),a=(0,p.Z)(),n=(0,h.Z)(Q,e),l=(0,f.I0)();return(0,x.jsx)(ee,{...t,i18n:a,invalidatePinBetterSaveResource:()=>{l((0,P.jB)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},invalidateResource:()=>{l((0,P.jB)("BoardPickerBoardsResource",A(n?.entityId)))},logContextEvent:i,pin:n})}var ei=i(305469),ea=i(77836);function en(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let el=(void 0!==l||(l=i(384592)).hash&&"616d5be8fea6092b51f23b548a1a5dca"!==l.hash&&console.error("The definition of 'PinToBoard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),er=(void 0!==r||(r=i(301056)).hash&&"4435ca5e135b834ea8a6425f68eb2f7a"!==r.hash&&console.error("The definition of 'PinToBoard_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);class es extends o.PureComponent{constructor(...e){super(...e),en(this,"pinImageRef",(0,o.createRef)()),en(this,"handleSavePinToBoard",(e,t,i)=>{let{handleSaveToBoard:a}=this.props;a(e,t,i)}),en(this,"close",()=>{let{handleAbort:e}=this.props;e()}),en(this,"dismissModal",()=>{let{dismissModal:e}=this.props;e&&e()})}render(){let{boardSavedTo:e,boardWithSection:t,color:i,displaySuccessAnimation:a,handleNewBoardAnimationCompletion:n,isInModal:l,newPin:r,pin:s,preselectedCollaborators:u,onBoardCreated:h,sensitiveContentNotice:p,setModalTitle:f,showCreate:y,shouldRenderContent:b,suggestedBoardTitle:v,updateDescription:w,urlPinInfo:P,shuffleAsset:k}=this.props,I=P?.description||P?.link||P?.imageUrl;if(!s&&!I||!b)return null;if(y&&t)return(0,x.jsx)(S,{board:t,completeCreateSectionAction:this.handleSavePinToBoard,height:s?.imageSpec_236x?.height??0,onClose:this.close,url:s?.imageSpec_236x?.url??P?.imageUrl??"",width:s?.imageSpec_236x?.width??0});let j=null;r&&r.board&&(j=r.board.name);let C=p&&p.title||this.props.modalTitle,{checkExperiment:A}=(0,_.Z)(),B=l&&A("web_board_create_overlay_panel").anyEnabled,T=p?(0,x.jsx)(g.Z,{inModal:!0,notices:[p]}):(0,x.jsx)(d.kC,{alignItems:"stretch",dataTestId:"pin-to-board-content",height:B?"100%":"calc(90vh - 97px)",justifyContent:"center",maxHeight:B?void 0:"703px",width:"100%",children:(0,x.jsxs)(o.Fragment,{children:[(0,x.jsxs)(d.xu,{color:"default",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:2,width:"100%",children:[(0,x.jsx)(d.kC,{alignItems:"stretch",direction:"column",justifyContent:"between",width:"40%",children:(0,x.jsx)(d.xu,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:(0,x.jsx)(ei.Z,{color:i,pinImageRef:this.pinImageRef,pinKey:s,shuffleAssetKey:k,updateDescription:w,urlPinInfo:P})})}),(0,x.jsx)(d.kC,{alignItems:"stretch",width:"60%",children:(0,x.jsx)(et,{boardSavedTo:e,boardWithSection:t,isOverlayPanelEnabled:B,isRepin:!0,onBoardCreated:h,onBoardSave:this.handleSavePinToBoard,onClose:this.close,pinKey:s,preselectedCollaborators:u,setModalTitle:l?f:void 0,showCreate:y,suggestedBoardTitle:v})})]}),a&&(0,x.jsx)(m.Z,{onDismiss:()=>{n(),this.dismissModal()},pinImageRef:this.pinImageRef,pinKey:s,selectedBoardName:j,shuffleAssetKey:k})]})});if(!l)return T;let F=C||this.props.i18n._('Repin modal', 'save.pin-to-board.PinToBoard.PinToBoard', 'Accessibility label on modal');return B?(0,x.jsx)(d.mh,{zIndex:new d.H3([ea.BO]),children:(0,x.jsx)(d.To,{accessibilityLabel:F,heading:C||void 0,onDismiss:this.close,size:"md",children:T})}):(0,x.jsx)(c.ZP,{accessibilityModalLabel:F,heading:C,onDismiss:this.close,size:"md",children:T})}}en(es,"defaultProps",{pwtAuxData:{}});let eo=function({pinKey:e,shuffleAssetKey:t,...i}){let a=(0,p.Z)(),n=(0,u.Z)(),l=(0,h.Z)(el,e),r=(0,h.Z)(er,t);return(0,x.jsx)(es,{...i,i18n:a,pin:l,shuffleAsset:r,viewer:n})}},643067:function(e,t,i){i.d(t,{A:()=>a,S:()=>n});let a=4e3,n={LOADING:"loading",SUCCESS:"success"}},896960:function(e,t,i){i.d(t,{Z:()=>_});var a=i(667294),n=i(581722),l=i(918920),r=i(657043),s=i(821342),o=i(19585),d=i(302148),c=i(72918),u=i(640924),h=i(33618),p=i(890774);function _({onCreate:e,prefilledName:t}){let i=(0,o.Z)(),_=(0,n.v9)(({advertiser:e})=>e),g=(0,n.I0)(),m=(0,s.Z)(),f=!_||m.isAuth&&_.owner_user_id===m.id,y=_&&_.id,b=(0,p.Z)(),[v,x]=(0,a.useState)({createBoardError:null,inputName:t||"",nameValidatorErrors:[],privacy:f?l.ZP.BoardPrivacy.PUBLIC:l.ZP.BoardPrivacy.PROTECTED,saving:!1}),S=()=>{let{inputName:t,privacy:a}=v;x({...v,saving:!0,createBoardError:null}),b({boardCreateOptions:{name:t,privacy:a,...!f&&y?{advertiser_id:y}:Object.freeze({}),aux_data:{source:"board_picker"}}}).then(t=>{x({...v,saving:!1}),e(t)}).catch(e=>{let t=i._('Uh oh! Something went wrong.', ' - ', ' -- ');if("string"==typeof e)t=e;else{let i=(0,r.Z)(e,"message");if(i){let a=(0,r.Z)(e,"message_detail");t=a?`${i} ${a}`:i}}x({...v,saving:!1,createBoardError:t})}),g((0,c.jB)("BoardsResource",(0,h.Z)(m.isAuth?m.username:"",a===l.ZP.BoardPrivacy.SECRET)))};return{handleChangeName:(e,t)=>{x({...v,inputName:e,nameValidatorErrors:(0,u.FU)([(0,u.aH)({message:i._('Don\'t forget to name your board!', ' - ', ' -- ')}),(0,u.Gy)({max:l.ZP.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:(0,d.nk)(i._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a user input is too long', 'Validation error when a user input is too long'),{maxLength:l.ZP.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],e),createBoardError:null}),t&&S()},handleChangePrivacy:()=>{x({...v,privacy:v.privacy===l.ZP.BoardPrivacy.SECRET?l.ZP.BoardPrivacy.PUBLIC:l.ZP.BoardPrivacy.SECRET})},handleCreate:S,isAdAccountOwner:f,state:v}}},890774:function(e,t,i){i.d(t,{Z:()=>c});var a=i(581722),n=i(782677),l=i(575108),r=i(877956),s=i(440568),o=i(536652),d=i(72918);function c(){let e=(0,a.I0)(),t=(0,a.v9)(e=>e.resources);return async function({boardCreateOptions:i,deprecatedSchemaForNormalization:a}){let c=await l.Z.create("BoardResource",i).callCreate(),u=c.resource_response.data,h=a?(0,n.Fv)(u,a):void 0;e((0,d.XM)("BoardResource",i,c,h)),e((0,r.fO)({event_type:20})),u.owner?.id&&e((0,o.b)("UserResource",{options:{user_id:u.owner.id,field_set_key:"save_behavior"}}));let p=t.BoardsResource||{},_=t.BoardsFeedResource||{};return Object.keys(p).forEach(t=>{(0,s.k)(t).username===u.owner?.username&&e((0,d.jB)("BoardsResource",t))}),Object.keys(_).forEach(t=>{(0,s.k)(t).username===u.owner?.username&&e((0,d.jB)("BoardsFeedResource",t))}),u}}},30579:function(e,t,i){i.d(t,{b:()=>a});let a={CUSTOM:0,HIDDEN:1,HOPE:2,LOVE:3,NONE:4}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/95853-d9504c37b65967f2.mjs.map